<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_07) on Wed Sep 02 13:23:54 CEST 2009 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
XAItemStateManager (Apache Jackrabbit 1.6.0 API)
</TITLE>

<META NAME="date" CONTENT="2009-09-02">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="XAItemStateManager (Apache Jackrabbit 1.6.0 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/XAItemStateManager.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../org/apache/jackrabbit/core/state/UpdatableItemStateManager.html" title="interface in org.apache.jackrabbit.core.state"><B>PREV CLASS</B></A>&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?org/apache/jackrabbit/core/state/XAItemStateManager.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="XAItemStateManager.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#fields_inherited_from_class_org.apache.jackrabbit.core.state.LocalItemStateManager">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.apache.jackrabbit.core.state</FONT>
<BR>
Class XAItemStateManager</H2>
<PRE>
<A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../../../../resources/inherit.gif" ALT="extended by "><A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html" title="class in org.apache.jackrabbit.core.state">org.apache.jackrabbit.core.state.LocalItemStateManager</A>
      <IMG SRC="../../../../../resources/inherit.gif" ALT="extended by "><B>org.apache.jackrabbit.core.state.XAItemStateManager</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core">InternalXAResource</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html" title="interface in org.apache.jackrabbit.core.state">ItemStateManager</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/NodeStateListener.html" title="interface in org.apache.jackrabbit.core.state">NodeStateListener</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/UpdatableItemStateManager.html" title="interface in org.apache.jackrabbit.core.state">UpdatableItemStateManager</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>XAItemStateManager</B><DT>extends <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html" title="class in org.apache.jackrabbit.core.state">LocalItemStateManager</A><DT>implements <A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core">InternalXAResource</A></DL>
</PRE>

<P>
Extension to <code>LocalItemStateManager</code> that remembers changes on
 multiple save() requests and commits them only when an associated transaction
 is itself committed.
<P>

<P>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_org.apache.jackrabbit.core.state.LocalItemStateManager"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Fields inherited from class org.apache.jackrabbit.core.state.<A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html" title="class in org.apache.jackrabbit.core.state">LocalItemStateManager</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#factory">factory</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#sharedStateMgr">sharedStateMgr</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/state/XAItemStateManager.html#afterOperation(org.apache.jackrabbit.core.TransactionContext)">afterOperation</A></B>(<A HREF="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</A>&nbsp;tx)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Invoked after one of the <A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#prepare(org.apache.jackrabbit.core.TransactionContext)"><CODE>InternalXAResource.prepare(org.apache.jackrabbit.core.TransactionContext)</CODE></A>, <A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#commit(org.apache.jackrabbit.core.TransactionContext)"><CODE>InternalXAResource.commit(org.apache.jackrabbit.core.TransactionContext)</CODE></A> or
 <A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#rollback(org.apache.jackrabbit.core.TransactionContext)"><CODE>InternalXAResource.rollback(org.apache.jackrabbit.core.TransactionContext)</CODE></A> method has been called.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/state/XAItemStateManager.html#associate(org.apache.jackrabbit.core.TransactionContext)">associate</A></B>(<A HREF="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</A>&nbsp;tx)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Associate this resource with a transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/state/XAItemStateManager.html#beforeOperation(org.apache.jackrabbit.core.TransactionContext)">beforeOperation</A></B>(<A HREF="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</A>&nbsp;tx)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Invoked before one of the <A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#prepare(org.apache.jackrabbit.core.TransactionContext)"><CODE>InternalXAResource.prepare(org.apache.jackrabbit.core.TransactionContext)</CODE></A>, <A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#commit(org.apache.jackrabbit.core.TransactionContext)"><CODE>InternalXAResource.commit(org.apache.jackrabbit.core.TransactionContext)</CODE></A> or
 <A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#rollback(org.apache.jackrabbit.core.TransactionContext)"><CODE>InternalXAResource.rollback(org.apache.jackrabbit.core.TransactionContext)</CODE></A> method is called.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/state/XAItemStateManager.html#commit(org.apache.jackrabbit.core.TransactionContext)">commit</A></B>(<A HREF="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</A>&nbsp;tx)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Commit transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../../../../org/apache/jackrabbit/core/state/XAItemStateManager.html" title="class in org.apache.jackrabbit.core.state">XAItemStateManager</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/state/XAItemStateManager.html#createInstance(org.apache.jackrabbit.core.state.SharedItemStateManager, org.apache.jackrabbit.core.observation.EventStateCollectionFactory, java.lang.String, org.apache.jackrabbit.core.state.ItemStateCacheFactory)">createInstance</A></B>(<A HREF="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html" title="class in org.apache.jackrabbit.core.state">SharedItemStateManager</A>&nbsp;sharedStateMgr,
               <A HREF="../../../../../org/apache/jackrabbit/core/observation/EventStateCollectionFactory.html" title="interface in org.apache.jackrabbit.core.observation">EventStateCollectionFactory</A>&nbsp;factory,
               <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;attributeName,
               <A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateCacheFactory.html" title="interface in org.apache.jackrabbit.core.state">ItemStateCacheFactory</A>&nbsp;cacheFactory)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a new <code>XAItemStateManager</code> instance and registers it as an <A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state"><CODE>ItemStateListener</CODE></A>
 with the given <A HREF="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html" title="class in org.apache.jackrabbit.core.state"><CODE>SharedItemStateManager</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../org/apache/jackrabbit/core/state/ChangeLog.html" title="class in org.apache.jackrabbit.core.state">ChangeLog</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/state/XAItemStateManager.html#getChangeLog()">getChangeLog</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the current change log.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../../org/apache/jackrabbit/core/state/ChangeLog.html" title="class in org.apache.jackrabbit.core.state">ChangeLog</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/state/XAItemStateManager.html#getChanges()">getChanges</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the change log that contains the current changes in this local
 item state manager.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/state/XAItemStateManager.html#getItemState(org.apache.jackrabbit.core.ItemId)">getItemState</A></B>(<A HREF="../../../../../org/apache/jackrabbit/core/ItemId.html" title="class in org.apache.jackrabbit.core">ItemId</A>&nbsp;id)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return an item state, given its item id.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../org/apache/jackrabbit/core/state/NodeReferences.html" title="class in org.apache.jackrabbit.core.state">NodeReferences</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/state/XAItemStateManager.html#getNodeReferences(org.apache.jackrabbit.core.state.NodeReferencesId)">getNodeReferences</A></B>(<A HREF="../../../../../org/apache/jackrabbit/core/state/NodeReferencesId.html" title="class in org.apache.jackrabbit.core.state">NodeReferencesId</A>&nbsp;id)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return a node references object, given its target id</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/state/XAItemStateManager.html#hasItemState(org.apache.jackrabbit.core.ItemId)">hasItemState</A></B>(<A HREF="../../../../../org/apache/jackrabbit/core/ItemId.html" title="class in org.apache.jackrabbit.core">ItemId</A>&nbsp;id)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return a flag indicating whether an item state for a given
 item id exists.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/state/XAItemStateManager.html#hasNodeReferences(org.apache.jackrabbit.core.state.NodeReferencesId)">hasNodeReferences</A></B>(<A HREF="../../../../../org/apache/jackrabbit/core/state/NodeReferencesId.html" title="class in org.apache.jackrabbit.core.state">NodeReferencesId</A>&nbsp;id)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return a flag indicating whether a node references object
 for a given target id exists.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/state/XAItemStateManager.html#prepare(org.apache.jackrabbit.core.TransactionContext)">prepare</A></B>(<A HREF="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</A>&nbsp;tx)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Prepare transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/state/XAItemStateManager.html#rollback(org.apache.jackrabbit.core.TransactionContext)">rollback</A></B>(<A HREF="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</A>&nbsp;tx)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rollback transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/state/XAItemStateManager.html#setVirtualProvider(org.apache.jackrabbit.core.virtual.VirtualItemStateProvider)">setVirtualProvider</A></B>(<A HREF="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html" title="interface in org.apache.jackrabbit.core.virtual">VirtualItemStateProvider</A>&nbsp;virtualProvider)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set optional virtual item state provider.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/state/XAItemStateManager.html#stateModified(org.apache.jackrabbit.core.state.ItemState)">stateModified</A></B>(<A HREF="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</A>&nbsp;modified)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called when an <code>ItemState</code> has successfully
 been modified (i.e. its underlying persistent state has changed).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/state/XAItemStateManager.html#update(org.apache.jackrabbit.core.state.ChangeLog)">update</A></B>(<A HREF="../../../../../org/apache/jackrabbit/core/state/ChangeLog.html" title="class in org.apache.jackrabbit.core.state">ChangeLog</A>&nbsp;changeLog)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;End an update operation.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.apache.jackrabbit.core.state.LocalItemStateManager"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class org.apache.jackrabbit.core.state.<A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html" title="class in org.apache.jackrabbit.core.state">LocalItemStateManager</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#addListener(org.apache.jackrabbit.core.state.ItemStateListener)">addListener</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#cancel()">cancel</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#createInstance(org.apache.jackrabbit.core.state.SharedItemStateManager, org.apache.jackrabbit.core.observation.EventStateCollectionFactory, org.apache.jackrabbit.core.state.ItemStateCacheFactory)">createInstance</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#createNew(org.apache.jackrabbit.spi.Name, org.apache.jackrabbit.core.NodeId)">createNew</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#createNew(org.apache.jackrabbit.core.NodeId, org.apache.jackrabbit.spi.Name, org.apache.jackrabbit.core.NodeId)">createNew</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#destroy(org.apache.jackrabbit.core.state.ItemState)">destroy</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#dispose()">dispose</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#edit()">edit</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#getNodeState(org.apache.jackrabbit.core.NodeId)">getNodeState</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#getPropertyState(org.apache.jackrabbit.core.PropertyId)">getPropertyState</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#inEditMode()">inEditMode</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#nodeAdded(org.apache.jackrabbit.core.state.NodeState, org.apache.jackrabbit.spi.Name, int, org.apache.jackrabbit.core.NodeId)">nodeAdded</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#nodeModified(org.apache.jackrabbit.core.state.NodeState)">nodeModified</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#nodeRemoved(org.apache.jackrabbit.core.state.NodeState, org.apache.jackrabbit.spi.Name, int, org.apache.jackrabbit.core.NodeId)">nodeRemoved</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#nodesReplaced(org.apache.jackrabbit.core.state.NodeState)">nodesReplaced</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#removeListener(org.apache.jackrabbit.core.state.ItemStateListener)">removeListener</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#stateCreated(org.apache.jackrabbit.core.state.ItemState)">stateCreated</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#stateDestroyed(org.apache.jackrabbit.core.state.ItemState)">stateDestroyed</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#stateDiscarded(org.apache.jackrabbit.core.state.ItemState)">stateDiscarded</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#store(org.apache.jackrabbit.core.state.ItemState)">store</A>, <A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#update()">update</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</A>, <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</A>, <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="createInstance(org.apache.jackrabbit.core.state.SharedItemStateManager, org.apache.jackrabbit.core.observation.EventStateCollectionFactory, java.lang.String, org.apache.jackrabbit.core.state.ItemStateCacheFactory)"><!-- --></A><H3>
createInstance</H3>
<PRE>
public static <A HREF="../../../../../org/apache/jackrabbit/core/state/XAItemStateManager.html" title="class in org.apache.jackrabbit.core.state">XAItemStateManager</A> <B>createInstance</B>(<A HREF="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html" title="class in org.apache.jackrabbit.core.state">SharedItemStateManager</A>&nbsp;sharedStateMgr,
                                                <A HREF="../../../../../org/apache/jackrabbit/core/observation/EventStateCollectionFactory.html" title="interface in org.apache.jackrabbit.core.observation">EventStateCollectionFactory</A>&nbsp;factory,
                                                <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;attributeName,
                                                <A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateCacheFactory.html" title="interface in org.apache.jackrabbit.core.state">ItemStateCacheFactory</A>&nbsp;cacheFactory)</PRE>
<DL>
<DD>Creates a new <code>XAItemStateManager</code> instance and registers it as an <A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state"><CODE>ItemStateListener</CODE></A>
 with the given <A HREF="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html" title="class in org.apache.jackrabbit.core.state"><CODE>SharedItemStateManager</CODE></A>.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sharedStateMgr</CODE> - the <A HREF="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html" title="class in org.apache.jackrabbit.core.state"><CODE>SharedItemStateManager</CODE></A><DD><CODE>factory</CODE> - the <A HREF="../../../../../org/apache/jackrabbit/core/observation/EventStateCollectionFactory.html" title="interface in org.apache.jackrabbit.core.observation"><CODE>EventStateCollectionFactory</CODE></A><DD><CODE>attributeName</CODE> - the attribute name, if <code>null</code> then a default name is used<DD><CODE>cacheFactory</CODE> - the <A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateCacheFactory.html" title="interface in org.apache.jackrabbit.core.state"><CODE>ItemStateCacheFactory</CODE></A>
<DT><B>Returns:</B><DD>a new <code>XAItemStateManager</code> instance</DL>
</DD>
</DL>
<HR>

<A NAME="setVirtualProvider(org.apache.jackrabbit.core.virtual.VirtualItemStateProvider)"><!-- --></A><H3>
setVirtualProvider</H3>
<PRE>
public void <B>setVirtualProvider</B>(<A HREF="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html" title="interface in org.apache.jackrabbit.core.virtual">VirtualItemStateProvider</A>&nbsp;virtualProvider)</PRE>
<DL>
<DD>Set optional virtual item state provider.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="associate(org.apache.jackrabbit.core.TransactionContext)"><!-- --></A><H3>
associate</H3>
<PRE>
public void <B>associate</B>(<A HREF="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</A>&nbsp;tx)</PRE>
<DL>
<DD>Associate this resource with a transaction. All further operations on
 the object should be interpreted as part of this transaction and changes
 recorded in some attribute of the transaction context.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#associate(org.apache.jackrabbit.core.TransactionContext)">associate</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core">InternalXAResource</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tx</CODE> - transaction context, if <code>null</code> disassociate</DL>
</DD>
</DL>
<HR>

<A NAME="beforeOperation(org.apache.jackrabbit.core.TransactionContext)"><!-- --></A><H3>
beforeOperation</H3>
<PRE>
public void <B>beforeOperation</B>(<A HREF="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</A>&nbsp;tx)</PRE>
<DL>
<DD>Invoked before one of the <A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#prepare(org.apache.jackrabbit.core.TransactionContext)"><CODE>InternalXAResource.prepare(org.apache.jackrabbit.core.TransactionContext)</CODE></A>, <A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#commit(org.apache.jackrabbit.core.TransactionContext)"><CODE>InternalXAResource.commit(org.apache.jackrabbit.core.TransactionContext)</CODE></A> or
 <A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#rollback(org.apache.jackrabbit.core.TransactionContext)"><CODE>InternalXAResource.rollback(org.apache.jackrabbit.core.TransactionContext)</CODE></A> method is called.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#beforeOperation(org.apache.jackrabbit.core.TransactionContext)">beforeOperation</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core">InternalXAResource</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tx</CODE> - transaction context</DL>
</DD>
</DL>
<HR>

<A NAME="prepare(org.apache.jackrabbit.core.TransactionContext)"><!-- --></A><H3>
prepare</H3>
<PRE>
public void <B>prepare</B>(<A HREF="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</A>&nbsp;tx)
             throws <A HREF="../../../../../org/apache/jackrabbit/core/TransactionException.html" title="class in org.apache.jackrabbit.core">TransactionException</A></PRE>
<DL>
<DD>Prepare transaction. The transaction is identified by a transaction
 context.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#prepare(org.apache.jackrabbit.core.TransactionContext)">prepare</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core">InternalXAResource</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tx</CODE> - transaction context
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/TransactionException.html" title="class in org.apache.jackrabbit.core">TransactionException</A></CODE> - if an error occurs</DL>
</DD>
</DL>
<HR>

<A NAME="commit(org.apache.jackrabbit.core.TransactionContext)"><!-- --></A><H3>
commit</H3>
<PRE>
public void <B>commit</B>(<A HREF="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</A>&nbsp;tx)
            throws <A HREF="../../../../../org/apache/jackrabbit/core/TransactionException.html" title="class in org.apache.jackrabbit.core">TransactionException</A></PRE>
<DL>
<DD>Commit transaction. The transaction is identified by a transaction
 context. If the method throws, other resources get their changes
 rolled back.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#commit(org.apache.jackrabbit.core.TransactionContext)">commit</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core">InternalXAResource</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tx</CODE> - transaction context
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/TransactionException.html" title="class in org.apache.jackrabbit.core">TransactionException</A></CODE> - if an error occurs</DL>
</DD>
</DL>
<HR>

<A NAME="rollback(org.apache.jackrabbit.core.TransactionContext)"><!-- --></A><H3>
rollback</H3>
<PRE>
public void <B>rollback</B>(<A HREF="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</A>&nbsp;tx)</PRE>
<DL>
<DD>Rollback transaction. The transaction is identified by a transaction
 context.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#rollback(org.apache.jackrabbit.core.TransactionContext)">rollback</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core">InternalXAResource</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tx</CODE> - transaction context.</DL>
</DD>
</DL>
<HR>

<A NAME="afterOperation(org.apache.jackrabbit.core.TransactionContext)"><!-- --></A><H3>
afterOperation</H3>
<PRE>
public void <B>afterOperation</B>(<A HREF="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</A>&nbsp;tx)</PRE>
<DL>
<DD>Invoked after one of the <A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#prepare(org.apache.jackrabbit.core.TransactionContext)"><CODE>InternalXAResource.prepare(org.apache.jackrabbit.core.TransactionContext)</CODE></A>, <A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#commit(org.apache.jackrabbit.core.TransactionContext)"><CODE>InternalXAResource.commit(org.apache.jackrabbit.core.TransactionContext)</CODE></A> or
 <A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#rollback(org.apache.jackrabbit.core.TransactionContext)"><CODE>InternalXAResource.rollback(org.apache.jackrabbit.core.TransactionContext)</CODE></A> method has been called.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#afterOperation(org.apache.jackrabbit.core.TransactionContext)">afterOperation</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core">InternalXAResource</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tx</CODE> - transaction context</DL>
</DD>
</DL>
<HR>

<A NAME="getChangeLog()"><!-- --></A><H3>
getChangeLog</H3>
<PRE>
public <A HREF="../../../../../org/apache/jackrabbit/core/state/ChangeLog.html" title="class in org.apache.jackrabbit.core.state">ChangeLog</A> <B>getChangeLog</B>()</PRE>
<DL>
<DD>Returns the current change log. First tries thread-local change log,
 then instance-local change log. Returns <code>null</code> if no
 change log was found.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getChanges()"><!-- --></A><H3>
getChanges</H3>
<PRE>
protected <A HREF="../../../../../org/apache/jackrabbit/core/state/ChangeLog.html" title="class in org.apache.jackrabbit.core.state">ChangeLog</A> <B>getChanges</B>()</PRE>
<DL>
<DD><B>Description copied from class: <CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#getChanges()">LocalItemStateManager</A></CODE></B></DD>
<DD>Returns the change log that contains the current changes in this local
 item state manager.
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#getChanges()">getChanges</A></CODE> in class <CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html" title="class in org.apache.jackrabbit.core.state">LocalItemStateManager</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>the change log with the current changes.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</A></CODE> - always.</DL>
</DD>
</DL>
<HR>

<A NAME="getItemState(org.apache.jackrabbit.core.ItemId)"><!-- --></A><H3>
getItemState</H3>
<PRE>
public <A HREF="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</A> <B>getItemState</B>(<A HREF="../../../../../org/apache/jackrabbit/core/ItemId.html" title="class in org.apache.jackrabbit.core">ItemId</A>&nbsp;id)
                       throws <A HREF="../../../../../org/apache/jackrabbit/core/state/NoSuchItemStateException.html" title="class in org.apache.jackrabbit.core.state">NoSuchItemStateException</A>,
                              <A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</A></PRE>
<DL>
<DD>Return an item state, given its item id.
 <p/>
 If this state manager is committing changes, this method first checks
 the commitLog ThreadLocal. Else if associated to a transaction check
 the transactional change log. Fallback is always the call to the base
 class.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html#getItemState(org.apache.jackrabbit.core.ItemId)">getItemState</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html" title="interface in org.apache.jackrabbit.core.state">ItemStateManager</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#getItemState(org.apache.jackrabbit.core.ItemId)">getItemState</A></CODE> in class <CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html" title="class in org.apache.jackrabbit.core.state">LocalItemStateManager</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>id</CODE> - item id
<DT><B>Returns:</B><DD>item state
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/NoSuchItemStateException.html" title="class in org.apache.jackrabbit.core.state">NoSuchItemStateException</A></CODE> - if the item does not exist
<DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</A></CODE> - if an error occurs</DL>
</DD>
</DL>
<HR>

<A NAME="hasItemState(org.apache.jackrabbit.core.ItemId)"><!-- --></A><H3>
hasItemState</H3>
<PRE>
public boolean <B>hasItemState</B>(<A HREF="../../../../../org/apache/jackrabbit/core/ItemId.html" title="class in org.apache.jackrabbit.core">ItemId</A>&nbsp;id)</PRE>
<DL>
<DD>Return a flag indicating whether an item state for a given
 item id exists.
 <p/>
 If this state manager is committing changes, this method first checks
 the commitLog ThreadLocal. Else if associated to a transaction check
 the transactional change log. Fallback is always the call to the base
 class.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html#hasItemState(org.apache.jackrabbit.core.ItemId)">hasItemState</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html" title="interface in org.apache.jackrabbit.core.state">ItemStateManager</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#hasItemState(org.apache.jackrabbit.core.ItemId)">hasItemState</A></CODE> in class <CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html" title="class in org.apache.jackrabbit.core.state">LocalItemStateManager</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>id</CODE> - item id
<DT><B>Returns:</B><DD><code>true</code> if an item state exists,
         otherwise <code>false</code></DL>
</DD>
</DL>
<HR>

<A NAME="getNodeReferences(org.apache.jackrabbit.core.state.NodeReferencesId)"><!-- --></A><H3>
getNodeReferences</H3>
<PRE>
public <A HREF="../../../../../org/apache/jackrabbit/core/state/NodeReferences.html" title="class in org.apache.jackrabbit.core.state">NodeReferences</A> <B>getNodeReferences</B>(<A HREF="../../../../../org/apache/jackrabbit/core/state/NodeReferencesId.html" title="class in org.apache.jackrabbit.core.state">NodeReferencesId</A>&nbsp;id)
                                 throws <A HREF="../../../../../org/apache/jackrabbit/core/state/NoSuchItemStateException.html" title="class in org.apache.jackrabbit.core.state">NoSuchItemStateException</A>,
                                        <A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</A></PRE>
<DL>
<DD>Return a node references object, given its target id
 <p/>
 If this state manager is committing changes, this method first
 checks the commitLog ThreadLocal. Else if associated to a transaction
 check the transactional change log. Fallback is always the call to
 the base class.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html#getNodeReferences(org.apache.jackrabbit.core.state.NodeReferencesId)">getNodeReferences</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html" title="interface in org.apache.jackrabbit.core.state">ItemStateManager</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#getNodeReferences(org.apache.jackrabbit.core.state.NodeReferencesId)">getNodeReferences</A></CODE> in class <CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html" title="class in org.apache.jackrabbit.core.state">LocalItemStateManager</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>id</CODE> - target id
<DT><B>Returns:</B><DD>node references object
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/NoSuchItemStateException.html" title="class in org.apache.jackrabbit.core.state">NoSuchItemStateException</A></CODE> - if the item does not exist
<DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</A></CODE> - if an error occurs</DL>
</DD>
</DL>
<HR>

<A NAME="hasNodeReferences(org.apache.jackrabbit.core.state.NodeReferencesId)"><!-- --></A><H3>
hasNodeReferences</H3>
<PRE>
public boolean <B>hasNodeReferences</B>(<A HREF="../../../../../org/apache/jackrabbit/core/state/NodeReferencesId.html" title="class in org.apache.jackrabbit.core.state">NodeReferencesId</A>&nbsp;id)</PRE>
<DL>
<DD>Return a flag indicating whether a node references object
 for a given target id exists.
 <p/>
 If this state manager is committing changes, this method first
 checks the commitLog ThreadLocal. Else if associated to a transaction
 check the transactional change log. Fallback is always the call to
 the base class.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html#hasNodeReferences(org.apache.jackrabbit.core.state.NodeReferencesId)">hasNodeReferences</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html" title="interface in org.apache.jackrabbit.core.state">ItemStateManager</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#hasNodeReferences(org.apache.jackrabbit.core.state.NodeReferencesId)">hasNodeReferences</A></CODE> in class <CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html" title="class in org.apache.jackrabbit.core.state">LocalItemStateManager</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>id</CODE> - target id
<DT><B>Returns:</B><DD><code>true</code> if a node reference object exists for the given
         id, otherwise <code>false</code>.</DL>
</DD>
</DL>
<HR>

<A NAME="update(org.apache.jackrabbit.core.state.ChangeLog)"><!-- --></A><H3>
update</H3>
<PRE>
protected void <B>update</B>(<A HREF="../../../../../org/apache/jackrabbit/core/state/ChangeLog.html" title="class in org.apache.jackrabbit.core.state">ChangeLog</A>&nbsp;changeLog)
               throws <A HREF="http://www.day.com/maven/jsr170/javadocs/jcr-1.0/javax/jcr/ReferentialIntegrityException.html?is-external=true" title="class or interface in javax.jcr">ReferentialIntegrityException</A>,
                      <A HREF="../../../../../org/apache/jackrabbit/core/state/StaleItemStateException.html" title="class in org.apache.jackrabbit.core.state">StaleItemStateException</A>,
                      <A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</A></PRE>
<DL>
<DD>End an update operation. Fetch the states and references from
 the parent (shared) item manager, reconnect them to the items
 collected in our (local) change log and overwrite the shared
 items with our copies.
 <p/>
 If associated with a transaction, simply merge the changes given to
 the ones already known (removing items that were first added and
 then again deleted).
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#update(org.apache.jackrabbit.core.state.ChangeLog)">update</A></CODE> in class <CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html" title="class in org.apache.jackrabbit.core.state">LocalItemStateManager</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>changeLog</CODE> - change log containing local states and references
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://www.day.com/maven/jsr170/javadocs/jcr-1.0/javax/jcr/ReferentialIntegrityException.html?is-external=true" title="class or interface in javax.jcr">ReferentialIntegrityException</A></CODE> - if a new or modified REFERENCE
                                       property refers to a non-existent
                                       target or if a removed node is still
                                       being referenced
<DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/StaleItemStateException.html" title="class in org.apache.jackrabbit.core.state">StaleItemStateException</A></CODE> - if at least one of the affected item
                                       states has become stale in the meantime
<DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</A></CODE> - if an error occurs</DL>
</DD>
</DL>
<HR>

<A NAME="stateModified(org.apache.jackrabbit.core.state.ItemState)"><!-- --></A><H3>
stateModified</H3>
<PRE>
public void <B>stateModified</B>(<A HREF="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</A>&nbsp;modified)</PRE>
<DL>
<DD>Called when an <code>ItemState</code> has successfully
 been modified (i.e. its underlying persistent state has changed).
 <p/>
 Notification handler gets called for both local states that this state manager
 has created, as well as states that were created by the shared state manager
 we're listening to.

 Check whether the shared state modified is contained in our transactional
 log: in that case, update its state as well, as it might get reused
 in a subsequent transaction (see JCR-1554).
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html#stateModified(org.apache.jackrabbit.core.state.ItemState)">stateModified</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html#stateModified(org.apache.jackrabbit.core.state.ItemState)">stateModified</A></CODE> in class <CODE><A HREF="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html" title="class in org.apache.jackrabbit.core.state">LocalItemStateManager</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>modified</CODE> - the <code>ItemState</code> that has been 'modified'</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/XAItemStateManager.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../org/apache/jackrabbit/core/state/UpdatableItemStateManager.html" title="interface in org.apache.jackrabbit.core.state"><B>PREV CLASS</B></A>&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?org/apache/jackrabbit/core/state/XAItemStateManager.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="XAItemStateManager.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#fields_inherited_from_class_org.apache.jackrabbit.core.state.LocalItemStateManager">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2004-2009 <a href="http://www.apache.org/">The Apache Software Foundation</a>. All Rights Reserved.
</BODY>
</HTML>
