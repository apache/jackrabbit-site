<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_02) on Tue Feb 21 16:02:11 CET 2012 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>org.apache.jackrabbit.rmi.observation (Apache Jackrabbit 2.4.0 API)</title>
<meta name="date" content="2012-02-21">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="org.apache.jackrabbit.rmi.observation (Apache Jackrabbit 2.4.0 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/jackrabbit/rmi/jackrabbit/package-summary.html">Prev Package</a></li>
<li><a href="../../../../../org/apache/jackrabbit/rmi/remote/package-summary.html">Next Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/jackrabbit/rmi/observation/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;org.apache.jackrabbit.rmi.observation</h1>
<div class="docSummary">
<div class="block">
Helper class used by the observation manager classes.</div>
</div>
<p>See:&nbsp;<a href="#package_description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../org/apache/jackrabbit/rmi/observation/ClientEventPoll.html" title="class in org.apache.jackrabbit.rmi.observation">ClientEventPoll</a></td>
<td class="colLast">
<div class="block">The <code>ClientEventPoll</code> class is the registry for client-side
 event listeners on behalf of the
 <a href="../../../../../org/apache/jackrabbit/rmi/client/ClientObservationManager.html" title="class in org.apache.jackrabbit.rmi.client"><code>ClientObservationManager</code></a> class.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../org/apache/jackrabbit/rmi/observation/Queue.html" title="class in org.apache.jackrabbit.rmi.observation">Queue</a></td>
<td class="colLast">
<div class="block">The <code>Queue</code> class is a very simple queue assuming that there is
 at least one consumer and potentially multiple producers.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../org/apache/jackrabbit/rmi/observation/ServerEventListenerProxy.html" title="class in org.apache.jackrabbit.rmi.observation">ServerEventListenerProxy</a></td>
<td class="colLast">
<div class="block">The <code>ServerEventListenerProxy</code> class is the server-side event
 listener proxy registered on behalf of a client-side event listener identified
 with the unique identifier.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package_description">
<!--   -->
</a>
<h2 title="Package org.apache.jackrabbit.rmi.observation Description">Package org.apache.jackrabbit.rmi.observation Description</h2>
<div class="block"><p>
Helper class used by the observation manager classes.
</p>

<p>
The JCR observation framework defines a notification mechanism where an
<code>EventListener</code> is registered with the observation manager
to receive certain events during the lifetime of the registration. For
the remote case, where the repository and the application run in different
Java VMs on possibly different hosts, there are issues related to the
observation framework.

<p>
The listener mechanism is a call-back mechanism where the server calls
code in the client application. The client application code most probably
hooks into other parts of that application. Therefore it is not practically
feasible to just require the client listener to be serializable to be sent
to the server for several reasons:

<ul>
<li>The RMI server cannot call any method on the RMI client. To support such
call-back situations, the client side application would have to register
another server, which the server side would have to call.
<li>When trying to "transfer" the listener to the server side, the listener
class would have to be available to the server side - either locally in the
class path or through RMI class loading mechanisms.
<ul>

<p>
To circumvent these issues and still be able to register event listeners,
support for observation events is implemented in a manner similar to the Java
Management Extensions Remote API 1.0 (JSR 160) as laid out in Chapter 2.4,
Adding Remote Listeners:

<p>
The ObservationManager interface is not implemented in the RMI layer like
other interfaces, which just forward calls to the API to the corresponding
remote object by means of the RMI framework. Instead the client-side
ObservationManager manages its own list of registered event listeners. Each
listener registered with an ObservationManager is assigned a unique
identifier.

<p>
The unique identifier along with the filter configuration (event type, 
path, depth flag, uuid list, node type list, local flag) is sent to the
server-side remote observation manager. This latter instantiates a proxy
event listener representing the client side event listener contains the
unique identifier as a ilnk to the client side event listener. The proxy
event listener is the registered to the repository's ObservationManager
with the configuration received from the client side.

<p>
When an event arrives at the event listener proxy, the proxy creates a
new RemoteEvent instance, which contains the client-side event listener
identifier along with the Event objects from the EventIterator. This
RemoteEvent instance is added to a server-side queue, which may be
retrieved from the client-side.

<p>
The client-side ObservationManager has a helper class ClientEventPoll,
which works in the background asking the server for the RemoteEvents from
the event queue. Each such event is then dispatched to the client-side
event listener by calling the EventListener.onEvent() method.</div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/jackrabbit/rmi/jackrabbit/package-summary.html">Prev Package</a></li>
<li><a href="../../../../../org/apache/jackrabbit/rmi/remote/package-summary.html">Next Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/jackrabbit/rmi/observation/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2004-2012 <a href="http://www.apache.org/">The Apache Software Foundation</a>. All Rights Reserved.</small></p>
</body>
</html>
