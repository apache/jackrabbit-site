<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_02) on Tue Feb 21 16:02:04 CET 2012 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>FileDataStore (Apache Jackrabbit 2.4.0 API)</title>
<meta name="date" content="2012-02-21">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="FileDataStore (Apache Jackrabbit 2.4.0 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FileDataStore.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/jackrabbit/core/data/FileDataRecord.html" title="class in org.apache.jackrabbit.core.data"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/jackrabbit/core/data/GarbageCollector.html" title="class in org.apache.jackrabbit.core.data"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/jackrabbit/core/data/FileDataStore.html" target="_top">Frames</a></li>
<li><a href="FileDataStore.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.jackrabbit.core.data</div>
<h2 title="Class FileDataStore" class="title">Class FileDataStore</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.jackrabbit.core.data.FileDataStore</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">FileDataStore</span>
extends <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></pre>
<div class="block">Simple file-based data store. Data records are stored as normal files
 named using a message digest of the contained binary stream.

 Configuration:
 <pre>
 &lt;DataStore class="org.apache.jackrabbit.core.data.FileDataStore">
     &lt;param name="<a href="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#setPath(java.lang.String)"><code>path</code></a>" value="/data/datastore"/>
     &lt;param name="<a href="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#setMinRecordLength(int)"><code>minRecordLength</code></a>" value="1024"/>
 &lt/DataStore>
 </pre>
 <p>
 If the directory is not set, the directory &lt;repository home&gt;/repository/datastore is used.
 <p>
 A three level directory structure is used to avoid placing too many
 files in a single directory. The chosen structure is designed to scale
 up to billions of distinct records.
 <p>
 This implementation relies on the underlying file system to support
 atomic O(1) move operations with <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/File.html?is-external=true#renameTo(java.io.File)" title="class or interface in java.io"><code>File.renameTo(File)</code></a>.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../org/apache/jackrabbit/core/data/DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</a>,<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="class or interface in java.lang.ref">WeakReference</a>&lt;<a href="../../../../../org/apache/jackrabbit/core/data/DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</a>&gt;&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#inUse">inUse</a></strong></code>
<div class="block">All data identifiers that are currently in use are in this set until they are garbage collected.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#FileDataStore()">FileDataStore</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/data/DataRecord.html" title="interface in org.apache.jackrabbit.core.data">DataRecord</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#addRecord(java.io.InputStream)">addRecord</a></strong>(<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</a>&nbsp;input)</code>
<div class="block">Creates a new data record.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#clearInUse()">clearInUse</a></strong>()</code>
<div class="block">Clear the in-use list.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#close()">close</a></strong>()</code>
<div class="block">Close the data store</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#deleteAllOlderThan(long)">deleteAllOlderThan</a></strong>(long&nbsp;min)</code>
<div class="block">Delete objects that have a modified date older than the specified date.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</a>&lt;<a href="../../../../../org/apache/jackrabbit/core/data/DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#getAllIdentifiers()">getAllIdentifiers</a></strong>()</code>
<div class="block">Get all identifiers.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#getMinRecordLength()">getMinRecordLength</a></strong>()</code>
<div class="block">Get the minimum size of an object that should be stored in this data store.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#getPath()">getPath</a></strong>()</code>
<div class="block">Get the name of the directory where this data store keeps the files.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/data/DataRecord.html" title="interface in org.apache.jackrabbit.core.data">DataRecord</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#getRecord(org.apache.jackrabbit.core.data.DataIdentifier)">getRecord</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/data/DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</a>&nbsp;identifier)</code>
<div class="block">Returns the record with the given identifier.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/data/DataRecord.html" title="interface in org.apache.jackrabbit.core.data">DataRecord</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#getRecordIfStored(org.apache.jackrabbit.core.data.DataIdentifier)">getRecordIfStored</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/data/DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</a>&nbsp;identifier)</code>
<div class="block">Check if a record for the given identifier exists, and return it if yes.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#init(java.lang.String)">init</a></strong>(<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;homeDir)</code>
<div class="block">Initialized the data store.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#setMinRecordLength(int)">setMinRecordLength</a></strong>(int&nbsp;minRecordLength)</code>
<div class="block">Set the minimum object length.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#setPath(java.lang.String)">setPath</a></strong>(<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;directoryName)</code>
<div class="block">Set the name of the directory where this data store keeps the files.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#updateModifiedDateOnAccess(long)">updateModifiedDateOnAccess</a></strong>(long&nbsp;before)</code>
<div class="block">From now on, update the modified date of an object even when accessing it.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="inUse">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>inUse</h4>
<pre>protected&nbsp;<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../org/apache/jackrabbit/core/data/DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</a>,<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="class or interface in java.lang.ref">WeakReference</a>&lt;<a href="../../../../../org/apache/jackrabbit/core/data/DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</a>&gt;&gt; inUse</pre>
<div class="block">All data identifiers that are currently in use are in this set until they are garbage collected.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="FileDataStore()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FileDataStore</h4>
<pre>public&nbsp;FileDataStore()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="init(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre>public&nbsp;void&nbsp;init(<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;homeDir)</pre>
<div class="block">Initialized the data store.
 If the path is not set, &lt;repository home&gt;/repository/datastore is used.
 This directory is automatically created if it does not yet exist.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html#init(java.lang.String)">init</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>homeDir</code> - </dd></dl>
</li>
</ul>
<a name="getRecordIfStored(org.apache.jackrabbit.core.data.DataIdentifier)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRecordIfStored</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/data/DataRecord.html" title="interface in org.apache.jackrabbit.core.data">DataRecord</a>&nbsp;getRecordIfStored(<a href="../../../../../org/apache/jackrabbit/core/data/DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</a>&nbsp;identifier)
                             throws <a href="../../../../../org/apache/jackrabbit/core/data/DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html#getRecordIfStored(org.apache.jackrabbit.core.data.DataIdentifier)">DataStore</a></code></strong></div>
<div class="block">Check if a record for the given identifier exists, and return it if yes.
 If no record exists, this method returns null.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html#getRecordIfStored(org.apache.jackrabbit.core.data.DataIdentifier)">getRecordIfStored</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>identifier</code> - data identifier</dd>
<dt><span class="strong">Returns:</span></dt><dd>the record if found, and null if not</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/data/DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</a></code></dd></dl>
</li>
</ul>
<a name="getRecord(org.apache.jackrabbit.core.data.DataIdentifier)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRecord</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/data/DataRecord.html" title="interface in org.apache.jackrabbit.core.data">DataRecord</a>&nbsp;getRecord(<a href="../../../../../org/apache/jackrabbit/core/data/DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</a>&nbsp;identifier)
                     throws <a href="../../../../../org/apache/jackrabbit/core/data/DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</a></pre>
<div class="block">Returns the record with the given identifier. Note that this method
 performs no sanity checks on the given identifier. It is up to the
 caller to ensure that only identifiers of previously created data
 records are used.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html#getRecord(org.apache.jackrabbit.core.data.DataIdentifier)">getRecord</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>identifier</code> - data identifier</dd>
<dt><span class="strong">Returns:</span></dt><dd>identified data record</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/data/DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</a></code> - if the data store could not be accessed,
                     or if the given identifier is invalid</dd></dl>
</li>
</ul>
<a name="addRecord(java.io.InputStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addRecord</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/data/DataRecord.html" title="interface in org.apache.jackrabbit.core.data">DataRecord</a>&nbsp;addRecord(<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</a>&nbsp;input)
                     throws <a href="../../../../../org/apache/jackrabbit/core/data/DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</a></pre>
<div class="block">Creates a new data record.
 The stream is first consumed and the contents are saved in a temporary file
 and the SHA-1 message digest of the stream is calculated. If a
 record with the same SHA-1 digest (and length) is found then it is
 returned. Otherwise the temporary file is moved in place to become
 the new data record that gets returned.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html#addRecord(java.io.InputStream)">addRecord</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>input</code> - binary stream</dd>
<dt><span class="strong">Returns:</span></dt><dd>data record that contains the given stream</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/data/DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</a></code> - if the record could not be created</dd></dl>
</li>
</ul>
<a name="updateModifiedDateOnAccess(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateModifiedDateOnAccess</h4>
<pre>public&nbsp;void&nbsp;updateModifiedDateOnAccess(long&nbsp;before)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html#updateModifiedDateOnAccess(long)">DataStore</a></code></strong></div>
<div class="block">From now on, update the modified date of an object even when accessing it.
 Usually, the modified date is only updated when creating a new object,
 or when a new link is added to an existing object. When this setting is enabled,
 even getLength() will update the modified date.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html#updateModifiedDateOnAccess(long)">updateModifiedDateOnAccess</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>before</code> - - update the modified date to the current time if it is older than this value</dd></dl>
</li>
</ul>
<a name="deleteAllOlderThan(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteAllOlderThan</h4>
<pre>public&nbsp;int&nbsp;deleteAllOlderThan(long&nbsp;min)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html#deleteAllOlderThan(long)">DataStore</a></code></strong></div>
<div class="block">Delete objects that have a modified date older than the specified date.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html#deleteAllOlderThan(long)">deleteAllOlderThan</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>min</code> - the minimum time</dd>
<dt><span class="strong">Returns:</span></dt><dd>the number of data records deleted</dd></dl>
</li>
</ul>
<a name="getAllIdentifiers()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllIdentifiers</h4>
<pre>public&nbsp;<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</a>&lt;<a href="../../../../../org/apache/jackrabbit/core/data/DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</a>&gt;&nbsp;getAllIdentifiers()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html#getAllIdentifiers()">DataStore</a></code></strong></div>
<div class="block">Get all identifiers.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html#getAllIdentifiers()">getAllIdentifiers</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>an iterator over all DataIdentifier objects</dd></dl>
</li>
</ul>
<a name="clearInUse()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearInUse</h4>
<pre>public&nbsp;void&nbsp;clearInUse()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html#clearInUse()">DataStore</a></code></strong></div>
<div class="block">Clear the in-use list. This is only used for testing to make the the garbage collection
 think that objects are no longer in use.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html#clearInUse()">clearInUse</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
</dl>
</li>
</ul>
<a name="getPath()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPath</h4>
<pre>public&nbsp;<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getPath()</pre>
<div class="block">Get the name of the directory where this data store keeps the files.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the full path name</dd></dl>
</li>
</ul>
<a name="setPath(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPath</h4>
<pre>public&nbsp;void&nbsp;setPath(<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;directoryName)</pre>
<div class="block">Set the name of the directory where this data store keeps the files.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>directoryName</code> - the path name</dd></dl>
</li>
</ul>
<a name="getMinRecordLength()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMinRecordLength</h4>
<pre>public&nbsp;int&nbsp;getMinRecordLength()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html#getMinRecordLength()">DataStore</a></code></strong></div>
<div class="block">Get the minimum size of an object that should be stored in this data store.
 Depending on the overhead and configuration, each store may return a different value.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html#getMinRecordLength()">getMinRecordLength</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the minimum size in bytes</dd></dl>
</li>
</ul>
<a name="setMinRecordLength(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMinRecordLength</h4>
<pre>public&nbsp;void&nbsp;setMinRecordLength(int&nbsp;minRecordLength)</pre>
<div class="block">Set the minimum object length.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>minRecordLength</code> - the length</dd></dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html#close()">DataStore</a></code></strong></div>
<div class="block">Close the data store</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FileDataStore.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/jackrabbit/core/data/FileDataRecord.html" title="class in org.apache.jackrabbit.core.data"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/jackrabbit/core/data/GarbageCollector.html" title="class in org.apache.jackrabbit.core.data"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/jackrabbit/core/data/FileDataStore.html" target="_top">Frames</a></li>
<li><a href="FileDataStore.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2004-2012 <a href="http://www.apache.org/">The Apache Software Foundation</a>. All Rights Reserved.</small></p>
</body>
</html>
