<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_02) on Tue Feb 21 16:02:04 CET 2012 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>InternalXAVersionManager (Apache Jackrabbit 2.4.0 API)</title>
<meta name="date" content="2012-02-21">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="InternalXAVersionManager (Apache Jackrabbit 2.4.0 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/InternalXAVersionManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.DynamicESCFactory.html" title="class in org.apache.jackrabbit.core.version"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/jackrabbit/core/version/LabelVersionSelector.html" title="class in org.apache.jackrabbit.core.version"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/jackrabbit/core/version/InternalXAVersionManager.html" target="_top">Frames</a></li>
<li><a href="InternalXAVersionManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.jackrabbit.core.version</div>
<h2 title="Class InternalXAVersionManager" class="title">Class InternalXAVersionManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.jackrabbit.core.version.InternalXAVersionManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core">InternalXAResource</a>, <a href="../../../../../org/apache/jackrabbit/core/observation/EventStateCollectionFactory.html" title="interface in org.apache.jackrabbit.core.observation">EventStateCollectionFactory</a>, <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html" title="interface in org.apache.jackrabbit.core.state">ItemStateManager</a>, <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a>, <a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html" title="interface in org.apache.jackrabbit.core.virtual">VirtualItemStateProvider</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">InternalXAVersionManager</span>
extends <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../../org/apache/jackrabbit/core/observation/EventStateCollectionFactory.html" title="interface in org.apache.jackrabbit.core.observation">EventStateCollectionFactory</a>, <a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html" title="interface in org.apache.jackrabbit.core.virtual">VirtualItemStateProvider</a>, <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core">InternalXAResource</a></pre>
<div class="block">Implementation of a <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version"><code>InternalVersionManager</code></a> that works in an XA environment.
 Works as a filter between a version manager client and the global version
 manager.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#activitiesId">activitiesId</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#historiesId">historiesId</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/nodetype/NodeTypeRegistry.html" title="class in org.apache.jackrabbit.core.nodetype">NodeTypeRegistry</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#ntReg">ntReg</a></strong></code>
<div class="block">Node type registry.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html" title="class in org.apache.jackrabbit.core.state">LocalItemStateManager</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#stateMgr">stateMgr</a></strong></code>
<div class="block">State manager for the version storage.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#InternalXAVersionManager(org.apache.jackrabbit.core.version.InternalVersionManagerImpl, org.apache.jackrabbit.core.nodetype.NodeTypeRegistry, org.apache.jackrabbit.core.SessionImpl, org.apache.jackrabbit.core.state.ItemStateCacheFactory)">InternalXAVersionManager</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html" title="class in org.apache.jackrabbit.core.version">InternalVersionManagerImpl</a>&nbsp;vMgr,
                        <a href="../../../../../org/apache/jackrabbit/core/nodetype/NodeTypeRegistry.html" title="class in org.apache.jackrabbit.core.nodetype">NodeTypeRegistry</a>&nbsp;ntReg,
                        <a href="../../../../../org/apache/jackrabbit/core/SessionImpl.html" title="class in org.apache.jackrabbit.core">SessionImpl</a>&nbsp;session,
                        <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateCacheFactory.html" title="interface in org.apache.jackrabbit.core.state">ItemStateCacheFactory</a>&nbsp;cacheFactory)</code>
<div class="block">Creates a new instance of this class.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/VersioningLock.ReadLock.html" title="class in org.apache.jackrabbit.core.version">VersioningLock.ReadLock</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#acquireReadLock()">acquireReadLock</a></strong>()</code>
<div class="block">acquires the read lock on this version manager.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/version/VersioningLock.WriteLock.html" title="class in org.apache.jackrabbit.core.version">VersioningLock.WriteLock</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#acquireWriteLock()">acquireWriteLock</a></strong>()</code>
<div class="block">Acquires the write lock on this version manager.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#addListener(org.apache.jackrabbit.core.state.ItemStateListener)">addListener</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</a>&nbsp;listener)</code>
<div class="block">Add an <code>ItemStateListener</code></div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#afterOperation(org.apache.jackrabbit.core.TransactionContext)">afterOperation</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</a>&nbsp;tx)</code>
<div class="block">Invoked after one of the <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#prepare(org.apache.jackrabbit.core.TransactionContext)"><code>InternalXAResource.prepare(org.apache.jackrabbit.core.TransactionContext)</code></a>, <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#commit(org.apache.jackrabbit.core.TransactionContext)"><code>InternalXAResource.commit(org.apache.jackrabbit.core.TransactionContext)</code></a> or
 <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#rollback(org.apache.jackrabbit.core.TransactionContext)"><code>InternalXAResource.rollback(org.apache.jackrabbit.core.TransactionContext)</code></a> method has been called.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#associate(org.apache.jackrabbit.core.TransactionContext)">associate</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</a>&nbsp;tx)</code>
<div class="block">Associate this resource with a transaction.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#beforeOperation(org.apache.jackrabbit.core.TransactionContext)">beforeOperation</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</a>&nbsp;tx)</code>
<div class="block">Invoked before one of the <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#prepare(org.apache.jackrabbit.core.TransactionContext)"><code>InternalXAResource.prepare(org.apache.jackrabbit.core.TransactionContext)</code></a>, <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#commit(org.apache.jackrabbit.core.TransactionContext)"><code>InternalXAResource.commit(org.apache.jackrabbit.core.TransactionContext)</code></a> or
 <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#rollback(org.apache.jackrabbit.core.TransactionContext)"><code>InternalXAResource.rollback(org.apache.jackrabbit.core.TransactionContext)</code></a> method is called.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#calculateCheckinVersionName(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl, org.apache.jackrabbit.core.version.NodeStateEx, boolean)">calculateCheckinVersionName</a></strong>(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl&nbsp;history,
                           <a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;node,
                           boolean&nbsp;simple)</code>
<div class="block">Calculates the name of the new version that will be created by a
 checkin call.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#canCheckout(org.apache.jackrabbit.core.version.NodeStateEx, org.apache.jackrabbit.core.id.NodeId)">canCheckout</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;state,
           <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;activityId)</code>
<div class="block">invokes the checkout() on the persistent version manager.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#checkin(org.apache.jackrabbit.core.version.NodeStateEx, java.util.Calendar)">checkin</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;node,
       <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html?is-external=true" title="class or interface in java.util">Calendar</a>&nbsp;created)</code>
<div class="block">Creates a new version of the given node using the given version
 creation time.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#checkin(javax.jcr.Session, org.apache.jackrabbit.core.version.NodeStateEx, java.util.Calendar)">checkin</a></strong>(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
       <a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;node,
       <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html?is-external=true" title="class or interface in java.util">Calendar</a>&nbsp;created)</code>
<div class="block">invokes the checkin() on the persistent version manager and remaps the
 newly created version objects.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#close()">close</a></strong>()</code>
<div class="block">Close this version manager.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#commit(org.apache.jackrabbit.core.TransactionContext)">commit</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</a>&nbsp;tx)</code>
<div class="block">Commit transaction.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#createActivity(javax.jcr.Session, java.lang.String)">createActivity</a></strong>(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
              <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;title)</code>
<div class="block">Creates a new activity</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/observation/EventStateCollection.html" title="class in org.apache.jackrabbit.core.observation">EventStateCollection</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#createEventStateCollection()">createEventStateCollection</a></strong>()</code>
<div class="block">Creates an <code>EventStateCollection</code>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionItem.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionItem</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#createInternalVersionItem(org.apache.jackrabbit.core.id.NodeId)">createInternalVersionItem</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Creates an <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionItem.html" title="interface in org.apache.jackrabbit.core.version"><code>InternalVersionItem</code></a> based on the <a href="../../../../../org/apache/jackrabbit/core/state/NodeState.html" title="class in org.apache.jackrabbit.core.state"><code>NodeState</code></a>
 identified by <code>id</code>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualNodeState.html" title="class in org.apache.jackrabbit.core.virtual">VirtualNodeState</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#createNodeState(org.apache.jackrabbit.core.virtual.VirtualNodeState, org.apache.jackrabbit.spi.Name, org.apache.jackrabbit.core.id.NodeId, org.apache.jackrabbit.spi.Name)">createNodeState</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualNodeState.html" title="class in org.apache.jackrabbit.core.virtual">VirtualNodeState</a>&nbsp;parent,
               <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;name,
               <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id,
               <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;nodeTypeName)</code>
<div class="block">Creates a new virtual node state</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualPropertyState.html" title="class in org.apache.jackrabbit.core.virtual">VirtualPropertyState</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#createPropertyState(org.apache.jackrabbit.core.virtual.VirtualNodeState, org.apache.jackrabbit.spi.Name, int, boolean)">createPropertyState</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualNodeState.html" title="class in org.apache.jackrabbit.core.virtual">VirtualNodeState</a>&nbsp;parent,
                   <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;name,
                   int&nbsp;type,
                   boolean&nbsp;multiValued)</code>
<div class="block">Creats a new virtual property state</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/version/VersionHistoryInfo.html" title="class in org.apache.jackrabbit.core.version">VersionHistoryInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#createVersionHistory(javax.jcr.Session, org.apache.jackrabbit.core.state.NodeState, org.apache.jackrabbit.core.id.NodeId)">createVersionHistory</a></strong>(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
                    <a href="../../../../../org/apache/jackrabbit/core/state/NodeState.html" title="class in org.apache.jackrabbit.core.state">NodeState</a>&nbsp;node,
                    <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;copiedFrom)</code>
<div class="block">Creates a new version history.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getActivitiesRoot()">getActivitiesRoot</a></strong>()</code>
<div class="block">returns the id of the activities root node</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalActivity.html" title="interface in org.apache.jackrabbit.core.version">InternalActivity</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getActivity(org.apache.jackrabbit.core.id.NodeId)">getActivity</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Returns the activity with the given id</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalBaseline.html" title="interface in org.apache.jackrabbit.core.version">InternalBaseline</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getBaseline(org.apache.jackrabbit.core.id.NodeId)">getBaseline</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Returns the baseline with the given id</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getHeadVersionOfNode(org.apache.jackrabbit.core.id.NodeId)">getHeadVersionOfNode</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Returns the head version of the node with the given id.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getHistoryRoot()">getHistoryRoot</a></strong>()</code>
<div class="block">returns the id of the version history root node</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionItem.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionItem</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getItem(org.apache.jackrabbit.core.id.NodeId)">getItem</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Returns the item with the given persistent id.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getItemState(org.apache.jackrabbit.core.id.ItemId)">getItemState</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/ItemId.html" title="interface in org.apache.jackrabbit.core.id">ItemId</a>&nbsp;id)</code>
<div class="block">Return an item state, given its item id.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getName(java.lang.String)">getName</a></strong>(<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</code>
<div class="block">Utility method that returns the given string as a name in the default
 namespace.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/id/NodeIdFactory.html" title="class in org.apache.jackrabbit.core.id">NodeIdFactory</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getNodeIdFactory()">getNodeIdFactory</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/state/NodeReferences.html" title="class in org.apache.jackrabbit.core.state">NodeReferences</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getNodeReferences(org.apache.jackrabbit.core.id.NodeId)">getNodeReferences</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Return a node references object, given its target id</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getNodeStateEx(org.apache.jackrabbit.core.id.NodeId)">getNodeStateEx</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;parentNodeId)</code>
<div class="block">Returns the node with the given persistent id.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static <a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getParentNode(org.apache.jackrabbit.core.version.NodeStateEx, java.lang.String, org.apache.jackrabbit.spi.Name)">getParentNode</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;parent,
             <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;uuid,
             <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;interNT)</code>
<div class="block">Utility method that returns the parent node under which the version
 history of the identified versionable node is or will be stored.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getVersion(org.apache.jackrabbit.core.id.NodeId)">getVersion</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Returns the version with the given id</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionHistory.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionHistory</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getVersionHistory(org.apache.jackrabbit.core.id.NodeId)">getVersionHistory</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Returns the version history with the given id</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/VersionHistoryInfo.html" title="class in org.apache.jackrabbit.core.version">VersionHistoryInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getVersionHistory(javax.jcr.Session, org.apache.jackrabbit.core.state.NodeState, org.apache.jackrabbit.core.id.NodeId)">getVersionHistory</a></strong>(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
                 <a href="../../../../../org/apache/jackrabbit/core/state/NodeState.html" title="class in org.apache.jackrabbit.core.state">NodeState</a>&nbsp;node,
                 <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;copiedFrom)</code>
<div class="block">Returns information about the version history of the specified node.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/VersionHistoryInfo.html" title="class in org.apache.jackrabbit.core.version">VersionHistoryInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getVersionHistoryInfoForNode(org.apache.jackrabbit.core.state.NodeState)">getVersionHistoryInfoForNode</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/state/NodeState.html" title="class in org.apache.jackrabbit.core.state">NodeState</a>&nbsp;node)</code>
<div class="block">Returns information about the version history of the specified node
 or <code>null</code> when unavailable.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionHistory.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionHistory</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getVersionHistoryOfNode(org.apache.jackrabbit.core.id.NodeId)">getVersionHistoryOfNode</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Returns the version history for the versionable node with the given id.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html" title="interface in org.apache.jackrabbit.core.virtual">VirtualItemStateProvider</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getVirtualItemStateProvider()">getVirtualItemStateProvider</a></strong>()</code>
<div class="block">returns the virtual item state provider that exposes the internal versions
 as items.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getVirtualRootId()">getVirtualRootId</a></strong>()</code>
<div class="block">Returns the id of the root node of the virtual tree.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getVirtualRootIds()">getVirtualRootIds</a></strong>()</code>
<div class="block">Returns the ids of the root nodes of the virtual tree.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core">InternalXAResource</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getXAResourceBegin()">getXAResourceBegin</a></strong>()</code>
<div class="block">Returns an <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core"><code>InternalXAResource</code></a> that acquires a write lock on the
 version manager in <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#prepare(org.apache.jackrabbit.core.TransactionContext)"><code>InternalXAResource.prepare(TransactionContext)</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core">InternalXAResource</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getXAResourceEnd()">getXAResourceEnd</a></strong>()</code>
<div class="block">Returns an <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core"><code>InternalXAResource</code></a> that releases the write lock on the
 version manager in <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#commit(org.apache.jackrabbit.core.TransactionContext)"><code>InternalXAResource.commit(TransactionContext)</code></a>
 or <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#rollback(org.apache.jackrabbit.core.TransactionContext)"><code>InternalXAResource.rollback(TransactionContext)</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#hasItem(org.apache.jackrabbit.core.id.NodeId)">hasItem</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Return a flag indicating if the item specified exists.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#hasItemReferences(org.apache.jackrabbit.core.id.NodeId)">hasItemReferences</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Checks if there are item references (from outside the version storage)
 that reference the given node.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#hasItemState(org.apache.jackrabbit.core.id.ItemId)">hasItemState</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/ItemId.html" title="interface in org.apache.jackrabbit.core.id">ItemId</a>&nbsp;id)</code>
<div class="block">Return a flag indicating whether an item state for a given
 item id exists.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#hasNodeReferences(org.apache.jackrabbit.core.id.NodeId)">hasNodeReferences</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Return a flag indicating whether a node references object
 for a given target id exists.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#internalCheckin(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl, org.apache.jackrabbit.core.version.NodeStateEx, boolean, java.util.Calendar)">internalCheckin</a></strong>(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl&nbsp;history,
               <a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;node,
               boolean&nbsp;simple,
               <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html?is-external=true" title="class or interface in java.util">Calendar</a>&nbsp;created)</code>
<div class="block">Checks in a node</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#internalRemoveActivity(org.apache.jackrabbit.core.version.InternalActivityImpl)">internalRemoveActivity</a></strong>(org.apache.jackrabbit.core.version.InternalActivityImpl&nbsp;activity)</code>
<div class="block">Removes the specified activity</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#internalRemoveVersion(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl, org.apache.jackrabbit.spi.Name)">internalRemoveVersion</a></strong>(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl&nbsp;history,
                     <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;name)</code>
<div class="block">Removes the specified version from the history</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#isVirtualRoot(org.apache.jackrabbit.core.id.ItemId)">isVirtualRoot</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/ItemId.html" title="interface in org.apache.jackrabbit.core.id">ItemId</a>&nbsp;id)</code>
<div class="block">Checks if the id refers to the root of a virtual tree.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#itemDiscarded(org.apache.jackrabbit.core.version.InternalVersionItem)">itemDiscarded</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionItem.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionItem</a>&nbsp;item)</code>
<div class="block">Invoked by the internal version item itself, when it's underlying
 persistence state was discarded.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#prepare(org.apache.jackrabbit.core.TransactionContext)">prepare</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</a>&nbsp;tx)</code>
<div class="block">Prepare transaction.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#removeActivity(javax.jcr.Session, org.apache.jackrabbit.core.id.NodeId)">removeActivity</a></strong>(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
              <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;nodeId)</code>
<div class="block">Removes an activity and all</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#removeListener(org.apache.jackrabbit.core.state.ItemStateListener)">removeListener</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</a>&nbsp;listener)</code>
<div class="block">Remove an <code>ItemStateListener</code></div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#removeVersion(javax.jcr.Session, org.apache.jackrabbit.core.version.InternalVersionHistory, org.apache.jackrabbit.spi.Name)">removeVersion</a></strong>(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
             <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionHistory.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionHistory</a>&nbsp;history,
             <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;versionName)</code>
<div class="block">Removes the specified version from the given version history.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#rollback(org.apache.jackrabbit.core.TransactionContext)">rollback</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</a>&nbsp;tx)</code>
<div class="block">Rollback transaction.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#setNodeReferences(org.apache.jackrabbit.core.state.ChangeLog)">setNodeReferences</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/state/ChangeLog.html" title="class in org.apache.jackrabbit.core.state">ChangeLog</a>&nbsp;references)</code>
<div class="block">Informs this provider that the node references to some of its states
 have changed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#setVersionLabel(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl, org.apache.jackrabbit.spi.Name, org.apache.jackrabbit.spi.Name, boolean)">setVersionLabel</a></strong>(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl&nbsp;history,
               <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;version,
               <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;label,
               boolean&nbsp;move)</code>
<div class="block">Set version label on the specified version.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#setVersionLabel(javax.jcr.Session, org.apache.jackrabbit.core.version.InternalVersionHistory, org.apache.jackrabbit.spi.Name, org.apache.jackrabbit.spi.Name, boolean)">setVersionLabel</a></strong>(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
               <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionHistory.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionHistory</a>&nbsp;history,
               <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;version,
               <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;label,
               boolean&nbsp;move)</code>
<div class="block">Sets the version <code>label</code> to the given <code>version</code>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#versionCreated(org.apache.jackrabbit.core.version.InternalVersion)">versionCreated</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;version)</code>
<div class="block">Invoked when a new internal item has been created.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#versionDestroyed(org.apache.jackrabbit.core.version.InternalVersion)">versionDestroyed</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;version)</code>
<div class="block">Invoked when a new internal item has been destroyed.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="stateMgr">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stateMgr</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html" title="class in org.apache.jackrabbit.core.state">LocalItemStateManager</a> stateMgr</pre>
<div class="block">State manager for the version storage.</div>
</li>
</ul>
<a name="ntReg">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ntReg</h4>
<pre>protected final&nbsp;<a href="../../../../../org/apache/jackrabbit/core/nodetype/NodeTypeRegistry.html" title="class in org.apache.jackrabbit.core.nodetype">NodeTypeRegistry</a> ntReg</pre>
<div class="block">Node type registry.</div>
</li>
</ul>
<a name="historiesId">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>historiesId</h4>
<pre>protected final&nbsp;<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a> historiesId</pre>
</li>
</ul>
<a name="activitiesId">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>activitiesId</h4>
<pre>protected final&nbsp;<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a> activitiesId</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="InternalXAVersionManager(org.apache.jackrabbit.core.version.InternalVersionManagerImpl, org.apache.jackrabbit.core.nodetype.NodeTypeRegistry, org.apache.jackrabbit.core.SessionImpl, org.apache.jackrabbit.core.state.ItemStateCacheFactory)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>InternalXAVersionManager</h4>
<pre>public&nbsp;InternalXAVersionManager(<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html" title="class in org.apache.jackrabbit.core.version">InternalVersionManagerImpl</a>&nbsp;vMgr,
                        <a href="../../../../../org/apache/jackrabbit/core/nodetype/NodeTypeRegistry.html" title="class in org.apache.jackrabbit.core.nodetype">NodeTypeRegistry</a>&nbsp;ntReg,
                        <a href="../../../../../org/apache/jackrabbit/core/SessionImpl.html" title="class in org.apache.jackrabbit.core">SessionImpl</a>&nbsp;session,
                        <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateCacheFactory.html" title="interface in org.apache.jackrabbit.core.state">ItemStateCacheFactory</a>&nbsp;cacheFactory)
                         throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Creates a new instance of this class.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>vMgr</code> - the underlying version manager</dd><dd><code>ntReg</code> - node type registry</dd><dd><code>session</code> - the session</dd><dd><code>cacheFactory</code> - cache factory</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if a an error occurs</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="createEventStateCollection()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createEventStateCollection</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/observation/EventStateCollection.html" title="class in org.apache.jackrabbit.core.observation">EventStateCollection</a>&nbsp;createEventStateCollection()
                                                throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/observation/EventStateCollectionFactory.html#createEventStateCollection()">EventStateCollectionFactory</a></code></strong></div>
<div class="block">Creates an <code>EventStateCollection</code>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/observation/EventStateCollectionFactory.html#createEventStateCollection()">createEventStateCollection</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/observation/EventStateCollectionFactory.html" title="interface in org.apache.jackrabbit.core.observation">EventStateCollectionFactory</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a new <code>EventStateCollection</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if creation fails for some reason</dd></dl>
</li>
</ul>
<a name="getVirtualItemStateProvider()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVirtualItemStateProvider</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html" title="interface in org.apache.jackrabbit.core.virtual">VirtualItemStateProvider</a>&nbsp;getVirtualItemStateProvider()</pre>
<div class="block">returns the virtual item state provider that exposes the internal versions
 as items.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#getVirtualItemStateProvider()">getVirtualItemStateProvider</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the virtual item state provider.</dd></dl>
</li>
</ul>
<a name="createVersionHistory(javax.jcr.Session, org.apache.jackrabbit.core.state.NodeState, org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createVersionHistory</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/VersionHistoryInfo.html" title="class in org.apache.jackrabbit.core.version">VersionHistoryInfo</a>&nbsp;createVersionHistory(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
                                      <a href="../../../../../org/apache/jackrabbit/core/state/NodeState.html" title="class in org.apache.jackrabbit.core.state">NodeState</a>&nbsp;node,
                                      <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;copiedFrom)
                                           throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Creates a new version history. This action is needed either when creating
 a new 'mix:versionable' node or when adding the 'mix:versionable' mixin
 to a node.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - repository session</dd><dd><code>node</code> - versionable node state</dd><dd><code>copiedFrom</code> - node id for the jcr:copiedFrom property</dd>
<dt><span class="strong">Returns:</span></dt><dd>identifier of the new version history node</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../org/apache/jackrabbit/core/version/InternalXAVersionManager.html#getVersionHistory(javax.jcr.Session, org.apache.jackrabbit.core.state.NodeState, org.apache.jackrabbit.core.id.NodeId)"><code>getVersionHistory(Session, NodeState, NodeId)</code></a></dd></dl>
</li>
</ul>
<a name="createActivity(javax.jcr.Session, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createActivity</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;createActivity(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
                    <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;title)
                      throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Creates a new activity</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#createActivity(javax.jcr.Session, java.lang.String)">createActivity</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - the current session</dd><dd><code>title</code> - title of the new activity</dd>
<dt><span class="strong">Returns:</span></dt><dd>the nodeid of the new activity</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="removeActivity(javax.jcr.Session, org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeActivity</h4>
<pre>public&nbsp;void&nbsp;removeActivity(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
                  <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;nodeId)
                    throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Removes an activity and all</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#removeActivity(javax.jcr.Session, org.apache.jackrabbit.core.id.NodeId)">removeActivity</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - the current session</dd><dd><code>nodeId</code> - id of the activity to remove</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="internalRemoveActivity(org.apache.jackrabbit.core.version.InternalActivityImpl)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>internalRemoveActivity</h4>
<pre>protected&nbsp;void&nbsp;internalRemoveActivity(org.apache.jackrabbit.core.version.InternalActivityImpl&nbsp;activity)
                               throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/version/VersionException.html?is-external=true" title="class or interface in javax.jcr.version">VersionException</a>,
                                      <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Removes the specified activity
 <p/>
 Before modifying activity, make a local copy of it.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>activity</code> - the activity to remove</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if any other error occurs.</dd>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/version/VersionException.html?is-external=true" title="class or interface in javax.jcr.version">VersionException</a></code></dd></dl>
</li>
</ul>
<a name="canCheckout(org.apache.jackrabbit.core.version.NodeStateEx, org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>canCheckout</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;canCheckout(<a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;state,
                 <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;activityId)
                   throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">invokes the checkout() on the persistent version manager.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#canCheckout(org.apache.jackrabbit.core.version.NodeStateEx, org.apache.jackrabbit.core.id.NodeId)">canCheckout</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>state</code> - node to checkout</dd><dd><code>activityId</code> - node id if the current activity</dd>
<dt><span class="strong">Returns:</span></dt><dd>the base version id</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="checkin(javax.jcr.Session, org.apache.jackrabbit.core.version.NodeStateEx, java.util.Calendar)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkin</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;checkin(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
                      <a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;node,
                      <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html?is-external=true" title="class or interface in java.util">Calendar</a>&nbsp;created)
                        throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">invokes the checkin() on the persistent version manager and remaps the
 newly created version objects.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#checkin(javax.jcr.Session, org.apache.jackrabbit.core.version.NodeStateEx, java.util.Calendar)">checkin</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - session that invokes the checkin</dd><dd><code>node</code> - node to checkin</dd><dd><code>created</code> - create time of the new version,
                or <code>null</code> for the current time</dd>
<dt><span class="strong">Returns:</span></dt><dd>the newly created version</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="removeVersion(javax.jcr.Session, org.apache.jackrabbit.core.version.InternalVersionHistory, org.apache.jackrabbit.spi.Name)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeVersion</h4>
<pre>public&nbsp;void&nbsp;removeVersion(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
                 <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionHistory.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionHistory</a>&nbsp;history,
                 <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;versionName)
                   throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Removes the specified version from the given version history.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#removeVersion(javax.jcr.Session, org.apache.jackrabbit.core.version.InternalVersionHistory, org.apache.jackrabbit.spi.Name)">removeVersion</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - the session that performs the remove</dd><dd><code>history</code> - version history to remove the version from</dd><dd><code>versionName</code> - name of the version</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="setVersionLabel(javax.jcr.Session, org.apache.jackrabbit.core.version.InternalVersionHistory, org.apache.jackrabbit.spi.Name, org.apache.jackrabbit.spi.Name, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setVersionLabel</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;setVersionLabel(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
                              <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionHistory.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionHistory</a>&nbsp;history,
                              <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;version,
                              <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;label,
                              boolean&nbsp;move)
                                throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Sets the version <code>label</code> to the given <code>version</code>.
 If the label is already assigned to another version, a VersionException is
 thrown unless <code>move</code> is <code>true</code>. If <code>version</code>
 is <code>null</code>, the label is removed from the respective version.
 In either case, the version the label was previously assigned is returned,
 or <code>null</code> of the label was not moved.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#setVersionLabel(javax.jcr.Session, org.apache.jackrabbit.core.version.InternalVersionHistory, org.apache.jackrabbit.spi.Name, org.apache.jackrabbit.spi.Name, boolean)">setVersionLabel</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - the session that performs the operation</dd><dd><code>history</code> - version history</dd><dd><code>version</code> - name of the version</dd><dd><code>label</code> - new label</dd><dd><code>move</code> - if <code>true</code> label will be moved</dd>
<dt><span class="strong">Returns:</span></dt><dd>the version that had the label or <code>null</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()
           throws <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Close this version manager. After having closed a persistence
 manager, further operations on this object are treated as illegal
 and throw</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="isVirtualRoot(org.apache.jackrabbit.core.id.ItemId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isVirtualRoot</h4>
<pre>public&nbsp;boolean&nbsp;isVirtualRoot(<a href="../../../../../org/apache/jackrabbit/core/id/ItemId.html" title="interface in org.apache.jackrabbit.core.id">ItemId</a>&nbsp;id)</pre>
<div class="block">Checks if the id refers to the root of a virtual tree.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html#isVirtualRoot(org.apache.jackrabbit.core.id.ItemId)">isVirtualRoot</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html" title="interface in org.apache.jackrabbit.core.virtual">VirtualItemStateProvider</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if it is the root</dd></dl>
</li>
</ul>
<a name="getVirtualRootId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVirtualRootId</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;getVirtualRootId()</pre>
<div class="block">Returns the id of the root node of the virtual tree.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html#getVirtualRootId()">getVirtualRootId</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html" title="interface in org.apache.jackrabbit.core.virtual">VirtualItemStateProvider</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the id of the root node of the virtual tree.</dd></dl>
</li>
</ul>
<a name="getVirtualRootIds()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVirtualRootIds</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>[]&nbsp;getVirtualRootIds()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html#getVirtualRootIds()">VirtualItemStateProvider</a></code></strong></div>
<div class="block">Returns the ids of the root nodes of the virtual tree.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html#getVirtualRootIds()">getVirtualRootIds</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html" title="interface in org.apache.jackrabbit.core.virtual">VirtualItemStateProvider</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the ids of the roots node of the virtual tree.</dd></dl>
</li>
</ul>
<a name="createPropertyState(org.apache.jackrabbit.core.virtual.VirtualNodeState, org.apache.jackrabbit.spi.Name, int, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createPropertyState</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualPropertyState.html" title="class in org.apache.jackrabbit.core.virtual">VirtualPropertyState</a>&nbsp;createPropertyState(<a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualNodeState.html" title="class in org.apache.jackrabbit.core.virtual">VirtualNodeState</a>&nbsp;parent,
                                       <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;name,
                                       int&nbsp;type,
                                       boolean&nbsp;multiValued)
                                         throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Creats a new virtual property state</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html#createPropertyState(org.apache.jackrabbit.core.virtual.VirtualNodeState, org.apache.jackrabbit.spi.Name, int, boolean)">createPropertyState</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html" title="interface in org.apache.jackrabbit.core.virtual">VirtualItemStateProvider</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code></dd></dl>
</li>
</ul>
<a name="createNodeState(org.apache.jackrabbit.core.virtual.VirtualNodeState, org.apache.jackrabbit.spi.Name, org.apache.jackrabbit.core.id.NodeId, org.apache.jackrabbit.spi.Name)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createNodeState</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualNodeState.html" title="class in org.apache.jackrabbit.core.virtual">VirtualNodeState</a>&nbsp;createNodeState(<a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualNodeState.html" title="class in org.apache.jackrabbit.core.virtual">VirtualNodeState</a>&nbsp;parent,
                               <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;name,
                               <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id,
                               <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;nodeTypeName)
                                 throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Creates a new virtual node state</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html#createNodeState(org.apache.jackrabbit.core.virtual.VirtualNodeState, org.apache.jackrabbit.spi.Name, org.apache.jackrabbit.core.id.NodeId, org.apache.jackrabbit.spi.Name)">createNodeState</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html" title="interface in org.apache.jackrabbit.core.virtual">VirtualItemStateProvider</a></code></dd>
<dd><code>id</code> - (must not be null)</dd>
<dt><span class="strong">Returns:</span></dt><dd></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code></dd></dl>
</li>
</ul>
<a name="setNodeReferences(org.apache.jackrabbit.core.state.ChangeLog)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setNodeReferences</h4>
<pre>public&nbsp;boolean&nbsp;setNodeReferences(<a href="../../../../../org/apache/jackrabbit/core/state/ChangeLog.html" title="class in org.apache.jackrabbit.core.state">ChangeLog</a>&nbsp;references)</pre>
<div class="block">Informs this provider that the node references to some of its states
 have changed.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html#setNodeReferences(org.apache.jackrabbit.core.state.ChangeLog)">setNodeReferences</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html" title="interface in org.apache.jackrabbit.core.virtual">VirtualItemStateProvider</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>references</code> - collection of <a href="../../../../../org/apache/jackrabbit/core/state/NodeReferences.html" title="class in org.apache.jackrabbit.core.state"><code>NodeReferences</code></a> instances</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if the reference target is one of its items.</dd></dl>
</li>
</ul>
<a name="getItemState(org.apache.jackrabbit.core.id.ItemId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getItemState</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</a>&nbsp;getItemState(<a href="../../../../../org/apache/jackrabbit/core/id/ItemId.html" title="interface in org.apache.jackrabbit.core.id">ItemId</a>&nbsp;id)
                       throws <a href="../../../../../org/apache/jackrabbit/core/state/NoSuchItemStateException.html" title="class in org.apache.jackrabbit.core.state">NoSuchItemStateException</a>,
                              <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</a></pre>
<div class="block">Return an item state, given its item id.
 <p/>
 Return item states for changes only. Global version manager will return
 other items.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html#getItemState(org.apache.jackrabbit.core.id.ItemId)">getItemState</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html" title="interface in org.apache.jackrabbit.core.state">ItemStateManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - item id</dd>
<dt><span class="strong">Returns:</span></dt><dd>item state</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/NoSuchItemStateException.html" title="class in org.apache.jackrabbit.core.state">NoSuchItemStateException</a></code> - if the item does not exist</dd>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="hasItemState(org.apache.jackrabbit.core.id.ItemId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasItemState</h4>
<pre>public&nbsp;boolean&nbsp;hasItemState(<a href="../../../../../org/apache/jackrabbit/core/id/ItemId.html" title="interface in org.apache.jackrabbit.core.id">ItemId</a>&nbsp;id)</pre>
<div class="block">Return a flag indicating whether an item state for a given
 item id exists.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html#hasItemState(org.apache.jackrabbit.core.id.ItemId)">hasItemState</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html" title="interface in org.apache.jackrabbit.core.state">ItemStateManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - item id</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if an item state exists,
         otherwise <code>false</code></dd></dl>
</li>
</ul>
<a name="getNodeReferences(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNodeReferences</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/state/NodeReferences.html" title="class in org.apache.jackrabbit.core.state">NodeReferences</a>&nbsp;getNodeReferences(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)
                                 throws <a href="../../../../../org/apache/jackrabbit/core/state/NoSuchItemStateException.html" title="class in org.apache.jackrabbit.core.state">NoSuchItemStateException</a>,
                                        <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</a></pre>
<div class="block">Return a node references object, given its target id</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html#getNodeReferences(org.apache.jackrabbit.core.id.NodeId)">getNodeReferences</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html" title="interface in org.apache.jackrabbit.core.state">ItemStateManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - target id</dd>
<dt><span class="strong">Returns:</span></dt><dd>node references object</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/NoSuchItemStateException.html" title="class in org.apache.jackrabbit.core.state">NoSuchItemStateException</a></code> - if the item does not exist</dd>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="hasNodeReferences(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasNodeReferences</h4>
<pre>public&nbsp;boolean&nbsp;hasNodeReferences(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</pre>
<div class="block">Return a flag indicating whether a node references object
 for a given target id exists.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html#hasNodeReferences(org.apache.jackrabbit.core.id.NodeId)">hasNodeReferences</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html" title="interface in org.apache.jackrabbit.core.state">ItemStateManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - target id</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if a node reference object exists for the given
         id, otherwise <code>false</code>.</dd></dl>
</li>
</ul>
<a name="addListener(org.apache.jackrabbit.core.state.ItemStateListener)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addListener</h4>
<pre>public&nbsp;void&nbsp;addListener(<a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</a>&nbsp;listener)</pre>
<div class="block">Add an <code>ItemStateListener</code>
 <p/>
 Not needed.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html#addListener(org.apache.jackrabbit.core.state.ItemStateListener)">addListener</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html" title="interface in org.apache.jackrabbit.core.virtual">VirtualItemStateProvider</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>listener</code> - the new listener to be informed on modifications</dd></dl>
</li>
</ul>
<a name="removeListener(org.apache.jackrabbit.core.state.ItemStateListener)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeListener</h4>
<pre>public&nbsp;void&nbsp;removeListener(<a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</a>&nbsp;listener)</pre>
<div class="block">Remove an <code>ItemStateListener</code>
 <p/>
 Not needed.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html#removeListener(org.apache.jackrabbit.core.state.ItemStateListener)">removeListener</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html" title="interface in org.apache.jackrabbit.core.virtual">VirtualItemStateProvider</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>listener</code> - an existing listener</dd></dl>
</li>
</ul>
<a name="getHistoryRoot()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHistoryRoot</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;getHistoryRoot()</pre>
<div class="block">returns the id of the version history root node</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the id of the version history root node</dd></dl>
</li>
</ul>
<a name="getActivitiesRoot()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getActivitiesRoot</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;getActivitiesRoot()</pre>
<div class="block">returns the id of the activities root node</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the id of the activities root node</dd></dl>
</li>
</ul>
<a name="getItem(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getItem</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionItem.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionItem</a>&nbsp;getItem(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)
                               throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Returns the item with the given persistent id. Subclass responsibility.
 <p/>
 Please note, that the overridden method must acquire the readlock before
 reading the state manager.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - the id of the item</dd>
<dt><span class="strong">Returns:</span></dt><dd>version item</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="hasItem(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasItem</h4>
<pre>protected&nbsp;boolean&nbsp;hasItem(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</pre>
<div class="block">Return a flag indicating if the item specified exists.
 Subclass responsibility.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - the id of the item</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if the item exists;
         <code>false</code> otherwise</dd></dl>
</li>
</ul>
<a name="hasItemReferences(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasItemReferences</h4>
<pre>protected&nbsp;boolean&nbsp;hasItemReferences(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)
                             throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Checks if there are item references (from outside the version storage)
 that reference the given node. Subclass responsibility.
 <p/>
 Please note, that the overridden method must acquire the readlock before
 reading the state manager.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - the id of the node</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if there are item references from outside the
         version storage; <code>false</code> otherwise.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs while reading from the
                             repository.</dd></dl>
</li>
</ul>
<a name="getNodeStateEx(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNodeStateEx</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;getNodeStateEx(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;parentNodeId)
                              throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Returns the node with the given persistent id. Subclass responsibility.
 <p/>
 Please note, that the overridden method must acquire the readlock before
 reading the state manager.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>parentNodeId</code> - the id of the node</dd>
<dt><span class="strong">Returns:</span></dt><dd>the nodestate for the given id.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs while reading from the
                             repository.</dd></dl>
</li>
</ul>
<a name="internalCheckin(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl, org.apache.jackrabbit.core.version.NodeStateEx, boolean, java.util.Calendar)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>internalCheckin</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;internalCheckin(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl&nbsp;history,
                              <a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;node,
                              boolean&nbsp;simple,
                              <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html?is-external=true" title="class or interface in java.util">Calendar</a>&nbsp;created)
                                   throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Checks in a node
 <p/>
 Before modifying version history given, make a local copy of it.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>history</code> - the version history</dd><dd><code>node</code> - node to checkin</dd><dd><code>simple</code> - flag indicates simple versioning</dd><dd><code>created</code> - optional created date.</dd>
<dt><span class="strong">Returns:</span></dt><dd>internal version</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd><dt><span class="strong">See Also:</span></dt><dd><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Node.html?is-external=true#checkin()" title="class or interface in javax.jcr"><code>Node.checkin()</code></a></dd></dl>
</li>
</ul>
<a name="internalRemoveVersion(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl, org.apache.jackrabbit.spi.Name)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>internalRemoveVersion</h4>
<pre>protected&nbsp;void&nbsp;internalRemoveVersion(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl&nbsp;history,
                         <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;name)
                              throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/version/VersionException.html?is-external=true" title="class or interface in javax.jcr.version">VersionException</a>,
                                     <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Removes the specified version from the history
 <p/>
 Before modifying version history given, make a local copy of it.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>history</code> - the version history from where to remove the version.</dd><dd><code>name</code> - the name of the version to remove.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/version/VersionException.html?is-external=true" title="class or interface in javax.jcr.version">VersionException</a></code> - if the version <code>history</code> does
  not have a version with <code>name</code>.</dd>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if any other error occurs.</dd></dl>
</li>
</ul>
<a name="setVersionLabel(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl, org.apache.jackrabbit.spi.Name, org.apache.jackrabbit.spi.Name, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setVersionLabel</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;setVersionLabel(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl&nbsp;history,
                              <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;version,
                              <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;label,
                              boolean&nbsp;move)
                                   throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Set version label on the specified version.
 <p/>
 Before modifying version history given, make a local copy of it.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>history</code> - version history</dd><dd><code>version</code> - version name</dd><dd><code>label</code> - version label</dd><dd><code>move</code> - <code>true</code> to move from existing version;
             <code>false</code> otherwise.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The internal version.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="versionCreated(org.apache.jackrabbit.core.version.InternalVersion)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>versionCreated</h4>
<pre>protected&nbsp;void&nbsp;versionCreated(<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;version)</pre>
<div class="block">Invoked when a new internal item has been created.
 <p/>
 Put the version object into our cache.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>version</code> - internal version item</dd></dl>
</li>
</ul>
<a name="versionDestroyed(org.apache.jackrabbit.core.version.InternalVersion)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>versionDestroyed</h4>
<pre>protected&nbsp;void&nbsp;versionDestroyed(<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;version)</pre>
<div class="block">Invoked when a new internal item has been destroyed.
 <p/>
 Remove the version object from our cache.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>version</code> - internal version item</dd></dl>
</li>
</ul>
<a name="associate(org.apache.jackrabbit.core.TransactionContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>associate</h4>
<pre>public&nbsp;void&nbsp;associate(<a href="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</a>&nbsp;tx)</pre>
<div class="block">Associate this resource with a transaction. All further operations on
 the object should be interpreted as part of this transaction and changes
 recorded in some attribute of the transaction context.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#associate(org.apache.jackrabbit.core.TransactionContext)">associate</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core">InternalXAResource</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>tx</code> - transaction context, if <code>null</code> disassociate</dd></dl>
</li>
</ul>
<a name="beforeOperation(org.apache.jackrabbit.core.TransactionContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>beforeOperation</h4>
<pre>public&nbsp;void&nbsp;beforeOperation(<a href="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</a>&nbsp;tx)</pre>
<div class="block">Invoked before one of the <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#prepare(org.apache.jackrabbit.core.TransactionContext)"><code>InternalXAResource.prepare(org.apache.jackrabbit.core.TransactionContext)</code></a>, <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#commit(org.apache.jackrabbit.core.TransactionContext)"><code>InternalXAResource.commit(org.apache.jackrabbit.core.TransactionContext)</code></a> or
 <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#rollback(org.apache.jackrabbit.core.TransactionContext)"><code>InternalXAResource.rollback(org.apache.jackrabbit.core.TransactionContext)</code></a> method is called.
 <p/>
 Delegate the call to our XA item state manager.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#beforeOperation(org.apache.jackrabbit.core.TransactionContext)">beforeOperation</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core">InternalXAResource</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>tx</code> - transaction context</dd></dl>
</li>
</ul>
<a name="prepare(org.apache.jackrabbit.core.TransactionContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepare</h4>
<pre>public&nbsp;void&nbsp;prepare(<a href="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</a>&nbsp;tx)
             throws <a href="../../../../../org/apache/jackrabbit/core/TransactionException.html" title="class in org.apache.jackrabbit.core">TransactionException</a></pre>
<div class="block">Prepare transaction. The transaction is identified by a transaction
 context.
 <p/>
 Delegate the call to our XA item state manager.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#prepare(org.apache.jackrabbit.core.TransactionContext)">prepare</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core">InternalXAResource</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>tx</code> - transaction context</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/TransactionException.html" title="class in org.apache.jackrabbit.core">TransactionException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="commit(org.apache.jackrabbit.core.TransactionContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commit</h4>
<pre>public&nbsp;void&nbsp;commit(<a href="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</a>&nbsp;tx)
            throws <a href="../../../../../org/apache/jackrabbit/core/TransactionException.html" title="class in org.apache.jackrabbit.core">TransactionException</a></pre>
<div class="block">Commit transaction. The transaction is identified by a transaction
 context. If the method throws, other resources get their changes
 rolled back.
 <p/>
 Delegate the call to our XA item state manager. If successful, inform
 global repository manager to update its caches.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#commit(org.apache.jackrabbit.core.TransactionContext)">commit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core">InternalXAResource</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>tx</code> - transaction context</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/TransactionException.html" title="class in org.apache.jackrabbit.core">TransactionException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="rollback(org.apache.jackrabbit.core.TransactionContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rollback</h4>
<pre>public&nbsp;void&nbsp;rollback(<a href="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</a>&nbsp;tx)</pre>
<div class="block">Rollback transaction. The transaction is identified by a transaction
 context.
 <p/>
 Delegate the call to our XA item state manager.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#rollback(org.apache.jackrabbit.core.TransactionContext)">rollback</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core">InternalXAResource</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>tx</code> - transaction context.</dd></dl>
</li>
</ul>
<a name="afterOperation(org.apache.jackrabbit.core.TransactionContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>afterOperation</h4>
<pre>public&nbsp;void&nbsp;afterOperation(<a href="../../../../../org/apache/jackrabbit/core/TransactionContext.html" title="class in org.apache.jackrabbit.core">TransactionContext</a>&nbsp;tx)</pre>
<div class="block">Invoked after one of the <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#prepare(org.apache.jackrabbit.core.TransactionContext)"><code>InternalXAResource.prepare(org.apache.jackrabbit.core.TransactionContext)</code></a>, <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#commit(org.apache.jackrabbit.core.TransactionContext)"><code>InternalXAResource.commit(org.apache.jackrabbit.core.TransactionContext)</code></a> or
 <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#rollback(org.apache.jackrabbit.core.TransactionContext)"><code>InternalXAResource.rollback(org.apache.jackrabbit.core.TransactionContext)</code></a> method has been called.
 <p/>
 Delegate the call to our XA item state manager.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#afterOperation(org.apache.jackrabbit.core.TransactionContext)">afterOperation</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core">InternalXAResource</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>tx</code> - transaction context</dd></dl>
</li>
</ul>
<a name="getXAResourceBegin()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getXAResourceBegin</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core">InternalXAResource</a>&nbsp;getXAResourceBegin()</pre>
<div class="block">Returns an <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core"><code>InternalXAResource</code></a> that acquires a write lock on the
 version manager in <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#prepare(org.apache.jackrabbit.core.TransactionContext)"><code>InternalXAResource.prepare(TransactionContext)</code></a>.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>an internal XA resource.</dd></dl>
</li>
</ul>
<a name="getXAResourceEnd()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getXAResourceEnd</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core">InternalXAResource</a>&nbsp;getXAResourceEnd()</pre>
<div class="block">Returns an <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html" title="interface in org.apache.jackrabbit.core"><code>InternalXAResource</code></a> that releases the write lock on the
 version manager in <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#commit(org.apache.jackrabbit.core.TransactionContext)"><code>InternalXAResource.commit(TransactionContext)</code></a>
 or <a href="../../../../../org/apache/jackrabbit/core/InternalXAResource.html#rollback(org.apache.jackrabbit.core.TransactionContext)"><code>InternalXAResource.rollback(TransactionContext)</code></a>.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>an internal XA resource.</dd></dl>
</li>
</ul>
<a name="getVersion(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVersion</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;getVersion(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)
                           throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Returns the version with the given id</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#getVersion(org.apache.jackrabbit.core.id.NodeId)">getVersion</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - id of the version to retrieve</dd>
<dt><span class="strong">Returns:</span></dt><dd>the version or <code>null</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="getBaseline(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBaseline</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalBaseline.html" title="interface in org.apache.jackrabbit.core.version">InternalBaseline</a>&nbsp;getBaseline(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)
                             throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Returns the baseline with the given id</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#getBaseline(org.apache.jackrabbit.core.id.NodeId)">getBaseline</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - id of the baseline version to retrieve</dd>
<dt><span class="strong">Returns:</span></dt><dd>the baseline or <code>null</code> if not found</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="getActivity(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getActivity</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalActivity.html" title="interface in org.apache.jackrabbit.core.version">InternalActivity</a>&nbsp;getActivity(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)
                             throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Returns the activity with the given id</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#getActivity(org.apache.jackrabbit.core.id.NodeId)">getActivity</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - id of the activity to retrieve</dd>
<dt><span class="strong">Returns:</span></dt><dd>the activity.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="getVersionHistory(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVersionHistory</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionHistory.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionHistory</a>&nbsp;getVersionHistory(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)
                                         throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Returns the version history with the given id</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#getVersionHistory(org.apache.jackrabbit.core.id.NodeId)">getVersionHistory</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - id of the version history</dd>
<dt><span class="strong">Returns:</span></dt><dd>the version history.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="getVersionHistoryOfNode(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVersionHistoryOfNode</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionHistory.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionHistory</a>&nbsp;getVersionHistoryOfNode(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)
                                               throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Returns the version history for the versionable node with the given id.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#getVersionHistoryOfNode(org.apache.jackrabbit.core.id.NodeId)">getVersionHistoryOfNode</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - id of the node to retrieve the version history for</dd>
<dt><span class="strong">Returns:</span></dt><dd>the version history</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs or the history does not exit</dd></dl>
</li>
</ul>
<a name="getHeadVersionOfNode(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHeadVersionOfNode</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;getHeadVersionOfNode(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)
                                     throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Returns the head version of the node with the given id. this is always
 the last of all versions. this only works correctly for liner version
 graphs (i.e. simple versioning)

 Assumes that all versions are stored chronologically below the version
 history and just returns the last one. i.e. currently only works for
 simple versioning.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#getHeadVersionOfNode(org.apache.jackrabbit.core.id.NodeId)">getHeadVersionOfNode</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - id of the node to retrieve the version for</dd>
<dt><span class="strong">Returns:</span></dt><dd>the version.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="acquireWriteLock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquireWriteLock</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/VersioningLock.WriteLock.html" title="class in org.apache.jackrabbit.core.version">VersioningLock.WriteLock</a>&nbsp;acquireWriteLock()</pre>
<div class="block">Acquires the write lock on this version manager.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>returns the write lock</dd></dl>
</li>
</ul>
<a name="acquireReadLock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquireReadLock</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/VersioningLock.ReadLock.html" title="class in org.apache.jackrabbit.core.version">VersioningLock.ReadLock</a>&nbsp;acquireReadLock()</pre>
<div class="block">acquires the read lock on this version manager.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>returns the read lock</dd></dl>
</li>
</ul>
<a name="getVersionHistoryInfoForNode(org.apache.jackrabbit.core.state.NodeState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVersionHistoryInfoForNode</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/VersionHistoryInfo.html" title="class in org.apache.jackrabbit.core.version">VersionHistoryInfo</a>&nbsp;getVersionHistoryInfoForNode(<a href="../../../../../org/apache/jackrabbit/core/state/NodeState.html" title="class in org.apache.jackrabbit.core.state">NodeState</a>&nbsp;node)
                                                throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Returns information about the version history of the specified node
 or <code>null</code> when unavailable.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>vNode</code> - node whose version history should be returned</dd>
<dt><span class="strong">Returns:</span></dt><dd>identifiers of the version history and root version nodes</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="getVersionHistory(javax.jcr.Session, org.apache.jackrabbit.core.state.NodeState, org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVersionHistory</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/VersionHistoryInfo.html" title="class in org.apache.jackrabbit.core.version">VersionHistoryInfo</a>&nbsp;getVersionHistory(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
                                   <a href="../../../../../org/apache/jackrabbit/core/state/NodeState.html" title="class in org.apache.jackrabbit.core.state">NodeState</a>&nbsp;node,
                                   <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;copiedFrom)
                                     throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Returns information about the version history of the specified node.
 If the given node does not already have an associated version history,
 then an empty history is automatically created. This method should
 only be called by code that already knows that the specified node
 is versionable.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#getVersionHistory(javax.jcr.Session, org.apache.jackrabbit.core.state.NodeState, org.apache.jackrabbit.core.id.NodeId)">getVersionHistory</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - workspace session</dd><dd><code>node</code> - node whose version history should be returned</dd><dd><code>copiedFrom</code> - the node id for the jcr:copiedFrom property use for copied nodes</dd>
<dt><span class="strong">Returns:</span></dt><dd>identifiers of the version history and root version nodes</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="getName(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getName</h4>
<pre>protected static&nbsp;<a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;getName(<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</pre>
<div class="block">Utility method that returns the given string as a name in the default
 namespace.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>name</code> - string name</dd>
<dt><span class="strong">Returns:</span></dt><dd>A <code>Name</code> object.</dd></dl>
</li>
</ul>
<a name="getParentNode(org.apache.jackrabbit.core.version.NodeStateEx, java.lang.String, org.apache.jackrabbit.spi.Name)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getParentNode</h4>
<pre>protected static&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;getParentNode(<a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;parent,
                        <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;uuid,
                        <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;interNT)
                                    throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Utility method that returns the parent node under which the version
 history of the identified versionable node is or will be stored. If
 the <code>interNT</code> is not <code>null</code> then the returned
 parent node and any ancestor nodes are automatically created if they do
 not already exist. Otherwise
 <code>null</code> is returned if the parent node does not exist.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>parent</code> - the parent node</dd><dd><code>uuid</code> - UUID of a versionable node</dd><dd><code>interNT</code> - intermediate nodetype.</dd>
<dt><span class="strong">Returns:</span></dt><dd>parent node of the version history, or <code>null</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="checkin(org.apache.jackrabbit.core.version.NodeStateEx, java.util.Calendar)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkin</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;checkin(<a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;node,
                      <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html?is-external=true" title="class or interface in java.util">Calendar</a>&nbsp;created)
                           throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Creates a new version of the given node using the given version
 creation time.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>node</code> - the node to be checked in</dd><dd><code>created</code> - version creation time</dd>
<dt><span class="strong">Returns:</span></dt><dd>the new version</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="calculateCheckinVersionName(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl, org.apache.jackrabbit.core.version.NodeStateEx, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateCheckinVersionName</h4>
<pre>protected&nbsp;<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;calculateCheckinVersionName(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl&nbsp;history,
                                 <a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;node,
                                 boolean&nbsp;simple)
                                      throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Calculates the name of the new version that will be created by a
 checkin call. The name is determined as follows:
 <ul>
 <li> first the predecessor version with the shortest name is searched.
 <li> if that predecessor version is the root version, the new version gets
      the name "{number of successors}+1" + ".0"
 <li> if that predecessor version has no successor, the last digit of it's
      version number is incremented.
 <li> if that predecessor version has successors but the incremented name
      does not exist, that name is used.
 <li> otherwise a ".0" is added to the name until a non conflicting name
      is found.
 <ul>

 Example Graph:
 <xmp>
 jcr:rootVersion
  |     |
 1.0   2.0
  |
 1.1
  |
 1.2 ---\  ------\
  |      \        \
 1.3   1.2.0   1.2.0.0
  |      |
 1.4   1.2.1 ----\
  |      |        \
 1.5   1.2.2   1.2.1.0
  |      |        |
 1.6     |     1.2.1.1
  |-----/
 1.7
 </xmp></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>history</code> - the version history</dd><dd><code>node</code> - the node to checkin</dd><dd><code>simple</code> - if <code>true</code> indicates simple versioning</dd>
<dt><span class="strong">Returns:</span></dt><dd>the new version name</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs.</dd></dl>
</li>
</ul>
<a name="itemDiscarded(org.apache.jackrabbit.core.version.InternalVersionItem)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>itemDiscarded</h4>
<pre>protected&nbsp;void&nbsp;itemDiscarded(<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionItem.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionItem</a>&nbsp;item)</pre>
<div class="block">Invoked by the internal version item itself, when it's underlying
 persistence state was discarded.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>item</code> - item that was discarded</dd></dl>
</li>
</ul>
<a name="createInternalVersionItem(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createInternalVersionItem</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionItem.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionItem</a>&nbsp;createInternalVersionItem(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)
                                                 throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Creates an <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionItem.html" title="interface in org.apache.jackrabbit.core.version"><code>InternalVersionItem</code></a> based on the <a href="../../../../../org/apache/jackrabbit/core/state/NodeState.html" title="class in org.apache.jackrabbit.core.state"><code>NodeState</code></a>
 identified by <code>id</code>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - the node id of the version item.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the version item or <code>null</code> if there is no node state
         with the given <code>id</code>.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs while reading from the
                             version storage.</dd></dl>
</li>
</ul>
<a name="getNodeIdFactory()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getNodeIdFactory</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/id/NodeIdFactory.html" title="class in org.apache.jackrabbit.core.id">NodeIdFactory</a>&nbsp;getNodeIdFactory()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/InternalXAVersionManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.DynamicESCFactory.html" title="class in org.apache.jackrabbit.core.version"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/jackrabbit/core/version/LabelVersionSelector.html" title="class in org.apache.jackrabbit.core.version"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/jackrabbit/core/version/InternalXAVersionManager.html" target="_top">Frames</a></li>
<li><a href="InternalXAVersionManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2004-2012 <a href="http://www.apache.org/">The Apache Software Foundation</a>. All Rights Reserved.</small></p>
</body>
</html>
