<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_02) on Tue Feb 21 16:02:02 CET 2012 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>SharedItemStateManager (Apache Jackrabbit 2.4.0 API)</title>
<meta name="date" content="2012-02-21">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="SharedItemStateManager (Apache Jackrabbit 2.4.0 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SharedItemStateManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/jackrabbit/core/state/SessionItemStateManager.html" title="class in org.apache.jackrabbit.core.state"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/jackrabbit/core/state/StaleItemStateException.html" title="class in org.apache.jackrabbit.core.state"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/jackrabbit/core/state/SharedItemStateManager.html" target="_top">Frames</a></li>
<li><a href="SharedItemStateManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.jackrabbit.core.state</div>
<h2 title="Class SharedItemStateManager" class="title">Class SharedItemStateManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.jackrabbit.core.state.SharedItemStateManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</a>, <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html" title="interface in org.apache.jackrabbit.core.state">ItemStateManager</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../../org/apache/jackrabbit/core/version/VersionItemStateManager.html" title="class in org.apache.jackrabbit.core.version">VersionItemStateManager</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">SharedItemStateManager</span>
extends <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html" title="interface in org.apache.jackrabbit.core.state">ItemStateManager</a>, <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</a></pre>
<div class="block">Shared <code>ItemStateManager</code> (SISM). Caches objects returned from a
 <code>PersistenceManager</code>. Objects returned by this item state
 manager are shared among all sessions.
 <p/>
 A shared item state manager operates on a <code>PersistenceManager</code>
 (PM) that is used to load and store the item states. Additionally, a SISM can
 have <code>VirtualItemStateProvider</code>s (VISP) that are used to provide
 additional, non-persistent, read-only states. Examples of VISP are the
 content representation of the NodeTypes (/jcr:system/jcr:nodeTypes) and the
 version store (/jcr:system/jcr:versionStore). those 2 VISP are added to the
 SISM during initialization of a workspace. i.e. they are 'mounted' to all
 workspaces. we assume, that VISP cannot be added dynamically, neither during
 runtime nor by configuration.
 <p/>
 The states from the VISP are read-only. by the exception for node references.
 remember that the referrers are stored in a <a href="../../../../../org/apache/jackrabbit/core/state/NodeReferences.html" title="class in org.apache.jackrabbit.core.state"><code>NodeReferences</code></a> state,
 having the ID of the target state.
 <br/>
 there are 5 types of referential relations to be distinguished:
 <ol>
 <li> normal --> normal (references from 'normal' states to 'normal' states)
      this is the normal case and will be handled by the SISM.

 <li> normal --> virtual (references from 'normal' states to 'virtual' states)
      those references should be handled by the VISP rather by the SISM.

 <li> virtual --> normal (references from 'virtual' states to 'normal' states)
      such references are not supported. eg. references of versioned nodes do
      not impose any constraints on the referenced nodes.

 <li> virtual --> virtual (references from 'virtual' states to 'virtual'
      states of the same VISP).
      intra-virtual references are handled by the item state manager of the VISP.

 <li> virtual --> virtual' (references from 'virtual' states to 'virtual'
      states of different VISP).
      those do currently not occur and are therefore not supported.
 </ol>
 <p/>
 if VISP are not dynamic, there is not risk that NV-type references can dangle
 (since a VISP cannot be 'unmounted', leaving eventual references dangling).
 although multi-workspace-referrers are not explicitly supported, the
 architecture of <code>NodeReferences</code> support multiple referrers with
 the same PropertyId. So the number of references can be tracked (an example
 of multi-workspace-referrers is a version referenced by the jcr:baseVersion
 of several (corresponding) nodes in multiple workspaces).
 <br/>
 As mentioned, VN-type references should not impose any constraints on the
 referrers (e.g. a normal node referenced by a versioned reference property).
 In case of the version store, the VN-type references are not stored at
 all, but reinforced as NN-type references in the normal states in case of a
 checkout operation.
 <br/>
 VV-type references should be handled by the respective VISP. they look as
 NN-type references in the scope if the VISP anyway...so no special treatment
 should be necessary.
 <br/>
 VV'-type references are currently not possible, since the version store and
 virtual node type representation don't allow such references.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#SharedItemStateManager(org.apache.jackrabbit.core.persistence.PersistenceManager, org.apache.jackrabbit.core.id.NodeId, org.apache.jackrabbit.core.nodetype.NodeTypeRegistry, boolean, org.apache.jackrabbit.core.state.ItemStateCacheFactory, org.apache.jackrabbit.core.state.ISMLocking, org.apache.jackrabbit.core.id.NodeIdFactory)">SharedItemStateManager</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/persistence/PersistenceManager.html" title="interface in org.apache.jackrabbit.core.persistence">PersistenceManager</a>&nbsp;persistMgr,
                      <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;rootNodeId,
                      <a href="../../../../../org/apache/jackrabbit/core/nodetype/NodeTypeRegistry.html" title="class in org.apache.jackrabbit.core.nodetype">NodeTypeRegistry</a>&nbsp;ntReg,
                      boolean&nbsp;usesReferences,
                      <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateCacheFactory.html" title="interface in org.apache.jackrabbit.core.state">ItemStateCacheFactory</a>&nbsp;cacheFactory,
                      <a href="../../../../../org/apache/jackrabbit/core/state/ISMLocking.html" title="interface in org.apache.jackrabbit.core.state">ISMLocking</a>&nbsp;locking,
                      <a href="../../../../../org/apache/jackrabbit/core/id/NodeIdFactory.html" title="class in org.apache.jackrabbit.core.id">NodeIdFactory</a>&nbsp;nodeIdFactory)</code>
<div class="block">Creates a new <code>SharedItemStateManager</code> instance.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#addListener(org.apache.jackrabbit.core.state.ItemStateListener)">addListener</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</a>&nbsp;listener)</code>
<div class="block">Add an <code>ItemStateListener</code></div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#addVirtualItemStateProvider(org.apache.jackrabbit.core.virtual.VirtualItemStateProvider)">addVirtualItemStateProvider</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html" title="interface in org.apache.jackrabbit.core.virtual">VirtualItemStateProvider</a>&nbsp;prov)</code>
<div class="block">Adds a new virtual item state provider.<p/>
 NOTE: This method is not synchronized, because it is called right after
 creation only by the same thread and therefore concurrency issues
 do not occur.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>org.apache.jackrabbit.core.state.SharedItemStateManager.Update</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#beginUpdate(org.apache.jackrabbit.core.state.ChangeLog, org.apache.jackrabbit.core.observation.EventStateCollectionFactory, org.apache.jackrabbit.core.virtual.VirtualItemStateProvider)">beginUpdate</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/state/ChangeLog.html" title="class in org.apache.jackrabbit.core.state">ChangeLog</a>&nbsp;local,
           <a href="../../../../../org/apache/jackrabbit/core/observation/EventStateCollectionFactory.html" title="interface in org.apache.jackrabbit.core.observation">EventStateCollectionFactory</a>&nbsp;factory,
           <a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html" title="interface in org.apache.jackrabbit.core.virtual">VirtualItemStateProvider</a>&nbsp;virtualProvider)</code>
<div class="block">Begin update operation.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#dispose()">dispose</a></strong>()</code>
<div class="block">Disposes this <code>SharedItemStateManager</code> and frees resources.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#doExternalUpdate(org.apache.jackrabbit.core.state.ChangeLog)">doExternalUpdate</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/state/ChangeLog.html" title="class in org.apache.jackrabbit.core.state">ChangeLog</a>&nbsp;external)</code>
<div class="block">Perform the external update.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#externalUpdate(org.apache.jackrabbit.core.state.ChangeLog, org.apache.jackrabbit.core.observation.EventStateCollection)">externalUpdate</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/state/ChangeLog.html" title="class in org.apache.jackrabbit.core.state">ChangeLog</a>&nbsp;external,
              <a href="../../../../../org/apache/jackrabbit/core/observation/EventStateCollection.html" title="class in org.apache.jackrabbit.core.observation">EventStateCollection</a>&nbsp;events)</code>
<div class="block">Handle an external update.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#getItemState(org.apache.jackrabbit.core.id.ItemId)">getItemState</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/ItemId.html" title="interface in org.apache.jackrabbit.core.id">ItemId</a>&nbsp;id)</code>
<div class="block">Return an item state, given its item id.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/id/NodeIdFactory.html" title="class in org.apache.jackrabbit.core.id">NodeIdFactory</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#getNodeIdFactory()">getNodeIdFactory</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/state/NodeReferences.html" title="class in org.apache.jackrabbit.core.state">NodeReferences</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#getNodeReferences(org.apache.jackrabbit.core.id.NodeId)">getNodeReferences</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Return a node references object, given its target id</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#hasItemState(org.apache.jackrabbit.core.id.ItemId)">hasItemState</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/ItemId.html" title="interface in org.apache.jackrabbit.core.id">ItemId</a>&nbsp;id)</code>
<div class="block">Return a flag indicating whether an item state for a given
 item id exists.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#hasNodeReferences(org.apache.jackrabbit.core.id.NodeId)">hasNodeReferences</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Return a flag indicating whether a node references object
 for a given target id exists.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#hasNonVirtualItemState(org.apache.jackrabbit.core.id.ItemId)">hasNonVirtualItemState</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/ItemId.html" title="interface in org.apache.jackrabbit.core.id">ItemId</a>&nbsp;id)</code>
<div class="block">Checks if this item state manager has the given item state without
 considering the virtual item state managers.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#removeListener(org.apache.jackrabbit.core.state.ItemStateListener)">removeListener</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</a>&nbsp;listener)</code>
<div class="block">Remove an <code>ItemStateListener</code></div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#setCheckReferences(boolean)">setCheckReferences</a></strong>(boolean&nbsp;checkReferences)</code>
<div class="block">Enables or disables the referential integrity checking, this
 should be used very carefully by experienced developers only.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#setEventChannel(org.apache.jackrabbit.core.cluster.UpdateEventChannel)">setEventChannel</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/cluster/UpdateEventChannel.html" title="interface in org.apache.jackrabbit.core.cluster">UpdateEventChannel</a>&nbsp;eventChannel)</code>
<div class="block">Set an update event channel</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#setISMLocking(org.apache.jackrabbit.core.state.ISMLocking)">setISMLocking</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/state/ISMLocking.html" title="interface in org.apache.jackrabbit.core.state">ISMLocking</a>&nbsp;ismLocking)</code>
<div class="block">Sets a new locking strategy.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#stateCreated(org.apache.jackrabbit.core.state.ItemState)">stateCreated</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</a>&nbsp;created)</code>
<div class="block">Called when an <code>ItemState</code> has successfully
 been created (i.e.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#stateDestroyed(org.apache.jackrabbit.core.state.ItemState)">stateDestroyed</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</a>&nbsp;destroyed)</code>
<div class="block">Called when an <code>ItemState</code> has successfully been
 removed (i.e.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#stateDiscarded(org.apache.jackrabbit.core.state.ItemState)">stateDiscarded</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</a>&nbsp;discarded)</code>
<div class="block">Called when an <code>ItemState</code> has been discarded (i.e.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#stateModified(org.apache.jackrabbit.core.state.ItemState)">stateModified</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</a>&nbsp;modified)</code>
<div class="block">Called when an <code>ItemState</code> has successfully
 been modified (i.e.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#toString()">toString</a></strong>()</code></td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html#update(org.apache.jackrabbit.core.state.ChangeLog, org.apache.jackrabbit.core.observation.EventStateCollectionFactory)">update</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/state/ChangeLog.html" title="class in org.apache.jackrabbit.core.state">ChangeLog</a>&nbsp;local,
      <a href="../../../../../org/apache/jackrabbit/core/observation/EventStateCollectionFactory.html" title="interface in org.apache.jackrabbit.core.observation">EventStateCollectionFactory</a>&nbsp;factory)</code>
<div class="block">Store modifications registered in a <code>ChangeLog</code>.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="SharedItemStateManager(org.apache.jackrabbit.core.persistence.PersistenceManager, org.apache.jackrabbit.core.id.NodeId, org.apache.jackrabbit.core.nodetype.NodeTypeRegistry, boolean, org.apache.jackrabbit.core.state.ItemStateCacheFactory, org.apache.jackrabbit.core.state.ISMLocking, org.apache.jackrabbit.core.id.NodeIdFactory)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SharedItemStateManager</h4>
<pre>public&nbsp;SharedItemStateManager(<a href="../../../../../org/apache/jackrabbit/core/persistence/PersistenceManager.html" title="interface in org.apache.jackrabbit.core.persistence">PersistenceManager</a>&nbsp;persistMgr,
                      <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;rootNodeId,
                      <a href="../../../../../org/apache/jackrabbit/core/nodetype/NodeTypeRegistry.html" title="class in org.apache.jackrabbit.core.nodetype">NodeTypeRegistry</a>&nbsp;ntReg,
                      boolean&nbsp;usesReferences,
                      <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateCacheFactory.html" title="interface in org.apache.jackrabbit.core.state">ItemStateCacheFactory</a>&nbsp;cacheFactory,
                      <a href="../../../../../org/apache/jackrabbit/core/state/ISMLocking.html" title="interface in org.apache.jackrabbit.core.state">ISMLocking</a>&nbsp;locking,
                      <a href="../../../../../org/apache/jackrabbit/core/id/NodeIdFactory.html" title="class in org.apache.jackrabbit.core.id">NodeIdFactory</a>&nbsp;nodeIdFactory)
                       throws <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</a></pre>
<div class="block">Creates a new <code>SharedItemStateManager</code> instance.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>persistMgr</code> - </dd><dd><code>rootNodeId</code> - </dd><dd><code>ntReg</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setCheckReferences(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setCheckReferences</h4>
<pre>public&nbsp;void&nbsp;setCheckReferences(boolean&nbsp;checkReferences)</pre>
<div class="block">Enables or disables the referential integrity checking, this
 should be used very carefully by experienced developers only.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>checkReferences</code> - whether to do referential integrity checks</dd><dt><span class="strong">See Also:</span></dt><dd>"https://issues.apache.org/jira/browse/JCR-954"</dd></dl>
</li>
</ul>
<a name="setEventChannel(org.apache.jackrabbit.core.cluster.UpdateEventChannel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setEventChannel</h4>
<pre>public&nbsp;void&nbsp;setEventChannel(<a href="../../../../../org/apache/jackrabbit/core/cluster/UpdateEventChannel.html" title="interface in org.apache.jackrabbit.core.cluster">UpdateEventChannel</a>&nbsp;eventChannel)</pre>
<div class="block">Set an update event channel</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>eventChannel</code> - update event channel</dd></dl>
</li>
</ul>
<a name="setISMLocking(org.apache.jackrabbit.core.state.ISMLocking)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setISMLocking</h4>
<pre>public&nbsp;void&nbsp;setISMLocking(<a href="../../../../../org/apache/jackrabbit/core/state/ISMLocking.html" title="interface in org.apache.jackrabbit.core.state">ISMLocking</a>&nbsp;ismLocking)</pre>
<div class="block">Sets a new locking strategy.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>ismLocking</code> - the locking strategy for this item state manager.</dd></dl>
</li>
</ul>
<a name="getItemState(org.apache.jackrabbit.core.id.ItemId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getItemState</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</a>&nbsp;getItemState(<a href="../../../../../org/apache/jackrabbit/core/id/ItemId.html" title="interface in org.apache.jackrabbit.core.id">ItemId</a>&nbsp;id)
                       throws <a href="../../../../../org/apache/jackrabbit/core/state/NoSuchItemStateException.html" title="class in org.apache.jackrabbit.core.state">NoSuchItemStateException</a>,
                              <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</a></pre>
<div class="block">Return an item state, given its item id.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html#getItemState(org.apache.jackrabbit.core.id.ItemId)">getItemState</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html" title="interface in org.apache.jackrabbit.core.state">ItemStateManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - item id</dd>
<dt><span class="strong">Returns:</span></dt><dd>item state</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/NoSuchItemStateException.html" title="class in org.apache.jackrabbit.core.state">NoSuchItemStateException</a></code> - if the item does not exist</dd>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="hasItemState(org.apache.jackrabbit.core.id.ItemId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasItemState</h4>
<pre>public&nbsp;boolean&nbsp;hasItemState(<a href="../../../../../org/apache/jackrabbit/core/id/ItemId.html" title="interface in org.apache.jackrabbit.core.id">ItemId</a>&nbsp;id)</pre>
<div class="block">Return a flag indicating whether an item state for a given
 item id exists.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html#hasItemState(org.apache.jackrabbit.core.id.ItemId)">hasItemState</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html" title="interface in org.apache.jackrabbit.core.state">ItemStateManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - item id</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if an item state exists,
         otherwise <code>false</code></dd></dl>
</li>
</ul>
<a name="getNodeReferences(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNodeReferences</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/state/NodeReferences.html" title="class in org.apache.jackrabbit.core.state">NodeReferences</a>&nbsp;getNodeReferences(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)
                                 throws <a href="../../../../../org/apache/jackrabbit/core/state/NoSuchItemStateException.html" title="class in org.apache.jackrabbit.core.state">NoSuchItemStateException</a>,
                                        <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</a></pre>
<div class="block">Return a node references object, given its target id</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html#getNodeReferences(org.apache.jackrabbit.core.id.NodeId)">getNodeReferences</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html" title="interface in org.apache.jackrabbit.core.state">ItemStateManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - target id</dd>
<dt><span class="strong">Returns:</span></dt><dd>node references object</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/NoSuchItemStateException.html" title="class in org.apache.jackrabbit.core.state">NoSuchItemStateException</a></code> - if the item does not exist</dd>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="hasNodeReferences(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasNodeReferences</h4>
<pre>public&nbsp;boolean&nbsp;hasNodeReferences(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</pre>
<div class="block">Return a flag indicating whether a node references object
 for a given target id exists.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html#hasNodeReferences(org.apache.jackrabbit.core.id.NodeId)">hasNodeReferences</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateManager.html" title="interface in org.apache.jackrabbit.core.state">ItemStateManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - target id</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if a node reference object exists for the given
         id, otherwise <code>false</code>.</dd></dl>
</li>
</ul>
<a name="stateCreated(org.apache.jackrabbit.core.state.ItemState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stateCreated</h4>
<pre>public&nbsp;void&nbsp;stateCreated(<a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</a>&nbsp;created)</pre>
<div class="block">Called when an <code>ItemState</code> has successfully
 been created (i.e. its underlying persistent state was created).
 <p/>
 Notifications are received for items that this manager created itself or items that are
 managed by one of the virtual providers.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html#stateCreated(org.apache.jackrabbit.core.state.ItemState)">stateCreated</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>created</code> - the <code>ItemState</code> that has been 'created'</dd></dl>
</li>
</ul>
<a name="stateModified(org.apache.jackrabbit.core.state.ItemState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stateModified</h4>
<pre>public&nbsp;void&nbsp;stateModified(<a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</a>&nbsp;modified)</pre>
<div class="block">Called when an <code>ItemState</code> has successfully
 been modified (i.e. its underlying persistent state has changed).
 <p/>
 Notifications are received for items that this manager created itself or items that are
 managed by one of the virtual providers.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html#stateModified(org.apache.jackrabbit.core.state.ItemState)">stateModified</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>modified</code> - the <code>ItemState</code> that has been 'modified'</dd></dl>
</li>
</ul>
<a name="stateDestroyed(org.apache.jackrabbit.core.state.ItemState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stateDestroyed</h4>
<pre>public&nbsp;void&nbsp;stateDestroyed(<a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</a>&nbsp;destroyed)</pre>
<div class="block">Called when an <code>ItemState</code> has successfully been
 removed (i.e. its underlying persistent state has been destroyed).
 <p/>
 Notifications are received for items that this manager created itself or items that are
 managed by one of the virtual providers.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html#stateDestroyed(org.apache.jackrabbit.core.state.ItemState)">stateDestroyed</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>destroyed</code> - the <code>ItemState</code> that has been 'destroyed'</dd></dl>
</li>
</ul>
<a name="stateDiscarded(org.apache.jackrabbit.core.state.ItemState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stateDiscarded</h4>
<pre>public&nbsp;void&nbsp;stateDiscarded(<a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</a>&nbsp;discarded)</pre>
<div class="block">Called when an <code>ItemState</code> has been discarded (i.e. it has
 been rendered 'invalid').
 <p/>
 Notifications are received for items that this manager created itself or items that are
 managed by one of the virtual providers.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html#stateDiscarded(org.apache.jackrabbit.core.state.ItemState)">stateDiscarded</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>discarded</code> - the <code>ItemState</code> that has been discarded</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html#discard()"><code>ItemState.discard()</code></a></dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="dispose()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dispose</h4>
<pre>public&nbsp;void&nbsp;dispose()</pre>
<div class="block">Disposes this <code>SharedItemStateManager</code> and frees resources.</div>
</li>
</ul>
<a name="addVirtualItemStateProvider(org.apache.jackrabbit.core.virtual.VirtualItemStateProvider)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addVirtualItemStateProvider</h4>
<pre>public&nbsp;void&nbsp;addVirtualItemStateProvider(<a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html" title="interface in org.apache.jackrabbit.core.virtual">VirtualItemStateProvider</a>&nbsp;prov)</pre>
<div class="block">Adds a new virtual item state provider.<p/>
 NOTE: This method is not synchronized, because it is called right after
 creation only by the same thread and therefore concurrency issues
 do not occur. Should this ever change, the synchronization status
 has to be re-examined.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>prov</code> - </dd></dl>
</li>
</ul>
<a name="beginUpdate(org.apache.jackrabbit.core.state.ChangeLog, org.apache.jackrabbit.core.observation.EventStateCollectionFactory, org.apache.jackrabbit.core.virtual.VirtualItemStateProvider)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>beginUpdate</h4>
<pre>public&nbsp;org.apache.jackrabbit.core.state.SharedItemStateManager.Update&nbsp;beginUpdate(<a href="../../../../../org/apache/jackrabbit/core/state/ChangeLog.html" title="class in org.apache.jackrabbit.core.state">ChangeLog</a>&nbsp;local,
                                                                         <a href="../../../../../org/apache/jackrabbit/core/observation/EventStateCollectionFactory.html" title="interface in org.apache.jackrabbit.core.observation">EventStateCollectionFactory</a>&nbsp;factory,
                                                                         <a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html" title="interface in org.apache.jackrabbit.core.virtual">VirtualItemStateProvider</a>&nbsp;virtualProvider)
                                                                           throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/ReferentialIntegrityException.html?is-external=true" title="class or interface in javax.jcr">ReferentialIntegrityException</a>,
                                                                                  <a href="../../../../../org/apache/jackrabbit/core/state/StaleItemStateException.html" title="class in org.apache.jackrabbit.core.state">StaleItemStateException</a>,
                                                                                  <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</a></pre>
<div class="block">Begin update operation. This will return an object that can itself be
 ended/canceled.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/ReferentialIntegrityException.html?is-external=true" title="class or interface in javax.jcr">ReferentialIntegrityException</a></code></dd>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/StaleItemStateException.html" title="class in org.apache.jackrabbit.core.state">StaleItemStateException</a></code></dd>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</a></code></dd></dl>
</li>
</ul>
<a name="update(org.apache.jackrabbit.core.state.ChangeLog, org.apache.jackrabbit.core.observation.EventStateCollectionFactory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre>public&nbsp;void&nbsp;update(<a href="../../../../../org/apache/jackrabbit/core/state/ChangeLog.html" title="class in org.apache.jackrabbit.core.state">ChangeLog</a>&nbsp;local,
          <a href="../../../../../org/apache/jackrabbit/core/observation/EventStateCollectionFactory.html" title="interface in org.apache.jackrabbit.core.observation">EventStateCollectionFactory</a>&nbsp;factory)
            throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/ReferentialIntegrityException.html?is-external=true" title="class or interface in javax.jcr">ReferentialIntegrityException</a>,
                   <a href="../../../../../org/apache/jackrabbit/core/state/StaleItemStateException.html" title="class in org.apache.jackrabbit.core.state">StaleItemStateException</a>,
                   <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</a></pre>
<div class="block">Store modifications registered in a <code>ChangeLog</code>. The items
 contained in the <tt>ChangeLog</tt> are not states returned by this
 item state manager but rather must be reconnected to items provided
 by this state manager.<p/>
 After successfully storing the states the observation manager is informed
 about the changes, if an observation manager is passed to this method.<p/>
 NOTE: This method is not synchronized, because all methods it invokes
 on instance members (such as <a href="../../../../../org/apache/jackrabbit/core/persistence/PersistenceManager.html#store(org.apache.jackrabbit.core.state.ChangeLog)"><code>PersistenceManager.store(org.apache.jackrabbit.core.state.ChangeLog)</code></a> are
 considered to be thread-safe. Should this ever change, the
 synchronization status has to be re-examined.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>local</code> - change log containing local items</dd><dd><code>factory</code> - event state collection factory</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/ReferentialIntegrityException.html?is-external=true" title="class or interface in javax.jcr">ReferentialIntegrityException</a></code> - if a new or modified REFERENCE
                                       property refers to a non-existent
                                       target or if a removed node is still
                                       being referenced</dd>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/StaleItemStateException.html" title="class in org.apache.jackrabbit.core.state">StaleItemStateException</a></code> - if at least one of the affected item
                                       states has become stale</dd>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</a></code> - if another error occurs</dd></dl>
</li>
</ul>
<a name="externalUpdate(org.apache.jackrabbit.core.state.ChangeLog, org.apache.jackrabbit.core.observation.EventStateCollection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>externalUpdate</h4>
<pre>public&nbsp;void&nbsp;externalUpdate(<a href="../../../../../org/apache/jackrabbit/core/state/ChangeLog.html" title="class in org.apache.jackrabbit.core.state">ChangeLog</a>&nbsp;external,
                  <a href="../../../../../org/apache/jackrabbit/core/observation/EventStateCollection.html" title="class in org.apache.jackrabbit.core.observation">EventStateCollection</a>&nbsp;events)</pre>
<div class="block">Handle an external update.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>external</code> - external change containing only node and property ids.</dd><dd><code>events</code> - events to deliver</dd></dl>
</li>
</ul>
<a name="doExternalUpdate(org.apache.jackrabbit.core.state.ChangeLog)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doExternalUpdate</h4>
<pre>protected&nbsp;void&nbsp;doExternalUpdate(<a href="../../../../../org/apache/jackrabbit/core/state/ChangeLog.html" title="class in org.apache.jackrabbit.core.state">ChangeLog</a>&nbsp;external)</pre>
<div class="block">Perform the external update. While executing this method, the
 <code>writeLock</code> on this manager is held.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>external</code> - external change containing only node and property ids.</dd></dl>
</li>
</ul>
<a name="addListener(org.apache.jackrabbit.core.state.ItemStateListener)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addListener</h4>
<pre>public&nbsp;void&nbsp;addListener(<a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</a>&nbsp;listener)</pre>
<div class="block">Add an <code>ItemStateListener</code></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>listener</code> - the new listener to be informed on modifications</dd></dl>
</li>
</ul>
<a name="removeListener(org.apache.jackrabbit.core.state.ItemStateListener)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeListener</h4>
<pre>public&nbsp;void&nbsp;removeListener(<a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</a>&nbsp;listener)</pre>
<div class="block">Remove an <code>ItemStateListener</code></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>listener</code> - an existing listener</dd></dl>
</li>
</ul>
<a name="hasNonVirtualItemState(org.apache.jackrabbit.core.id.ItemId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasNonVirtualItemState</h4>
<pre>protected&nbsp;boolean&nbsp;hasNonVirtualItemState(<a href="../../../../../org/apache/jackrabbit/core/id/ItemId.html" title="interface in org.apache.jackrabbit.core.id">ItemId</a>&nbsp;id)</pre>
<div class="block">Checks if this item state manager has the given item state without
 considering the virtual item state managers.</div>
</li>
</ul>
<a name="getNodeIdFactory()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getNodeIdFactory</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/id/NodeIdFactory.html" title="class in org.apache.jackrabbit.core.id">NodeIdFactory</a>&nbsp;getNodeIdFactory()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SharedItemStateManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/jackrabbit/core/state/SessionItemStateManager.html" title="class in org.apache.jackrabbit.core.state"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/jackrabbit/core/state/StaleItemStateException.html" title="class in org.apache.jackrabbit.core.state"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/jackrabbit/core/state/SharedItemStateManager.html" target="_top">Frames</a></li>
<li><a href="SharedItemStateManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2004-2012 <a href="http://www.apache.org/">The Apache Software Foundation</a>. All Rights Reserved.</small></p>
</body>
</html>
