<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_02) on Tue Feb 21 16:02:04 CET 2012 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>InternalVersionManagerImpl (Apache Jackrabbit 2.4.0 API)</title>
<meta name="date" content="2012-02-21">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="InternalVersionManagerImpl (Apache Jackrabbit 2.4.0 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/InternalVersionManagerImpl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.DynamicESCFactory.html" title="class in org.apache.jackrabbit.core.version"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html" target="_top">Frames</a></li>
<li><a href="InternalVersionManagerImpl.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.jackrabbit.core.version</div>
<h2 title="Class InternalVersionManagerImpl" class="title">Class InternalVersionManagerImpl</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.jackrabbit.core.version.InternalVersionManagerImpl</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../org/apache/jackrabbit/core/cluster/UpdateEventListener.html" title="interface in org.apache.jackrabbit.core.cluster">UpdateEventListener</a>, <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</a>, <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">InternalVersionManagerImpl</span>
extends <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</a>, <a href="../../../../../org/apache/jackrabbit/core/cluster/UpdateEventListener.html" title="interface in org.apache.jackrabbit.core.cluster">UpdateEventListener</a></pre>
<div class="block">This Class implements a VersionManager.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.DynamicESCFactory.html" title="class in org.apache.jackrabbit.core.version">InternalVersionManagerImpl.DynamicESCFactory</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#activitiesId">activitiesId</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#historiesId">historiesId</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/nodetype/NodeTypeRegistry.html" title="class in org.apache.jackrabbit.core.nodetype">NodeTypeRegistry</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#ntReg">ntReg</a></strong></code>
<div class="block">Node type registry.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html" title="class in org.apache.jackrabbit.core.state">LocalItemStateManager</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#stateMgr">stateMgr</a></strong></code>
<div class="block">State manager for the version storage.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#InternalVersionManagerImpl(org.apache.jackrabbit.core.persistence.PersistenceManager, org.apache.jackrabbit.core.fs.FileSystem, org.apache.jackrabbit.core.nodetype.NodeTypeRegistry, org.apache.jackrabbit.core.observation.DelegatingObservationDispatcher, org.apache.jackrabbit.core.id.NodeId, org.apache.jackrabbit.core.id.NodeId, org.apache.jackrabbit.core.id.NodeId, org.apache.jackrabbit.core.state.ItemStateCacheFactory, org.apache.jackrabbit.core.state.ISMLocking, org.apache.jackrabbit.core.id.NodeIdFactory)">InternalVersionManagerImpl</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/persistence/PersistenceManager.html" title="interface in org.apache.jackrabbit.core.persistence">PersistenceManager</a>&nbsp;pMgr,
                          <a href="../../../../../org/apache/jackrabbit/core/fs/FileSystem.html" title="interface in org.apache.jackrabbit.core.fs">FileSystem</a>&nbsp;fs,
                          <a href="../../../../../org/apache/jackrabbit/core/nodetype/NodeTypeRegistry.html" title="class in org.apache.jackrabbit.core.nodetype">NodeTypeRegistry</a>&nbsp;ntReg,
                          <a href="../../../../../org/apache/jackrabbit/core/observation/DelegatingObservationDispatcher.html" title="class in org.apache.jackrabbit.core.observation">DelegatingObservationDispatcher</a>&nbsp;obsMgr,
                          <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;systemId,
                          <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;historiesId,
                          <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;activitiesId,
                          <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateCacheFactory.html" title="interface in org.apache.jackrabbit.core.state">ItemStateCacheFactory</a>&nbsp;cacheFactory,
                          <a href="../../../../../org/apache/jackrabbit/core/state/ISMLocking.html" title="interface in org.apache.jackrabbit.core.state">ISMLocking</a>&nbsp;ismLocking,
                          <a href="../../../../../org/apache/jackrabbit/core/id/NodeIdFactory.html" title="class in org.apache.jackrabbit.core.id">NodeIdFactory</a>&nbsp;nodeIdFactory)</code>
<div class="block">Creates a new internal version manager</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/VersioningLock.ReadLock.html" title="class in org.apache.jackrabbit.core.version">VersioningLock.ReadLock</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#acquireReadLock()">acquireReadLock</a></strong>()</code>
<div class="block">acquires the read lock on this version manager.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/version/VersioningLock.WriteLock.html" title="class in org.apache.jackrabbit.core.version">VersioningLock.WriteLock</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#acquireWriteLock()">acquireWriteLock</a></strong>()</code>
<div class="block">Acquires the write lock on this version manager.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#calculateCheckinVersionName(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl, org.apache.jackrabbit.core.version.NodeStateEx, boolean)">calculateCheckinVersionName</a></strong>(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl&nbsp;history,
                           <a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;node,
                           boolean&nbsp;simple)</code>
<div class="block">Calculates the name of the new version that will be created by a
 checkin call.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#canCheckout(org.apache.jackrabbit.core.version.NodeStateEx, org.apache.jackrabbit.core.id.NodeId)">canCheckout</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;state,
           <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;activityId)</code>
<div class="block">invokes the checkout() on the persistent version manager.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#checkin(org.apache.jackrabbit.core.version.NodeStateEx, java.util.Calendar)">checkin</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;node,
       <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html?is-external=true" title="class or interface in java.util">Calendar</a>&nbsp;created)</code>
<div class="block">Creates a new version of the given node using the given version
 creation time.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#checkin(javax.jcr.Session, org.apache.jackrabbit.core.version.NodeStateEx, java.util.Calendar)">checkin</a></strong>(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
       <a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;node,
       <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html?is-external=true" title="class or interface in java.util">Calendar</a>&nbsp;created)</code>
<div class="block">invokes the checkin() on the persistent version manager and remaps the
 newly created version objects.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#close()">close</a></strong>()</code>
<div class="block">Close this version manager.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#createActivity(javax.jcr.Session, java.lang.String)">createActivity</a></strong>(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
              <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;title)</code>
<div class="block">Creates a new activity</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionItem.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionItem</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#createInternalVersionItem(org.apache.jackrabbit.core.id.NodeId)">createInternalVersionItem</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Creates an <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionItem.html" title="interface in org.apache.jackrabbit.core.version"><code>InternalVersionItem</code></a> based on the <a href="../../../../../org/apache/jackrabbit/core/state/NodeState.html" title="class in org.apache.jackrabbit.core.state"><code>NodeState</code></a>
 identified by <code>id</code>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/version/VersionItemStateManager.html" title="class in org.apache.jackrabbit.core.version">VersionItemStateManager</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#createItemStateManager(org.apache.jackrabbit.core.persistence.PersistenceManager, org.apache.jackrabbit.core.id.NodeId, org.apache.jackrabbit.core.nodetype.NodeTypeRegistry, org.apache.jackrabbit.core.state.ItemStateCacheFactory, org.apache.jackrabbit.core.state.ISMLocking, org.apache.jackrabbit.core.id.NodeIdFactory)">createItemStateManager</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/persistence/PersistenceManager.html" title="interface in org.apache.jackrabbit.core.persistence">PersistenceManager</a>&nbsp;pMgr,
                      <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;rootId,
                      <a href="../../../../../org/apache/jackrabbit/core/nodetype/NodeTypeRegistry.html" title="class in org.apache.jackrabbit.core.nodetype">NodeTypeRegistry</a>&nbsp;ntReg,
                      <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateCacheFactory.html" title="interface in org.apache.jackrabbit.core.state">ItemStateCacheFactory</a>&nbsp;cacheFactory,
                      <a href="../../../../../org/apache/jackrabbit/core/state/ISMLocking.html" title="interface in org.apache.jackrabbit.core.state">ISMLocking</a>&nbsp;ismLocking,
                      <a href="../../../../../org/apache/jackrabbit/core/id/NodeIdFactory.html" title="class in org.apache.jackrabbit.core.id">NodeIdFactory</a>&nbsp;nodeIdFactory)</code>
<div class="block">Creates a <code>VersionItemStateManager</code> or derivative.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/version/VersionHistoryInfo.html" title="class in org.apache.jackrabbit.core.version">VersionHistoryInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#createVersionHistory(javax.jcr.Session, org.apache.jackrabbit.core.state.NodeState, org.apache.jackrabbit.core.id.NodeId)">createVersionHistory</a></strong>(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
                    <a href="../../../../../org/apache/jackrabbit/core/state/NodeState.html" title="class in org.apache.jackrabbit.core.state">NodeState</a>&nbsp;node,
                    <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;copiedFrom)</code>
<div class="block">Creates a new version history.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#externalUpdate(org.apache.jackrabbit.core.state.ChangeLog, java.util.List, long, java.lang.String)">externalUpdate</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/state/ChangeLog.html" title="class in org.apache.jackrabbit.core.state">ChangeLog</a>&nbsp;changes,
              <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../org/apache/jackrabbit/core/observation/EventState.html" title="class in org.apache.jackrabbit.core.observation">EventState</a>&gt;&nbsp;events,
              long&nbsp;timestamp,
              <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;userData)</code>
<div class="block">Handle an external update.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#getActivitiesRoot()">getActivitiesRoot</a></strong>()</code>
<div class="block">returns the activities root node</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalActivity.html" title="interface in org.apache.jackrabbit.core.version">InternalActivity</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#getActivity(org.apache.jackrabbit.core.id.NodeId)">getActivity</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Returns the activity with the given id</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalBaseline.html" title="interface in org.apache.jackrabbit.core.version">InternalBaseline</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#getBaseline(org.apache.jackrabbit.core.id.NodeId)">getBaseline</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Returns the baseline with the given id</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.DynamicESCFactory.html" title="class in org.apache.jackrabbit.core.version">InternalVersionManagerImpl.DynamicESCFactory</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#getEscFactory()">getEscFactory</a></strong>()</code>
<div class="block">Returns the event state collection factory.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#getHeadVersionOfNode(org.apache.jackrabbit.core.id.NodeId)">getHeadVersionOfNode</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Returns the head version of the node with the given id.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#getHistoryRoot()">getHistoryRoot</a></strong>()</code>
<div class="block">returns the version history root node</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionItem.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionItem</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#getItem(org.apache.jackrabbit.core.id.NodeId)">getItem</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Returns the item with the given persistent id.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#getName(java.lang.String)">getName</a></strong>(<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</code>
<div class="block">Utility method that returns the given string as a name in the default
 namespace.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/id/NodeIdFactory.html" title="class in org.apache.jackrabbit.core.id">NodeIdFactory</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#getNodeIdFactory()">getNodeIdFactory</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#getNodeStateEx(org.apache.jackrabbit.core.id.NodeId)">getNodeStateEx</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;parentNodeId)</code>
<div class="block">Returns the node with the given persistent id.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static <a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#getParentNode(org.apache.jackrabbit.core.version.NodeStateEx, java.lang.String, org.apache.jackrabbit.spi.Name)">getParentNode</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;parent,
             <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;uuid,
             <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;interNT)</code>
<div class="block">Utility method that returns the parent node under which the version
 history of the identified versionable node is or will be stored.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/persistence/PersistenceManager.html" title="interface in org.apache.jackrabbit.core.persistence">PersistenceManager</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#getPersistenceManager()">getPersistenceManager</a></strong>()</code>
<div class="block">Return the persistence manager.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html" title="class in org.apache.jackrabbit.core.state">SharedItemStateManager</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#getSharedStateMgr()">getSharedStateMgr</a></strong>()</code>
<div class="block">Returns the shared item state manager.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#getVersion(org.apache.jackrabbit.core.id.NodeId)">getVersion</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Returns the version with the given id</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionHistory.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionHistory</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#getVersionHistory(org.apache.jackrabbit.core.id.NodeId)">getVersionHistory</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Returns the version history with the given id</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/VersionHistoryInfo.html" title="class in org.apache.jackrabbit.core.version">VersionHistoryInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#getVersionHistory(javax.jcr.Session, org.apache.jackrabbit.core.state.NodeState, org.apache.jackrabbit.core.id.NodeId)">getVersionHistory</a></strong>(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
                 <a href="../../../../../org/apache/jackrabbit/core/state/NodeState.html" title="class in org.apache.jackrabbit.core.state">NodeState</a>&nbsp;node,
                 <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;copiedFrom)</code>
<div class="block">Returns information about the version history of the specified node.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/VersionHistoryInfo.html" title="class in org.apache.jackrabbit.core.version">VersionHistoryInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#getVersionHistoryInfoForNode(org.apache.jackrabbit.core.state.NodeState)">getVersionHistoryInfoForNode</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/state/NodeState.html" title="class in org.apache.jackrabbit.core.state">NodeState</a>&nbsp;node)</code>
<div class="block">Returns information about the version history of the specified node
 or <code>null</code> when unavailable.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionHistory.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionHistory</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#getVersionHistoryOfNode(org.apache.jackrabbit.core.id.NodeId)">getVersionHistoryOfNode</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Returns the version history for the versionable node with the given id.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html" title="interface in org.apache.jackrabbit.core.virtual">VirtualItemStateProvider</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#getVirtualItemStateProvider()">getVirtualItemStateProvider</a></strong>()</code>
<div class="block">returns the virtual item state provider that exposes the internal versions
 as items.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#hasItem(org.apache.jackrabbit.core.id.NodeId)">hasItem</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Return a flag indicating if the item specified exists.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#hasItemReferences(org.apache.jackrabbit.core.id.NodeId)">hasItemReferences</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</code>
<div class="block">Checks if there are item references (from outside the version storage)
 that reference the given node.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#internalCheckin(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl, org.apache.jackrabbit.core.version.NodeStateEx, boolean, java.util.Calendar)">internalCheckin</a></strong>(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl&nbsp;history,
               <a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;node,
               boolean&nbsp;simple,
               <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html?is-external=true" title="class or interface in java.util">Calendar</a>&nbsp;created)</code>
<div class="block">Checks in a node</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#internalRemoveActivity(org.apache.jackrabbit.core.version.InternalActivityImpl)">internalRemoveActivity</a></strong>(org.apache.jackrabbit.core.version.InternalActivityImpl&nbsp;activity)</code>
<div class="block">Removes the specified activity</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#internalRemoveVersion(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl, org.apache.jackrabbit.spi.Name)">internalRemoveVersion</a></strong>(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl&nbsp;history,
                     <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;name)</code>
<div class="block">Removes the specified version from the history</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#itemDiscarded(org.apache.jackrabbit.core.version.InternalVersionItem)">itemDiscarded</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionItem.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionItem</a>&nbsp;item)</code>
<div class="block">Invoked by the internal version item itself, when it's underlying
 persistence state was discarded.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#itemsUpdated(java.util.Collection)">itemsUpdated</a></strong>(<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionItem.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionItem</a>&gt;&nbsp;items)</code>
<div class="block">Invoked by some external source to indicate that some items in the
 versions tree were updated.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#removeActivity(javax.jcr.Session, org.apache.jackrabbit.core.id.NodeId)">removeActivity</a></strong>(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
              <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;nodeId)</code>
<div class="block">Removes an activity and all</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#removeVersion(javax.jcr.Session, org.apache.jackrabbit.core.version.InternalVersionHistory, org.apache.jackrabbit.spi.Name)">removeVersion</a></strong>(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
             <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionHistory.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionHistory</a>&nbsp;history,
             <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;name)</code>
<div class="block">Removes the specified version from the given version history.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#setEventChannel(org.apache.jackrabbit.core.cluster.UpdateEventChannel)">setEventChannel</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/cluster/UpdateEventChannel.html" title="interface in org.apache.jackrabbit.core.cluster">UpdateEventChannel</a>&nbsp;eventChannel)</code>
<div class="block">Set an event channel to inform about updates.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#setVersionLabel(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl, org.apache.jackrabbit.spi.Name, org.apache.jackrabbit.spi.Name, boolean)">setVersionLabel</a></strong>(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl&nbsp;history,
               <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;version,
               <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;label,
               boolean&nbsp;move)</code>
<div class="block">Set version label on the specified version.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#setVersionLabel(javax.jcr.Session, org.apache.jackrabbit.core.version.InternalVersionHistory, org.apache.jackrabbit.spi.Name, org.apache.jackrabbit.spi.Name, boolean)">setVersionLabel</a></strong>(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
               <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionHistory.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionHistory</a>&nbsp;history,
               <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;version,
               <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;label,
               boolean&nbsp;move)</code>
<div class="block">Sets the version <code>label</code> to the given <code>version</code>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#stateCreated(org.apache.jackrabbit.core.state.ItemState)">stateCreated</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</a>&nbsp;created)</code>
<div class="block">Called when an <code>ItemState</code> has successfully
 been created (i.e.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#stateDestroyed(org.apache.jackrabbit.core.state.ItemState)">stateDestroyed</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</a>&nbsp;destroyed)</code>
<div class="block">Called when an <code>ItemState</code> has successfully been
 removed (i.e.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#stateDiscarded(org.apache.jackrabbit.core.state.ItemState)">stateDiscarded</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</a>&nbsp;discarded)</code>
<div class="block">Called when an <code>ItemState</code> has been discarded (i.e.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#stateModified(org.apache.jackrabbit.core.state.ItemState)">stateModified</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</a>&nbsp;modified)</code>
<div class="block">Called when an <code>ItemState</code> has successfully
 been modified (i.e.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#versionCreated(org.apache.jackrabbit.core.version.InternalVersion)">versionCreated</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;version)</code>
<div class="block">Invoked when a new internal item has been created.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#versionDestroyed(org.apache.jackrabbit.core.version.InternalVersion)">versionDestroyed</a></strong>(<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;version)</code>
<div class="block">Invoked when a new internal item has been destroyed.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="stateMgr">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stateMgr</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/state/LocalItemStateManager.html" title="class in org.apache.jackrabbit.core.state">LocalItemStateManager</a> stateMgr</pre>
<div class="block">State manager for the version storage.</div>
</li>
</ul>
<a name="ntReg">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ntReg</h4>
<pre>protected final&nbsp;<a href="../../../../../org/apache/jackrabbit/core/nodetype/NodeTypeRegistry.html" title="class in org.apache.jackrabbit.core.nodetype">NodeTypeRegistry</a> ntReg</pre>
<div class="block">Node type registry.</div>
</li>
</ul>
<a name="historiesId">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>historiesId</h4>
<pre>protected final&nbsp;<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a> historiesId</pre>
</li>
</ul>
<a name="activitiesId">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>activitiesId</h4>
<pre>protected final&nbsp;<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a> activitiesId</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="InternalVersionManagerImpl(org.apache.jackrabbit.core.persistence.PersistenceManager, org.apache.jackrabbit.core.fs.FileSystem, org.apache.jackrabbit.core.nodetype.NodeTypeRegistry, org.apache.jackrabbit.core.observation.DelegatingObservationDispatcher, org.apache.jackrabbit.core.id.NodeId, org.apache.jackrabbit.core.id.NodeId, org.apache.jackrabbit.core.id.NodeId, org.apache.jackrabbit.core.state.ItemStateCacheFactory, org.apache.jackrabbit.core.state.ISMLocking, org.apache.jackrabbit.core.id.NodeIdFactory)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>InternalVersionManagerImpl</h4>
<pre>public&nbsp;InternalVersionManagerImpl(<a href="../../../../../org/apache/jackrabbit/core/persistence/PersistenceManager.html" title="interface in org.apache.jackrabbit.core.persistence">PersistenceManager</a>&nbsp;pMgr,
                          <a href="../../../../../org/apache/jackrabbit/core/fs/FileSystem.html" title="interface in org.apache.jackrabbit.core.fs">FileSystem</a>&nbsp;fs,
                          <a href="../../../../../org/apache/jackrabbit/core/nodetype/NodeTypeRegistry.html" title="class in org.apache.jackrabbit.core.nodetype">NodeTypeRegistry</a>&nbsp;ntReg,
                          <a href="../../../../../org/apache/jackrabbit/core/observation/DelegatingObservationDispatcher.html" title="class in org.apache.jackrabbit.core.observation">DelegatingObservationDispatcher</a>&nbsp;obsMgr,
                          <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;systemId,
                          <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;historiesId,
                          <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;activitiesId,
                          <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateCacheFactory.html" title="interface in org.apache.jackrabbit.core.state">ItemStateCacheFactory</a>&nbsp;cacheFactory,
                          <a href="../../../../../org/apache/jackrabbit/core/state/ISMLocking.html" title="interface in org.apache.jackrabbit.core.state">ISMLocking</a>&nbsp;ismLocking,
                          <a href="../../../../../org/apache/jackrabbit/core/id/NodeIdFactory.html" title="class in org.apache.jackrabbit.core.id">NodeIdFactory</a>&nbsp;nodeIdFactory)
                           throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Creates a new internal version manager</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>pMgr</code> - underlying persistence manager</dd><dd><code>fs</code> - workspace file system</dd><dd><code>ntReg</code> - node type registry</dd><dd><code>obsMgr</code> - observation manager</dd><dd><code>systemId</code> - node id of the version storage parent (i.e. jcr:system)</dd><dd><code>historiesId</code> - node id of the version storage (i.e. jcr:versionStorage)</dd><dd><code>activitiesId</code> - node id of the activities storage (i.e. jcr:activities)</dd><dd><code>cacheFactory</code> - item state cache factory</dd><dd><code>ismLocking</code> - workspace item state locking</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getVirtualItemStateProvider()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVirtualItemStateProvider</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/virtual/VirtualItemStateProvider.html" title="interface in org.apache.jackrabbit.core.virtual">VirtualItemStateProvider</a>&nbsp;getVirtualItemStateProvider()</pre>
<div class="block">returns the virtual item state provider that exposes the internal versions
 as items.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#getVirtualItemStateProvider()">getVirtualItemStateProvider</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the virtual item state provider.</dd></dl>
</li>
</ul>
<a name="getPersistenceManager()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPersistenceManager</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/persistence/PersistenceManager.html" title="interface in org.apache.jackrabbit.core.persistence">PersistenceManager</a>&nbsp;getPersistenceManager()</pre>
<div class="block">Return the persistence manager.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the persistence manager</dd></dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()
           throws <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Close this version manager. After having closed a persistence
 manager, further operations on this object are treated as illegal
 and throw</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="getEscFactory()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEscFactory</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.DynamicESCFactory.html" title="class in org.apache.jackrabbit.core.version">InternalVersionManagerImpl.DynamicESCFactory</a>&nbsp;getEscFactory()</pre>
<div class="block">Returns the event state collection factory.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the event state collection factory.</dd></dl>
</li>
</ul>
<a name="createVersionHistory(javax.jcr.Session, org.apache.jackrabbit.core.state.NodeState, org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createVersionHistory</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/VersionHistoryInfo.html" title="class in org.apache.jackrabbit.core.version">VersionHistoryInfo</a>&nbsp;createVersionHistory(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
                                      <a href="../../../../../org/apache/jackrabbit/core/state/NodeState.html" title="class in org.apache.jackrabbit.core.state">NodeState</a>&nbsp;node,
                                      <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;copiedFrom)
                                           throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Creates a new version history. This action is needed either when creating
 a new 'mix:versionable' node or when adding the 'mix:versionable' mixin
 to a node.
 <p/>
 This method must not be synchronized since it could cause deadlocks with
 item-reading listeners in the observation thread.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - repository session</dd><dd><code>node</code> - versionable node state</dd><dd><code>copiedFrom</code> - node id for the jcr:copiedFrom property</dd>
<dt><span class="strong">Returns:</span></dt><dd>identifier of the new version history node</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html#getVersionHistory(javax.jcr.Session, org.apache.jackrabbit.core.state.NodeState, org.apache.jackrabbit.core.id.NodeId)"><code>getVersionHistory(Session, NodeState, NodeId)</code></a></dd></dl>
</li>
</ul>
<a name="createActivity(javax.jcr.Session, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createActivity</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;createActivity(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
                    <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;title)
                      throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Creates a new activity
 <p/>
 This method must not be synchronized since it could cause deadlocks with
 item-reading listeners in the observation thread.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#createActivity(javax.jcr.Session, java.lang.String)">createActivity</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - the current session</dd><dd><code>title</code> - title of the new activity</dd>
<dt><span class="strong">Returns:</span></dt><dd>the nodeid of the new activity</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="removeActivity(javax.jcr.Session, org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeActivity</h4>
<pre>public&nbsp;void&nbsp;removeActivity(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
                  <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;nodeId)
                    throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Removes an activity and all
 <p/>
 This method must not be synchronized since it could cause deadlocks with
 item-reading listeners in the observation thread.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#removeActivity(javax.jcr.Session, org.apache.jackrabbit.core.id.NodeId)">removeActivity</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - the current session</dd><dd><code>nodeId</code> - id of the activity to remove</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="hasItem(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasItem</h4>
<pre>public&nbsp;boolean&nbsp;hasItem(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)</pre>
<div class="block">Return a flag indicating if the item specified exists.
 Subclass responsibility.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - the id of the item</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if the item exists;
         <code>false</code> otherwise</dd></dl>
</li>
</ul>
<a name="getItem(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getItem</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionItem.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionItem</a>&nbsp;getItem(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)
                               throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Returns the item with the given persistent id. Subclass responsibility.
 <p/>
 Please note, that the overridden method must acquire the readlock before
 reading the state manager.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - the id of the item</dd>
<dt><span class="strong">Returns:</span></dt><dd>version item</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="canCheckout(org.apache.jackrabbit.core.version.NodeStateEx, org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>canCheckout</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;canCheckout(<a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;state,
                 <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;activityId)
                   throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">invokes the checkout() on the persistent version manager.

 this method currently does no modifications to the persistence and just
 checks if the checkout is valid in respect to a possible activity set on
 the session</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#canCheckout(org.apache.jackrabbit.core.version.NodeStateEx, org.apache.jackrabbit.core.id.NodeId)">canCheckout</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>state</code> - node to checkout</dd><dd><code>activityId</code> - node id if the current activity</dd>
<dt><span class="strong">Returns:</span></dt><dd>the base version id</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="checkin(javax.jcr.Session, org.apache.jackrabbit.core.version.NodeStateEx, java.util.Calendar)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkin</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;checkin(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
                      <a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;node,
                      <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html?is-external=true" title="class or interface in java.util">Calendar</a>&nbsp;created)
                        throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">invokes the checkin() on the persistent version manager and remaps the
 newly created version objects.
 <p/>
 This method must not be synchronized since it could cause deadlocks with
 item-reading listeners in the observation thread.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#checkin(javax.jcr.Session, org.apache.jackrabbit.core.version.NodeStateEx, java.util.Calendar)">checkin</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - session that invokes the checkin</dd><dd><code>node</code> - node to checkin</dd><dd><code>created</code> - create time of the new version,
                or <code>null</code> for the current time</dd>
<dt><span class="strong">Returns:</span></dt><dd>the newly created version</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="removeVersion(javax.jcr.Session, org.apache.jackrabbit.core.version.InternalVersionHistory, org.apache.jackrabbit.spi.Name)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeVersion</h4>
<pre>public&nbsp;void&nbsp;removeVersion(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
                 <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionHistory.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionHistory</a>&nbsp;history,
                 <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;name)
                   throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/version/VersionException.html?is-external=true" title="class or interface in javax.jcr.version">VersionException</a>,
                          <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Removes the specified version from the given version history.
 <p/>
 This method must not be synchronized since it could cause deadlocks with
 item-reading listeners in the observation thread.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#removeVersion(javax.jcr.Session, org.apache.jackrabbit.core.version.InternalVersionHistory, org.apache.jackrabbit.spi.Name)">removeVersion</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - the session that performs the remove</dd><dd><code>history</code> - version history to remove the version from</dd><dd><code>name</code> - name of the version</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/version/VersionException.html?is-external=true" title="class or interface in javax.jcr.version">VersionException</a></code></dd></dl>
</li>
</ul>
<a name="setVersionLabel(javax.jcr.Session, org.apache.jackrabbit.core.version.InternalVersionHistory, org.apache.jackrabbit.spi.Name, org.apache.jackrabbit.spi.Name, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setVersionLabel</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;setVersionLabel(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
                              <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionHistory.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionHistory</a>&nbsp;history,
                              <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;version,
                              <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;label,
                              boolean&nbsp;move)
                                throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Sets the version <code>label</code> to the given <code>version</code>.
 If the label is already assigned to another version, a VersionException is
 thrown unless <code>move</code> is <code>true</code>. If <code>version</code>
 is <code>null</code>, the label is removed from the respective version.
 In either case, the version the label was previously assigned is returned,
 or <code>null</code> of the label was not moved.
 <p/>
 This method must not be synchronized since it could cause deadlocks with
 item-reading listeners in the observation thread.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#setVersionLabel(javax.jcr.Session, org.apache.jackrabbit.core.version.InternalVersionHistory, org.apache.jackrabbit.spi.Name, org.apache.jackrabbit.spi.Name, boolean)">setVersionLabel</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - the session that performs the operation</dd><dd><code>history</code> - version history</dd><dd><code>version</code> - name of the version</dd><dd><code>label</code> - new label</dd><dd><code>move</code> - if <code>true</code> label will be moved</dd>
<dt><span class="strong">Returns:</span></dt><dd>the version that had the label or <code>null</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="itemsUpdated(java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>itemsUpdated</h4>
<pre>public&nbsp;void&nbsp;itemsUpdated(<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionItem.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionItem</a>&gt;&nbsp;items)</pre>
<div class="block">Invoked by some external source to indicate that some items in the
 versions tree were updated. Version histories are reloaded if possible.
 Matching items are removed from the cache.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>items</code> - items updated</dd></dl>
</li>
</ul>
<a name="setEventChannel(org.apache.jackrabbit.core.cluster.UpdateEventChannel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setEventChannel</h4>
<pre>public&nbsp;void&nbsp;setEventChannel(<a href="../../../../../org/apache/jackrabbit/core/cluster/UpdateEventChannel.html" title="interface in org.apache.jackrabbit.core.cluster">UpdateEventChannel</a>&nbsp;eventChannel)</pre>
<div class="block">Set an event channel to inform about updates.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>eventChannel</code> - event channel</dd></dl>
</li>
</ul>
<a name="itemDiscarded(org.apache.jackrabbit.core.version.InternalVersionItem)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>itemDiscarded</h4>
<pre>protected&nbsp;void&nbsp;itemDiscarded(<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionItem.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionItem</a>&nbsp;item)</pre>
<div class="block">Invoked by the internal version item itself, when it's underlying
 persistence state was discarded.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>item</code> - item that was discarded</dd></dl>
</li>
</ul>
<a name="hasItemReferences(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasItemReferences</h4>
<pre>protected&nbsp;boolean&nbsp;hasItemReferences(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)
                             throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Checks if there are item references (from outside the version storage)
 that reference the given node. Subclass responsibility.
 <p/>
 Please note, that the overridden method must acquire the readlock before
 reading the state manager.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - the id of the node</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if there are item references from outside the
         version storage; <code>false</code> otherwise.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs while reading from the
                             repository.</dd></dl>
</li>
</ul>
<a name="getNodeStateEx(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNodeStateEx</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;getNodeStateEx(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;parentNodeId)
                              throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Returns the node with the given persistent id. Subclass responsibility.
 <p/>
 Please note, that the overridden method must acquire the readlock before
 reading the state manager.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>parentNodeId</code> - the id of the node</dd>
<dt><span class="strong">Returns:</span></dt><dd>the nodestate for the given id.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs while reading from the
                             repository.</dd></dl>
</li>
</ul>
<a name="getHistoryRoot()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHistoryRoot</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;getHistoryRoot()</pre>
<div class="block">returns the version history root node</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the version history root node</dd></dl>
</li>
</ul>
<a name="getActivitiesRoot()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getActivitiesRoot</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;getActivitiesRoot()</pre>
<div class="block">returns the activities root node</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the activities root node</dd></dl>
</li>
</ul>
<a name="getSharedStateMgr()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSharedStateMgr</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/state/SharedItemStateManager.html" title="class in org.apache.jackrabbit.core.state">SharedItemStateManager</a>&nbsp;getSharedStateMgr()</pre>
<div class="block">Returns the shared item state manager.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the shared item state manager.</dd></dl>
</li>
</ul>
<a name="createItemStateManager(org.apache.jackrabbit.core.persistence.PersistenceManager, org.apache.jackrabbit.core.id.NodeId, org.apache.jackrabbit.core.nodetype.NodeTypeRegistry, org.apache.jackrabbit.core.state.ItemStateCacheFactory, org.apache.jackrabbit.core.state.ISMLocking, org.apache.jackrabbit.core.id.NodeIdFactory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createItemStateManager</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/VersionItemStateManager.html" title="class in org.apache.jackrabbit.core.version">VersionItemStateManager</a>&nbsp;createItemStateManager(<a href="../../../../../org/apache/jackrabbit/core/persistence/PersistenceManager.html" title="interface in org.apache.jackrabbit.core.persistence">PersistenceManager</a>&nbsp;pMgr,
                                             <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;rootId,
                                             <a href="../../../../../org/apache/jackrabbit/core/nodetype/NodeTypeRegistry.html" title="class in org.apache.jackrabbit.core.nodetype">NodeTypeRegistry</a>&nbsp;ntReg,
                                             <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateCacheFactory.html" title="interface in org.apache.jackrabbit.core.state">ItemStateCacheFactory</a>&nbsp;cacheFactory,
                                             <a href="../../../../../org/apache/jackrabbit/core/state/ISMLocking.html" title="interface in org.apache.jackrabbit.core.state">ISMLocking</a>&nbsp;ismLocking,
                                             <a href="../../../../../org/apache/jackrabbit/core/id/NodeIdFactory.html" title="class in org.apache.jackrabbit.core.id">NodeIdFactory</a>&nbsp;nodeIdFactory)
                                                  throws <a href="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</a></pre>
<div class="block">Creates a <code>VersionItemStateManager</code> or derivative.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>pMgr</code> - persistence manager</dd><dd><code>rootId</code> - root node id</dd><dd><code>ntReg</code> - node type registry</dd><dd><code>cacheFactory</code> - cache factory</dd><dd><code>ismLocking</code> - the ISM locking implementation</dd>
<dt><span class="strong">Returns:</span></dt><dd>item state manager</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateException.html" title="class in org.apache.jackrabbit.core.state">ItemStateException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="stateCreated(org.apache.jackrabbit.core.state.ItemState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stateCreated</h4>
<pre>public&nbsp;void&nbsp;stateCreated(<a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</a>&nbsp;created)</pre>
<div class="block">Called when an <code>ItemState</code> has successfully
 been created (i.e. its underlying persistent state was created).
 <p/>
 Not used.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html#stateCreated(org.apache.jackrabbit.core.state.ItemState)">stateCreated</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>created</code> - the <code>ItemState</code> that has been 'created'</dd></dl>
</li>
</ul>
<a name="stateModified(org.apache.jackrabbit.core.state.ItemState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stateModified</h4>
<pre>public&nbsp;void&nbsp;stateModified(<a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</a>&nbsp;modified)</pre>
<div class="block">Called when an <code>ItemState</code> has successfully
 been modified (i.e. its underlying persistent state has changed).
 <p/>
 Not used.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html#stateModified(org.apache.jackrabbit.core.state.ItemState)">stateModified</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>modified</code> - the <code>ItemState</code> that has been 'modified'</dd></dl>
</li>
</ul>
<a name="stateDestroyed(org.apache.jackrabbit.core.state.ItemState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stateDestroyed</h4>
<pre>public&nbsp;void&nbsp;stateDestroyed(<a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</a>&nbsp;destroyed)</pre>
<div class="block">Called when an <code>ItemState</code> has successfully been
 removed (i.e. its underlying persistent state has been destroyed).
 <p/>
 Remove item from cache on removal.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html#stateDestroyed(org.apache.jackrabbit.core.state.ItemState)">stateDestroyed</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>destroyed</code> - the <code>ItemState</code> that has been 'destroyed'</dd></dl>
</li>
</ul>
<a name="stateDiscarded(org.apache.jackrabbit.core.state.ItemState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stateDiscarded</h4>
<pre>public&nbsp;void&nbsp;stateDiscarded(<a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html" title="class in org.apache.jackrabbit.core.state">ItemState</a>&nbsp;discarded)</pre>
<div class="block">Called when an <code>ItemState</code> has been discarded (i.e. it has
 been rendered 'invalid').
 <p/>
 Not used.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html#stateDiscarded(org.apache.jackrabbit.core.state.ItemState)">stateDiscarded</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/state/ItemStateListener.html" title="interface in org.apache.jackrabbit.core.state">ItemStateListener</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>discarded</code> - the <code>ItemState</code> that has been discarded</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../org/apache/jackrabbit/core/state/ItemState.html#discard()"><code>ItemState.discard()</code></a></dd></dl>
</li>
</ul>
<a name="externalUpdate(org.apache.jackrabbit.core.state.ChangeLog, java.util.List, long, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>externalUpdate</h4>
<pre>public&nbsp;void&nbsp;externalUpdate(<a href="../../../../../org/apache/jackrabbit/core/state/ChangeLog.html" title="class in org.apache.jackrabbit.core.state">ChangeLog</a>&nbsp;changes,
                  <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../org/apache/jackrabbit/core/observation/EventState.html" title="class in org.apache.jackrabbit.core.observation">EventState</a>&gt;&nbsp;events,
                  long&nbsp;timestamp,
                  <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;userData)
                    throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Handle an external update.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/cluster/UpdateEventListener.html#externalUpdate(org.apache.jackrabbit.core.state.ChangeLog, java.util.List, long, java.lang.String)">externalUpdate</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/cluster/UpdateEventListener.html" title="interface in org.apache.jackrabbit.core.cluster">UpdateEventListener</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>changes</code> - external changes containing only node and property ids.</dd><dd><code>events</code> - events to deliver</dd><dd><code>timestamp</code> - when the change occurred.</dd><dd><code>userData</code> - the user data associated with this update.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if the update cannot be processed</dd></dl>
</li>
</ul>
<a name="getVersion(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVersion</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;getVersion(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)
                           throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Returns the version with the given id</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#getVersion(org.apache.jackrabbit.core.id.NodeId)">getVersion</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - id of the version to retrieve</dd>
<dt><span class="strong">Returns:</span></dt><dd>the version or <code>null</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="getBaseline(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBaseline</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalBaseline.html" title="interface in org.apache.jackrabbit.core.version">InternalBaseline</a>&nbsp;getBaseline(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)
                             throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Returns the baseline with the given id</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#getBaseline(org.apache.jackrabbit.core.id.NodeId)">getBaseline</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - id of the baseline version to retrieve</dd>
<dt><span class="strong">Returns:</span></dt><dd>the baseline or <code>null</code> if not found</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="getActivity(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getActivity</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalActivity.html" title="interface in org.apache.jackrabbit.core.version">InternalActivity</a>&nbsp;getActivity(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)
                             throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Returns the activity with the given id</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#getActivity(org.apache.jackrabbit.core.id.NodeId)">getActivity</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - id of the activity to retrieve</dd>
<dt><span class="strong">Returns:</span></dt><dd>the activity.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="getVersionHistory(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVersionHistory</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionHistory.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionHistory</a>&nbsp;getVersionHistory(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)
                                         throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Returns the version history with the given id</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#getVersionHistory(org.apache.jackrabbit.core.id.NodeId)">getVersionHistory</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - id of the version history</dd>
<dt><span class="strong">Returns:</span></dt><dd>the version history.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="getVersionHistoryOfNode(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVersionHistoryOfNode</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionHistory.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionHistory</a>&nbsp;getVersionHistoryOfNode(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)
                                               throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Returns the version history for the versionable node with the given id.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#getVersionHistoryOfNode(org.apache.jackrabbit.core.id.NodeId)">getVersionHistoryOfNode</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - id of the node to retrieve the version history for</dd>
<dt><span class="strong">Returns:</span></dt><dd>the version history</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs or the history does not exit</dd></dl>
</li>
</ul>
<a name="getHeadVersionOfNode(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHeadVersionOfNode</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;getHeadVersionOfNode(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)
                                     throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Returns the head version of the node with the given id. this is always
 the last of all versions. this only works correctly for liner version
 graphs (i.e. simple versioning)

 Assumes that all versions are stored chronologically below the version
 history and just returns the last one. i.e. currently only works for
 simple versioning.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#getHeadVersionOfNode(org.apache.jackrabbit.core.id.NodeId)">getHeadVersionOfNode</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - id of the node to retrieve the version for</dd>
<dt><span class="strong">Returns:</span></dt><dd>the version.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="acquireWriteLock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquireWriteLock</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/VersioningLock.WriteLock.html" title="class in org.apache.jackrabbit.core.version">VersioningLock.WriteLock</a>&nbsp;acquireWriteLock()</pre>
<div class="block">Acquires the write lock on this version manager.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>returns the write lock</dd></dl>
</li>
</ul>
<a name="acquireReadLock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquireReadLock</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/VersioningLock.ReadLock.html" title="class in org.apache.jackrabbit.core.version">VersioningLock.ReadLock</a>&nbsp;acquireReadLock()</pre>
<div class="block">acquires the read lock on this version manager.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>returns the read lock</dd></dl>
</li>
</ul>
<a name="getVersionHistoryInfoForNode(org.apache.jackrabbit.core.state.NodeState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVersionHistoryInfoForNode</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/VersionHistoryInfo.html" title="class in org.apache.jackrabbit.core.version">VersionHistoryInfo</a>&nbsp;getVersionHistoryInfoForNode(<a href="../../../../../org/apache/jackrabbit/core/state/NodeState.html" title="class in org.apache.jackrabbit.core.state">NodeState</a>&nbsp;node)
                                                throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Returns information about the version history of the specified node
 or <code>null</code> when unavailable.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>vNode</code> - node whose version history should be returned</dd>
<dt><span class="strong">Returns:</span></dt><dd>identifiers of the version history and root version nodes</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="getVersionHistory(javax.jcr.Session, org.apache.jackrabbit.core.state.NodeState, org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVersionHistory</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/VersionHistoryInfo.html" title="class in org.apache.jackrabbit.core.version">VersionHistoryInfo</a>&nbsp;getVersionHistory(<a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html?is-external=true" title="class or interface in javax.jcr">Session</a>&nbsp;session,
                                   <a href="../../../../../org/apache/jackrabbit/core/state/NodeState.html" title="class in org.apache.jackrabbit.core.state">NodeState</a>&nbsp;node,
                                   <a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;copiedFrom)
                                     throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Returns information about the version history of the specified node.
 If the given node does not already have an associated version history,
 then an empty history is automatically created. This method should
 only be called by code that already knows that the specified node
 is versionable.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html#getVersionHistory(javax.jcr.Session, org.apache.jackrabbit.core.state.NodeState, org.apache.jackrabbit.core.id.NodeId)">getVersionHistory</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - workspace session</dd><dd><code>node</code> - node whose version history should be returned</dd><dd><code>copiedFrom</code> - the node id for the jcr:copiedFrom property use for copied nodes</dd>
<dt><span class="strong">Returns:</span></dt><dd>identifiers of the version history and root version nodes</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="internalRemoveActivity(org.apache.jackrabbit.core.version.InternalActivityImpl)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>internalRemoveActivity</h4>
<pre>protected&nbsp;void&nbsp;internalRemoveActivity(org.apache.jackrabbit.core.version.InternalActivityImpl&nbsp;activity)
                               throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Removes the specified activity</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>activity</code> - the activity to remove</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if any other error occurs.</dd></dl>
</li>
</ul>
<a name="getName(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getName</h4>
<pre>protected static&nbsp;<a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;getName(<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</pre>
<div class="block">Utility method that returns the given string as a name in the default
 namespace.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>name</code> - string name</dd>
<dt><span class="strong">Returns:</span></dt><dd>A <code>Name</code> object.</dd></dl>
</li>
</ul>
<a name="getParentNode(org.apache.jackrabbit.core.version.NodeStateEx, java.lang.String, org.apache.jackrabbit.spi.Name)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getParentNode</h4>
<pre>protected static&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;getParentNode(<a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;parent,
                        <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;uuid,
                        <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;interNT)
                                    throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Utility method that returns the parent node under which the version
 history of the identified versionable node is or will be stored. If
 the <code>interNT</code> is not <code>null</code> then the returned
 parent node and any ancestor nodes are automatically created if they do
 not already exist. Otherwise
 <code>null</code> is returned if the parent node does not exist.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>parent</code> - the parent node</dd><dd><code>uuid</code> - UUID of a versionable node</dd><dd><code>interNT</code> - intermediate nodetype.</dd>
<dt><span class="strong">Returns:</span></dt><dd>parent node of the version history, or <code>null</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="checkin(org.apache.jackrabbit.core.version.NodeStateEx, java.util.Calendar)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkin</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;checkin(<a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;node,
                      <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html?is-external=true" title="class or interface in java.util">Calendar</a>&nbsp;created)
                           throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Creates a new version of the given node using the given version
 creation time.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>node</code> - the node to be checked in</dd><dd><code>created</code> - version creation time</dd>
<dt><span class="strong">Returns:</span></dt><dd>the new version</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="internalCheckin(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl, org.apache.jackrabbit.core.version.NodeStateEx, boolean, java.util.Calendar)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>internalCheckin</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;internalCheckin(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl&nbsp;history,
                              <a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;node,
                              boolean&nbsp;simple,
                              <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html?is-external=true" title="class or interface in java.util">Calendar</a>&nbsp;created)
                                   throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Checks in a node</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>history</code> - the version history</dd><dd><code>node</code> - node to checkin</dd><dd><code>simple</code> - flag indicates simple versioning</dd><dd><code>created</code> - optional created date.</dd>
<dt><span class="strong">Returns:</span></dt><dd>internal version</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd><dt><span class="strong">See Also:</span></dt><dd><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Node.html?is-external=true#checkin()" title="class or interface in javax.jcr"><code>Node.checkin()</code></a></dd></dl>
</li>
</ul>
<a name="calculateCheckinVersionName(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl, org.apache.jackrabbit.core.version.NodeStateEx, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateCheckinVersionName</h4>
<pre>protected&nbsp;<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;calculateCheckinVersionName(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl&nbsp;history,
                                 <a href="../../../../../org/apache/jackrabbit/core/version/NodeStateEx.html" title="class in org.apache.jackrabbit.core.version">NodeStateEx</a>&nbsp;node,
                                 boolean&nbsp;simple)
                                      throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Calculates the name of the new version that will be created by a
 checkin call. The name is determined as follows:
 <ul>
 <li> first the predecessor version with the shortest name is searched.
 <li> if that predecessor version is the root version, the new version gets
      the name "{number of successors}+1" + ".0"
 <li> if that predecessor version has no successor, the last digit of it's
      version number is incremented.
 <li> if that predecessor version has successors but the incremented name
      does not exist, that name is used.
 <li> otherwise a ".0" is added to the name until a non conflicting name
      is found.
 <ul>

 Example Graph:
 <xmp>
 jcr:rootVersion
  |     |
 1.0   2.0
  |
 1.1
  |
 1.2 ---\  ------\
  |      \        \
 1.3   1.2.0   1.2.0.0
  |      |
 1.4   1.2.1 ----\
  |      |        \
 1.5   1.2.2   1.2.1.0
  |      |        |
 1.6     |     1.2.1.1
  |-----/
 1.7
 </xmp></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>history</code> - the version history</dd><dd><code>node</code> - the node to checkin</dd><dd><code>simple</code> - if <code>true</code> indicates simple versioning</dd>
<dt><span class="strong">Returns:</span></dt><dd>the new version name</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs.</dd></dl>
</li>
</ul>
<a name="internalRemoveVersion(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl, org.apache.jackrabbit.spi.Name)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>internalRemoveVersion</h4>
<pre>protected&nbsp;void&nbsp;internalRemoveVersion(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl&nbsp;history,
                         <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;name)
                              throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/version/VersionException.html?is-external=true" title="class or interface in javax.jcr.version">VersionException</a>,
                                     <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Removes the specified version from the history</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>history</code> - the version history from where to remove the version.</dd><dd><code>name</code> - the name of the version to remove.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/version/VersionException.html?is-external=true" title="class or interface in javax.jcr.version">VersionException</a></code> - if the version <code>history</code> does
  not have a version with <code>name</code>.</dd>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if any other error occurs.</dd></dl>
</li>
</ul>
<a name="setVersionLabel(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl, org.apache.jackrabbit.spi.Name, org.apache.jackrabbit.spi.Name, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setVersionLabel</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;setVersionLabel(org.apache.jackrabbit.core.version.InternalVersionHistoryImpl&nbsp;history,
                              <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;version,
                              <a href="../../../../../org/apache/jackrabbit/spi/Name.html" title="interface in org.apache.jackrabbit.spi">Name</a>&nbsp;label,
                              boolean&nbsp;move)
                                   throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Set version label on the specified version.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>history</code> - version history</dd><dd><code>version</code> - version name</dd><dd><code>label</code> - version label</dd><dd><code>move</code> - <code>true</code> to move from existing version;
             <code>false</code> otherwise.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The internal version.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="versionCreated(org.apache.jackrabbit.core.version.InternalVersion)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>versionCreated</h4>
<pre>protected&nbsp;void&nbsp;versionCreated(<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;version)</pre>
<div class="block">Invoked when a new internal item has been created.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>version</code> - internal version item</dd></dl>
</li>
</ul>
<a name="versionDestroyed(org.apache.jackrabbit.core.version.InternalVersion)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>versionDestroyed</h4>
<pre>protected&nbsp;void&nbsp;versionDestroyed(<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersion.html" title="interface in org.apache.jackrabbit.core.version">InternalVersion</a>&nbsp;version)</pre>
<div class="block">Invoked when a new internal item has been destroyed.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>version</code> - internal version item</dd></dl>
</li>
</ul>
<a name="createInternalVersionItem(org.apache.jackrabbit.core.id.NodeId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createInternalVersionItem</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionItem.html" title="interface in org.apache.jackrabbit.core.version">InternalVersionItem</a>&nbsp;createInternalVersionItem(<a href="../../../../../org/apache/jackrabbit/core/id/NodeId.html" title="class in org.apache.jackrabbit.core.id">NodeId</a>&nbsp;id)
                                                 throws <a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></pre>
<div class="block">Creates an <a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionItem.html" title="interface in org.apache.jackrabbit.core.version"><code>InternalVersionItem</code></a> based on the <a href="../../../../../org/apache/jackrabbit/core/state/NodeState.html" title="class in org.apache.jackrabbit.core.state"><code>NodeState</code></a>
 identified by <code>id</code>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - the node id of the version item.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the version item or <code>null</code> if there is no node state
         with the given <code>id</code>.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/RepositoryException.html?is-external=true" title="class or interface in javax.jcr">RepositoryException</a></code> - if an error occurs while reading from the
                             version storage.</dd></dl>
</li>
</ul>
<a name="getNodeIdFactory()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getNodeIdFactory</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/jackrabbit/core/id/NodeIdFactory.html" title="class in org.apache.jackrabbit.core.id">NodeIdFactory</a>&nbsp;getNodeIdFactory()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/InternalVersionManagerImpl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManager.html" title="interface in org.apache.jackrabbit.core.version"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/jackrabbit/core/version/InternalVersionManagerImpl.DynamicESCFactory.html" title="class in org.apache.jackrabbit.core.version"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/jackrabbit/core/version/InternalVersionManagerImpl.html" target="_top">Frames</a></li>
<li><a href="InternalVersionManagerImpl.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2004-2012 <a href="http://www.apache.org/">The Apache Software Foundation</a>. All Rights Reserved.</small></p>
</body>
</html>
