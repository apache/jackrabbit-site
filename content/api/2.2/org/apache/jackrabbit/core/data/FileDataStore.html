<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_22) on Wed Dec 15 19:16:59 EET 2010 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
FileDataStore (Apache Jackrabbit 2.2.0 API)
</TITLE>

<META NAME="date" CONTENT="2010-12-15">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="FileDataStore (Apache Jackrabbit 2.2.0 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/FileDataStore.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../org/apache/jackrabbit/core/data/FileDataRecord.html" title="class in org.apache.jackrabbit.core.data"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../org/apache/jackrabbit/core/data/GarbageCollector.html" title="class in org.apache.jackrabbit.core.data"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?org/apache/jackrabbit/core/data/FileDataStore.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="FileDataStore.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.apache.jackrabbit.core.data</FONT>
<BR>
Class FileDataStore</H2>
<PRE>
<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../../../../resources/inherit.gif" ALT="extended by "><B>org.apache.jackrabbit.core.data.FileDataStore</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>FileDataStore</B><DT>extends <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A><DT>implements <A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</A></DL>
</PRE>

<P>
Simple file-based data store. Data records are stored as normal files
 named using a message digest of the contained binary stream.

 Configuration:
 <pre>
 &lt;DataStore class="org.apache.jackrabbit.core.data.FileDataStore">
     &lt;param name="<A HREF="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#setPath(java.lang.String)"><CODE>path</CODE></A>" value="/data/datastore"/>
     &lt;param name="<A HREF="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#setMinRecordLength(int)"><CODE>minRecordLength</CODE></A>" value="1024"/>
 &lt/DataStore>
 </pre>
 <p>
 If the directory is not set, the directory &lt;repository home&gt;/repository/datastore is used.
 <p>
 A three level directory structure is used to avoid placing too many
 files in a single directory. The chosen structure is designed to scale
 up to billions of distinct records.
 <p>
 This implementation relies on the underlying file system to support
 atomic O(1) move operations with <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/io/File.html?is-external=true#renameTo(java.io.File)" title="class or interface in java.io"><CODE>File.renameTo(File)</CODE></A>.
<P>

<P>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</A>&lt;<A HREF="../../../../../org/apache/jackrabbit/core/data/DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</A>,<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="class or interface in java.lang.ref">WeakReference</A>&lt;<A HREF="../../../../../org/apache/jackrabbit/core/data/DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</A>&gt;&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#inUse">inUse</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;All data identifiers that are currently in use are in this set until they are garbage collected.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#FileDataStore()">FileDataStore</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../org/apache/jackrabbit/core/data/DataRecord.html" title="interface in org.apache.jackrabbit.core.data">DataRecord</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#addRecord(java.io.InputStream)">addRecord</A></B>(<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</A>&nbsp;input)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a new data record.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#clearInUse()">clearInUse</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clear the in-use list.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#close()">close</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Close the data store</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#deleteAllOlderThan(long)">deleteAllOlderThan</A></B>(long&nbsp;min)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete objects that have a modified date older than the specified date.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</A>&lt;<A HREF="../../../../../org/apache/jackrabbit/core/data/DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#getAllIdentifiers()">getAllIdentifiers</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get all identifiers.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#getMinRecordLength()">getMinRecordLength</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the minimum size of an object that should be stored in this data store.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#getPath()">getPath</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the name of the directory where this data store keeps the files.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../org/apache/jackrabbit/core/data/DataRecord.html" title="interface in org.apache.jackrabbit.core.data">DataRecord</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#getRecord(org.apache.jackrabbit.core.data.DataIdentifier)">getRecord</A></B>(<A HREF="../../../../../org/apache/jackrabbit/core/data/DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</A>&nbsp;identifier)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the record with the given identifier.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../org/apache/jackrabbit/core/data/DataRecord.html" title="interface in org.apache.jackrabbit.core.data">DataRecord</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#getRecordIfStored(org.apache.jackrabbit.core.data.DataIdentifier)">getRecordIfStored</A></B>(<A HREF="../../../../../org/apache/jackrabbit/core/data/DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</A>&nbsp;identifier)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Check if a record for the given identifier exists, and return it if yes.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#init(java.lang.String)">init</A></B>(<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;homeDir)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Initialized the data store.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#setMinRecordLength(int)">setMinRecordLength</A></B>(int&nbsp;minRecordLength)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the minimum object length.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#setPath(java.lang.String)">setPath</A></B>(<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;directoryName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the name of the directory where this data store keeps the files.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/jackrabbit/core/data/FileDataStore.html#updateModifiedDateOnAccess(long)">updateModifiedDateOnAccess</A></B>(long&nbsp;before)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;From now on, update the modified date of an object even when accessing it.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="inUse"><!-- --></A><H3>
inUse</H3>
<PRE>
protected <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</A>&lt;<A HREF="../../../../../org/apache/jackrabbit/core/data/DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</A>,<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="class or interface in java.lang.ref">WeakReference</A>&lt;<A HREF="../../../../../org/apache/jackrabbit/core/data/DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</A>&gt;&gt; <B>inUse</B></PRE>
<DL>
<DD>All data identifiers that are currently in use are in this set until they are garbage collected.
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="FileDataStore()"><!-- --></A><H3>
FileDataStore</H3>
<PRE>
public <B>FileDataStore</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="init(java.lang.String)"><!-- --></A><H3>
init</H3>
<PRE>
public void <B>init</B>(<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;homeDir)</PRE>
<DL>
<DD>Initialized the data store.
 If the path is not set, &lt;repository home&gt;/repository/datastore is used.
 This directory is automatically created if it does not yet exist.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html#init(java.lang.String)">init</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>homeDir</CODE> - </DL>
</DD>
</DL>
<HR>

<A NAME="getRecordIfStored(org.apache.jackrabbit.core.data.DataIdentifier)"><!-- --></A><H3>
getRecordIfStored</H3>
<PRE>
public <A HREF="../../../../../org/apache/jackrabbit/core/data/DataRecord.html" title="interface in org.apache.jackrabbit.core.data">DataRecord</A> <B>getRecordIfStored</B>(<A HREF="../../../../../org/apache/jackrabbit/core/data/DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</A>&nbsp;identifier)
                             throws <A HREF="../../../../../org/apache/jackrabbit/core/data/DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html#getRecordIfStored(org.apache.jackrabbit.core.data.DataIdentifier)">DataStore</A></CODE></B></DD>
<DD>Check if a record for the given identifier exists, and return it if yes.
 If no record exists, this method returns null.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html#getRecordIfStored(org.apache.jackrabbit.core.data.DataIdentifier)">getRecordIfStored</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>identifier</CODE> - data identifier
<DT><B>Returns:</B><DD>the record if found, and null if not
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getRecord(org.apache.jackrabbit.core.data.DataIdentifier)"><!-- --></A><H3>
getRecord</H3>
<PRE>
public <A HREF="../../../../../org/apache/jackrabbit/core/data/DataRecord.html" title="interface in org.apache.jackrabbit.core.data">DataRecord</A> <B>getRecord</B>(<A HREF="../../../../../org/apache/jackrabbit/core/data/DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</A>&nbsp;identifier)
                     throws <A HREF="../../../../../org/apache/jackrabbit/core/data/DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</A></PRE>
<DL>
<DD>Returns the record with the given identifier. Note that this method
 performs no sanity checks on the given identifier. It is up to the
 caller to ensure that only identifiers of previously created data
 records are used.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html#getRecord(org.apache.jackrabbit.core.data.DataIdentifier)">getRecord</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>identifier</CODE> - data identifier
<DT><B>Returns:</B><DD>identified data record
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</A></CODE> - if the data store could not be accessed,
                     or if the given identifier is invalid</DL>
</DD>
</DL>
<HR>

<A NAME="addRecord(java.io.InputStream)"><!-- --></A><H3>
addRecord</H3>
<PRE>
public <A HREF="../../../../../org/apache/jackrabbit/core/data/DataRecord.html" title="interface in org.apache.jackrabbit.core.data">DataRecord</A> <B>addRecord</B>(<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</A>&nbsp;input)
                     throws <A HREF="../../../../../org/apache/jackrabbit/core/data/DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</A></PRE>
<DL>
<DD>Creates a new data record.
 The stream is first consumed and the contents are saved in a temporary file
 and the SHA-1 message digest of the stream is calculated. If a
 record with the same SHA-1 digest (and length) is found then it is
 returned. Otherwise the temporary file is moved in place to become
 the new data record that gets returned.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html#addRecord(java.io.InputStream)">addRecord</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>input</CODE> - binary stream
<DT><B>Returns:</B><DD>data record that contains the given stream
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStoreException.html" title="class in org.apache.jackrabbit.core.data">DataStoreException</A></CODE> - if the record could not be created</DL>
</DD>
</DL>
<HR>

<A NAME="updateModifiedDateOnAccess(long)"><!-- --></A><H3>
updateModifiedDateOnAccess</H3>
<PRE>
public void <B>updateModifiedDateOnAccess</B>(long&nbsp;before)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html#updateModifiedDateOnAccess(long)">DataStore</A></CODE></B></DD>
<DD>From now on, update the modified date of an object even when accessing it.
 Usually, the modified date is only updated when creating a new object,
 or when a new link is added to an existing object. When this setting is enabled,
 even getLength() will update the modified date.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html#updateModifiedDateOnAccess(long)">updateModifiedDateOnAccess</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>before</CODE> - - update the modified date to the current time if it is older than this value</DL>
</DD>
</DL>
<HR>

<A NAME="deleteAllOlderThan(long)"><!-- --></A><H3>
deleteAllOlderThan</H3>
<PRE>
public int <B>deleteAllOlderThan</B>(long&nbsp;min)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html#deleteAllOlderThan(long)">DataStore</A></CODE></B></DD>
<DD>Delete objects that have a modified date older than the specified date.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html#deleteAllOlderThan(long)">deleteAllOlderThan</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>min</CODE> - the minimum time
<DT><B>Returns:</B><DD>the number of data records deleted</DL>
</DD>
</DL>
<HR>

<A NAME="getAllIdentifiers()"><!-- --></A><H3>
getAllIdentifiers</H3>
<PRE>
public <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</A>&lt;<A HREF="../../../../../org/apache/jackrabbit/core/data/DataIdentifier.html" title="class in org.apache.jackrabbit.core.data">DataIdentifier</A>&gt; <B>getAllIdentifiers</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html#getAllIdentifiers()">DataStore</A></CODE></B></DD>
<DD>Get all identifiers.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html#getAllIdentifiers()">getAllIdentifiers</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>an iterator over all DataIdentifier objects</DL>
</DD>
</DL>
<HR>

<A NAME="clearInUse()"><!-- --></A><H3>
clearInUse</H3>
<PRE>
public void <B>clearInUse</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html#clearInUse()">DataStore</A></CODE></B></DD>
<DD>Clear the in-use list. This is only used for testing to make the the garbage collection
 think that objects are no longer in use.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html#clearInUse()">clearInUse</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getPath()"><!-- --></A><H3>
getPath</H3>
<PRE>
public <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A> <B>getPath</B>()</PRE>
<DL>
<DD>Get the name of the directory where this data store keeps the files.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>the full path name</DL>
</DD>
</DL>
<HR>

<A NAME="setPath(java.lang.String)"><!-- --></A><H3>
setPath</H3>
<PRE>
public void <B>setPath</B>(<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;directoryName)</PRE>
<DL>
<DD>Set the name of the directory where this data store keeps the files.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>directoryName</CODE> - the path name</DL>
</DD>
</DL>
<HR>

<A NAME="getMinRecordLength()"><!-- --></A><H3>
getMinRecordLength</H3>
<PRE>
public int <B>getMinRecordLength</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html#getMinRecordLength()">DataStore</A></CODE></B></DD>
<DD>Get the minimum size of an object that should be stored in this data store.
 Depending on the overhead and configuration, each store may return a different value.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html#getMinRecordLength()">getMinRecordLength</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>the minimum size in bytes</DL>
</DD>
</DL>
<HR>

<A NAME="setMinRecordLength(int)"><!-- --></A><H3>
setMinRecordLength</H3>
<PRE>
public void <B>setMinRecordLength</B>(int&nbsp;minRecordLength)</PRE>
<DL>
<DD>Set the minimum object length.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>minRecordLength</CODE> - the length</DL>
</DD>
</DL>
<HR>

<A NAME="close()"><!-- --></A><H3>
close</H3>
<PRE>
public void <B>close</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html#close()">DataStore</A></CODE></B></DD>
<DD>Close the data store
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html#close()">close</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/jackrabbit/core/data/DataStore.html" title="interface in org.apache.jackrabbit.core.data">DataStore</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/FileDataStore.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../org/apache/jackrabbit/core/data/FileDataRecord.html" title="class in org.apache.jackrabbit.core.data"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../org/apache/jackrabbit/core/data/GarbageCollector.html" title="class in org.apache.jackrabbit.core.data"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?org/apache/jackrabbit/core/data/FileDataStore.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="FileDataStore.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2004-2010 <a href="http://www.apache.org/">The Apache Software Foundation</a>. All Rights Reserved.
</BODY>
</HTML>
