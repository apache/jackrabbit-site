
<!-- 
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE- 2.0

  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License. 
-->

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
  <HEAD>
    <TITLE>Frequently Asked Questions</TITLE>
    <LINK type="text/css" rel="stylesheet" href="http://jackrabbit.apache.org/style/site.css">
  <META http-equiv="Content-Type" content="text/html;charset=UTF-8"></HEAD>
  <BODY>
    <DIV id="page">
      <DIV id="header">
        <P id="jcr"><A href="http://jackrabbit.apache.org/"><IMG src="http://jackrabbit.apache.org/style/jlogo.gif" alt="Apache Jackrabbit" height="100" width="336"></A></P>
        <P id="asf"><A href="http://www.apache.org/"><IMG src="http://jackrabbit.apache.org/style/asf-logo.gif" alt="Apache Software Foundation" height="100" width="387"></A></P>
      </DIV>
      <DIV id="body">
        <DIV id="navigation">
  <UL>
	<LI>Apache Jackrabbit
	<UL>
		<LI><A href="welcome-to-apache-jackrabbit.html" title="Welcome to Apache Jackrabbit">Welcome</A></LI>
		<LI><A href="downloads.html" title="Downloads">Downloads</A></LI>
		<LI><A href="" title="Frequently Asked Questions">FAQ</A></LI>
		<LI><A href="http://wiki.apache.org/jackrabbit/FrontPage" class="external-link">Jackrabbit Wiki</A></LI>
		<LI><A href="jackrabbit-history.html" title="Jackrabbit History">Jackrabbit History</A></LI>
	</UL>
	</LI>
	<LI>Documentation
	<UL>
		<LI><A href="getting-started-with-apache-jackrabbit.html" title="Getting Started with Apache Jackrabbit">Getting Started</A></LI>
		<LI><A href="standalone-server.html" title="Standalone Server">Standalone Server</A></LI>
		<LI><A href="jackrabbit-components.html" title="Jackrabbit Components">Jackrabbit Components</A></LI>
		<LI><A href="first-hops.html" title="First Hops">First Hops</A></LI>
		<LI><A href="jcr-api.html" title="JCR & API">JCR &amp; API</A></LI>
		<LI><A href="jackrabbit-architecture.html" title="Jackrabbit Architecture">Jackrabbit Architecture</A></LI>
		<LI><A href="deployment-models.html" title="Deployment Models">Deployment Models</A></LI>
		<LI><A href="jackrabbit-configuration.html" title="Jackrabbit Configuration">Jackrabbit Configuration</A></LI>
		<LI><A href="node-types.html" title="Node Types">Node Types</A></LI>
		<LI><A href="object-content-mapping.html" title="Object Content Mapping">Object Content Mapping</A></LI>
	</UL>
	</LI>
	<LI>Development
	<UL>
		<LI><A href="jackrabbit-team.html" title="Jackrabbit Team">Jackrabbit Team</A></LI>
		<LI><A href="jackrabbit-roadmap.html" title="Jackrabbit Roadmap">Jackrabbit Roadmap</A></LI>
		<LI><A href="building-jackrabbit.html" title="Building Jackrabbit">Building Jackrabbit</A></LI>
		<LI><A href="mailing-lists.html" title="Mailing Lists">Mailing Lists</A></LI>
		<LI><A href="issue-tracker.html" title="Issue Tracker">Issue Tracker</A></LI>
		<LI><A href="source-repository.html" title="Source Repository">Source Repository</A></LI>
		<LI><A href="continuous-integration.html" title="Continuous Integration">Continuous Integration</A></LI>
		<LI><A href="website.html" title="Website">Website</A></LI>
		<LI><A href="creating-releases.html" title="Creating Releases">Creating Releases</A></LI>
		<LI><A href="supporting-software-attribution.html" title="Supporting software attribution">Attribution</A></LI>
	</UL>
	</LI>
	<LI>Apache Software Foundation
	<UL>
		<LI><A href="http://www.apache.org/foundation/how-it-works.html" class="external-link">Introduction</A></LI>
		<LI><A href="http://www.apache.org/foundation/sponsorship.html" class="external-link">Sponsorship</A></LI>
		<LI><A href="http://www.apache.org/foundation/thanks.html" class="external-link">Current Sponsors</A></LI>
	</UL>
	</LI>
</UL>
        </DIV>
        <DIV id="content">
          <H1>Frequently Asked Questions</H1>
  <H2><A name="FrequentlyAskedQuestions-General"></A>General</H2>

<H3><A name="FrequentlyAskedQuestions-WhatisJCR%3F"></A>What is JCR?</H3>

<P>JCR is the acronym of the Content Repository for Java technology API, a standard interface for accessing content repositories. JCR version 1.0 was specified in Java Specification Request 170 (<A href="http://jcp.org/en/jsr/detail?id=170" class="external-link">JSR 170</A>), and version 2.0 is currently under work in <A href="http://jcp.org/en/jsr/detail?id=283" class="external-link">JSR 283</A>.</P>

<H3><A name="FrequentlyAskedQuestions-Whatisacontentrepository%3F"></A>What is a content repository?</H3>

<P>A content repository is an information management system that provides various services for storing, accessing, and managing content. In addition to a hierarchically structured storage, common services of a content repository are versioning, access control, full text searching, and event monitoring. A content repository is not a content management system (CMS), although most existing CMSs contain a custom content repository implementation, often based on the file system or a relational database.</P>

<H3><A name="FrequentlyAskedQuestions-WhatisApacheJackrabbit%3F"></A>What is Apache Jackrabbit?</H3>

<P>Apache Jackrabbit is a fully featured content repository that implements the entire JCR API.  The Jackrabbit project was started when Day Software, the JSR-170 specification lead, licensed their initial implementation of the JCR reference implementation. The Jackrabbit codebase was used for the official reference implementation (RI) and technology compatibility kit (TCK) released along with the final JCR API.</P>

<H3><A name="FrequentlyAskedQuestions-WhatdoIdoifIhaveaquestion%3F"></A>What do I do if I have a question?</H3>

<P>Please ask questions on the <A href="http://jackrabbit.apache.org/mailing-lists.html" class="external-link">Jackrabbit mailing lists</A>. There is the users list for questions around using JCR and Jackrabbit and the dev list for the development of Jackrabbit itself and for people starting to extend Jackrabbit or other advanced topics.</P>


<H2><A name="FrequentlyAskedQuestions-BuildingJackrabbit"></A>Building Jackrabbit</H2>

<H3><A name="FrequentlyAskedQuestions-HowdoIbuildtheApacheJackrabbitsources%3F"></A>How do I build the Apache Jackrabbit sources?</H3>

<P>See the <A href="building-jackrabbit.html" title="Building Jackrabbit">Building Jackrabbit</A> page for detailed build instructions.</P>

<H2><A name="FrequentlyAskedQuestions-UsingJackrabbit"></A>Using Jackrabbit</H2>

<H3><A name="FrequentlyAskedQuestions-HowdoIdoXwithJCR%2FJackrabbit%3F"></A>How do I do X with JCR/Jackrabbit?</H3>

<P>See the JCR specification, the JCR API documentation, or the Examples page on the Jackrabbit wiki for information on how to perform various operation using the JCR API.</P>

<P>For Jackrabbit features (like access control and node type management) not covered by the JCR API, see the Examples page on the wiki, the Jackrabbit javadocs, or contact the Jackrabbit mailing list.</P>

<H3><A name="FrequentlyAskedQuestions-HowdoIusetransactionswithJCR%3F"></A>How do I use transactions with JCR?</H3>

<P>See the mailing list announcement for a simple example on using the JTA support in Jackrabbit. For a more complete explanation of the transaction features, please           see section 8.1 Transactions of the JCR specification.</P>

<H3><A name="FrequentlyAskedQuestions-HowdoIcreatenewworkspacesinJackrabbit%3F"></A>How do I create new workspaces in Jackrabbit?</H3>

<P>The JCR 2.0 API has two <A href="http://www.day.com/maven/jsr170/javadocs/jcr-2.0/javax/jcr/Workspace.html#createWorkspace(java.lang.String)" class="external-link">Workspace.createWorkspace()</A> methods for that.</P>

<P>The JCR 1.0 API does not contain features for creating or managing workspaces, so you need to use Jackrabbit-specific functionality for creating new workspaces. You can create a new workspace either manually or programmatically.</P>

<P>The manual way is to create a new workspace directory within the repository home directory and to place a new workspace.xml configuration file in that folder. You can use the configuration file of an existing workspace as an example, just remember to change the name of the workspace           in the Workspace name=&quot;...&quot; tag. See the <A href="jackrabbit-configuration.html" title="Jackrabbit Configuration">Jackrabbit Configuration</A> page for configuration details. Note also that you need to restart the repository instance to access the new workspace.</P>

<P>The programmatic way is to acquire a Workspace instance using the normal JCR API and to cast the instance to the JackrabbitWorkspace interface. You can then use the createWorkspace(String) method to create new workspaces.</P>

<H3><A name="FrequentlyAskedQuestions-HowdoIdeleteaworkspaceinJackrabbit%3F"></A>How do I delete a workspace in Jackrabbit?</H3>

<P>There is currently no programmatic way to delete workspaces. You can delete a workspace by manually removing the workspace directory when the repository instance is not running.</P>

<H3><A name="FrequentlyAskedQuestions-HowdoIdeployJackrabbitintoTomcat%3F"></A>How do I deploy Jackrabbit into Tomcat?</H3>

<UL>
	<LI>Download <A href="http://www.day.com/maven/javax.jcr/jars/jcr-1.0.jar" class="external-link">jcr-1.0.jar</A> and put it into <TT>&lt;tomcat-install-dir&gt;/shared/lib</TT>.</LI>
	<LI>Get the WAR distribution from the <A href="downloads.html" title="Downloads">Downloads</A> page and deploy it into Tomcat.</LI>
	<LI>Point your browser to <TT>http://</TT><TT>localhost:8080/jackrabbit-webapp-&lt;version&gt;/</TT></LI>
</UL>


<H2><A name="FrequentlyAskedQuestions-Accesscontrol"></A>Access control</H2>

<H3><A name="FrequentlyAskedQuestions-HowdoIuseLDAP%2CKerberos%2CorsomeotherauthenticationmechanismwithJackrabbit%3F"></A>How do I use LDAP, Kerberos, or some other authentication mechanism         with Jackrabbit?</H3>

<P>Jackrabbit uses the Java Authentication and Authorization Service (JAAS) for authenticating users. You should be able to use any           JAAS LoginModule implementation (e.g. the LoginModules in thecom.sum.security.auth.modulepackage) for authentication. See the JAAS documentation for           configuration instructions.</P>

<H3><A name="FrequentlyAskedQuestions-HowdoImanagetheaccessrightsofauthenticatedusers%3F"></A>How do I manage the access rights of authenticated users?</H3>

<P>The current JackrabbitSimpleAccessManager class only supports three access levels: anonymous, normal, and           system. Anonymous users have read access while normal and system           users have full read-write access. You need to implement a custom AccessManager class to get more fine-grained access control.</P>


<H2><A name="FrequentlyAskedQuestions-Persistencemanagers"></A>Persistence managers</H2>

<H3><A name="FrequentlyAskedQuestions-Whatisapersistencemanager%3F"></A>What is a persistence manager?</H3>

<P>A persistence manager (PM) is an internal Jackrabbit           component that handles the persistent storage of content nodes           and properties. Each workspace of a Jackrabbit content repository           uses a separate persistence manager to store the content in that           workspace. Also the Jackrabbit version handler uses a separate           persistence manager.The persistence manager sits at the very bottom layer of the           Jackrabbit system architecture. Reliability, integrity and           performance of the PM are crucial to the overall           stability and performance of the repository. If e.g. the data           that a PM is based upon is allowed to change through external           means the integrity of the repository would be at risk           (think of referential integrity / node references e.g.).</P>

<P>In practice, a persistence manager is any Java class that           implements the PersistenceManager            interface and the associated behavoural contracts. Jackrabbit           contains a set of built-in persistence manager classes that cover           most of the deployment needs. There are also a few contributed           persistence managers that give additional flexibility.</P>

<H3><A name="FrequentlyAskedQuestions-WhatisaJackrabbitfilesystem%3F"></A>What is a Jackrabbit file system?</H3>

<P>A Jackrabbbit file system (FS) is an internal component that           implements standard file system operations on top of some underlying           storage mechanism (a normal file system, a database, a webdav server,           or a custom file format). A file system component is any Java class           that implements the FileSystem            interface and the associated behavioral contracts. File systems           are used in Jackrabbit both as subcomponents of the persistence           managers and for general storage needs (for example to store the           full text indexes).</P>

<H3><A name="FrequentlyAskedQuestions-CanIuseapersistencemanagertoaccessanexistingdatasource%3F"></A>Can I use a persistence manager to access an existing data source?</H3>

<P>No. The persistence manager interface was never intended as being           a general SPI that you could implement in order to integrate           external data sources with proprietary formats (e.g. a customers           database). The reason why we abstracted the PM interface was           to leave room for future performance optimizations that would           not affect the rest of the implementation (e.g. by storing the           raw data in a b-tree based database instead of individual file).</P>

<H3><A name="FrequentlyAskedQuestions-Howsmartshouldapersistencemanagerbe%3F"></A>How smart should a persistence manager be?</H3>

<P>A persistence manager should not be intelligent, i.e.           it should not interpret the content it is managing.           The only thing it should care about is to efficiently,           consistently, and reliably store and read the content encapsulated           in the passed NodeState and PropertyState objects. Though it           might be feasible to write a custom persistence manager to           represent existing legacy data in a level-1 (read-only) repository,           I don't think the same is possible for a level-2 repository and           I certainly would not recommend it.</P>

<H2><A name="FrequentlyAskedQuestions-Query"></A>Query</H2>

<H3><A name="FrequentlyAskedQuestions-I%27veconfiguredtextFilterClassesbutmyquerystilldoesn%27twork%2Cwhat%27swrong%3F"></A>I've configured textFilterClasses but my query still doesn't work, what's wrong?</H3>

<P>Make sure you changed existing workspace.xml files as well. The workspace element in repository.xml only acts as a template for new workspaces.</P>

<P>Verify that you also put the jar files into the classpath that jackrabbit depends on for text extraction. You can find all required jar files inside the jackrabbit-webapp war file (the <TT>WEB-INF/lib</TT> folder). Go to the <A href="downloads.html" title="Downloads">downloads</A> page to get the war file.</P>

<P>Some documents may still not be searchable for various reasons: the document is corrupt, bug in one of the libraries that extract text, document is encrypted or otherwise protected, etc.</P>

<H3><A name="FrequentlyAskedQuestions-Whydoesn%27t%7B%7B%2F%2F%5Cjcr%3Acontains%28@jcr%3Adata%2C%27foo%27%29%7D%7Dreturnmatchesforbinarycontent%3F"></A>Why doesn't <TT>//*[jcr:contains(@jcr:data, 'foo')]</TT> return matches for binary content?</H3>

<P>Extracted text from binary content is only indexed on the parent node of the @jcr:data property. Use jcr:contains() on the nt:resource node.<BR>
Examples:</P>
<DIV class="preformatted panel" style="border-width: 1px;"><DIV class="preformattedContent panelContent">
<PRE>//element(*, nt:resource)[jcr:contains(., 'foo')] 
//element(*, nt:file)[jcr:contains(jcr:content, 'foo')] 
</PRE>
</DIV></DIV>

<H3><A name="FrequentlyAskedQuestions-CanIusetheLucenefieldsyntaxinjcr%3Acontains%28%29%3F"></A>Can I use the Lucene field syntax in jcr:contains()?</H3>

<P>No, you cannot. Even though Jackrabbit uses a Lucene index, the fields for JCR properties do not map 1:1 to Lucene fields. Instead you can use the following:</P>

<DIV class="preformatted panel" style="border-width: 1px;"><DIV class="preformattedContent panelContent">
<PRE>//element(*, book)[jcr:contains(@title, 'jackrabbit') and jcr:contains(@text, 'query')]
</PRE>
</DIV></DIV>

<H3><A name="FrequentlyAskedQuestions-MyXPathqueryreturnsnoresultswhenIaddapathconstraint%2Cwhat%27swrong%3F"></A>My XPath query returns no results when I add a path constraint, what's wrong?</H3>

<P>You probably forgot to prefix your statement with <TT>/jcr:root</TT>.</P>

<P>JSR 170 says in section 6.6.4.3:</P>
<BLOCKQUOTE>
<P>The context node of an XPath query is the XML node relative to which the query expression is evaluated.</P>

<P>A relative XPath statement (one that does not have a leading /) will be interpreted relative to the root node of the workspace, which, in the XML document view is the top-most XML element, &lt;jcr:root&gt;. This means that one should not include jcr:root as the first segment in a relative XPath statement, since that element is already the default context node.</P>

<P>An absolute XPath (one with a leading /), in contrast, will be interpreted relative to a position one level above &lt;jcr:root&gt;. This means that an absolute XPath must either begin with // or with /jcr:root in order to match anything at all.</P></BLOCKQUOTE>

<H3><A name="FrequentlyAskedQuestions-HowdoIforceaconsistencycheckonthesearchindex%3F"></A>How do I force a consistency check on the search index?</H3>

<P>Forcing a consistency check may be useful when you think the index is inconsistent. You need to add two parameters to the SearchIndex section in the workspace.xml configuration file:</P>

<DIV class="preformatted panel" style="border-width: 1px;"><DIV class="preformattedContent panelContent">
<PRE>&lt;param name=&quot;enableConsistencyCheck&quot; value=&quot;true&quot;/&gt;
&lt;param name=&quot;forceConsistencyCheck&quot; value=&quot;true&quot;/&gt;
</PRE>
</DIV></DIV>

<P>Then restart Jackrabbit and watch the log file for possible repair messages. Don't forget to remove the parameters again when you are done.</P>

<H3><A name="FrequentlyAskedQuestions-Whyisthesizeofmyqueryresult1%3F"></A>Why is the size of my query result -1?</H3>

<P>A JCR implementation may return -1 when the size is unknown. Starting with 2.0 Jackrabbit will return -1 for some query statements when there is potential for a more optimized query execution. If you still want a size information you can append an order by clause to your statement. This will force Jackrabbit to calculate the result size.</P>
        </DIV>
        <DIV id="end"></DIV>
      </DIV>
      <DIV id="footer">
        <P>
          &copy; 2004-2010 The Apache Software Foundation.
          - <A href="http://jackrabbit.apache.org/privacy-policy.html">Privacy Policy</A> -
          [<A href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=75346">edit this page</A>]
          <BR>
          Apache Jackrabbit, Jackrabbit, Apache, the Apache feather logo, and the Apache
          Jackrabbit project logo are trademarks of The Apache Software Foundation.
        </P>
      </DIV>
    </DIV>
<!-- JCR- 1315: Add Google Analytics to Jackrabbit web site -->
<SCRIPT type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</SCRIPT>
<SCRIPT type="text/javascript">
var pageTracker = _gat._getTracker("UA-837900-2");
pageTracker._initData();
pageTracker._trackPageview();
</SCRIPT>
  </BODY>
</HTML>
