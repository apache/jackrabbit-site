<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.4.2_10) on Sat Jun 10 10:22:31 EEST 2006 -->
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<TITLE>
org.apache.jackrabbit.rmi.value (JCR-RMI 1.0 API)
</TITLE>

<META NAME="keywords" CONTENT="org.apache.jackrabbit.rmi.value package">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="org.apache.jackrabbit.rmi.value (JCR-RMI 1.0 API)";
}
</SCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Package</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-use.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../org/apache/jackrabbit/rmi/server/iterator/package-summary.html"><B>PREV PACKAGE</B></A>&nbsp;
&nbsp;<A HREF="../../../../../org/apache/jackrabbit/rmi/xml/package-summary.html"><B>NEXT PACKAGE</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<H2>
Package org.apache.jackrabbit.rmi.value
</H2>
Serializable implementation of the JCR Value interfaces.
<P>
<B>See:</B>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="#package_description"><B>Description</B></A>
<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Interface Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../org/apache/jackrabbit/rmi/value/StatefulValue.html" title="interface in org.apache.jackrabbit.rmi.value">StatefulValue</A></B></TD>
<TD>The <code>StatefullValue</code> interface defines the API used for the state
 classes used by the <CODE>SerialValue</CODE> class.</TD>
</TR>
</TABLE>
&nbsp;

<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Class Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../org/apache/jackrabbit/rmi/value/BaseNonStreamValue.html" title="class in org.apache.jackrabbit.rmi.value">BaseNonStreamValue</A></B></TD>
<TD>The <code>BaseNonStreamValue</code> class implements the basic committed
 value state for non-stream values as a part of the State design pattern (Gof)
 used by this package.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../org/apache/jackrabbit/rmi/value/BinaryValue.html" title="class in org.apache.jackrabbit.rmi.value">BinaryValue</A></B></TD>
<TD>The <code>BinaryValue</code> class implements the committed value state for
 Binary values as a part of the State design pattern (Gof) used by this
 package.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../org/apache/jackrabbit/rmi/value/BooleanValue.html" title="class in org.apache.jackrabbit.rmi.value">BooleanValue</A></B></TD>
<TD>The <code>BooleanValue</code> class implements the committed value state for
 Boolean values as a part of the State design pattern (Gof) used by this
 package.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../org/apache/jackrabbit/rmi/value/DateValue.html" title="class in org.apache.jackrabbit.rmi.value">DateValue</A></B></TD>
<TD>The <code>DateValue</code> class implements the committed value state for
 Date values as a part of the State design pattern (Gof) used by this
 package.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../org/apache/jackrabbit/rmi/value/DoubleValue.html" title="class in org.apache.jackrabbit.rmi.value">DoubleValue</A></B></TD>
<TD>The <code>DoubleValue</code> class implements the committed value state for
 Double values as a part of the State design pattern (Gof) used by this
 package.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../org/apache/jackrabbit/rmi/value/LongValue.html" title="class in org.apache.jackrabbit.rmi.value">LongValue</A></B></TD>
<TD>The <code>LongValue</code> class implements the committed value state for
 Long values as a part of the State design pattern (Gof) used by this
 package.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../org/apache/jackrabbit/rmi/value/NameValue.html" title="class in org.apache.jackrabbit.rmi.value">NameValue</A></B></TD>
<TD>The <code>NameValue</code> class implements the committed value state for
 Name values as a part of the State design pattern (Gof) used by this package.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../org/apache/jackrabbit/rmi/value/PathValue.html" title="class in org.apache.jackrabbit.rmi.value">PathValue</A></B></TD>
<TD>The <code>PathValue</code> class implements the committed value state for
 Path values as a part of the State design pattern (Gof) used by this package.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../org/apache/jackrabbit/rmi/value/ReferenceValue.html" title="class in org.apache.jackrabbit.rmi.value">ReferenceValue</A></B></TD>
<TD>The <code>ReferenceValue</code> class implements the committed value state
 for Reference values as a part of the State design pattern (Gof) used by
 this package.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../org/apache/jackrabbit/rmi/value/SerialValueFactory.html" title="class in org.apache.jackrabbit.rmi.value">SerialValueFactory</A></B></TD>
<TD>The <code>SerialValueFactory</code> class is used in the RMI infrastructure
 to create serializable <code>Value</code> instances on the client side.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../org/apache/jackrabbit/rmi/value/StringValue.html" title="class in org.apache.jackrabbit.rmi.value">StringValue</A></B></TD>
<TD>The <code>StringValue</code> class implements the committed value state for
 String values as a part of the State design pattern (Gof) used by this
 package.</TD>
</TR>
</TABLE>
&nbsp;

<P>
<A NAME="package_description"><!-- --></A><H2>
Package org.apache.jackrabbit.rmi.value Description
</H2>

<P>
Serializable implementation of the JCR Value interfaces.
<p>
This package contains a simple implementation of the JCR
<A HREF="http://www.day.com/maven/jsr170/javadocs/jcr-1.0/javax/jcr/Value.html" title="class or interface in javax.jcr"><CODE>Value</CODE></A> and <A HREF="http://www.day.com/maven/jsr170/javadocs/jcr-1.0/javax/jcr/ValueFactory.html" title="class or interface in javax.jcr"><CODE>ValueFactory</CODE></A>
interfaces. The implementation has no external dependencies and supports
serialization of Value instances.
</p>
<p>
Note that the Value instances created by this package are not thread safe.
</p>
<h2>Implementation notes</h2>
<p>
This package uses the State design pattern (GoF) to implement the JCR
<A HREF="http://www.day.com/maven/jsr170/javadocs/jcr-1.0/javax/jcr/Value.html" title="class or interface in javax.jcr"><CODE>Value</CODE></A> interface. A Value instance is initially
in a fresh state that gets committed to a stream or non-stream state once
the first value getter method is invoked. After that the Value state is
no longer changed. The state diagram below illustrates the Value states.
</p>
<p align="center">
<img src="doc-files/state.jpg" alt="Value state diagram">
</p>
<p>
The <CODE>GeneralValue</CODE> implementation class acts as the
state context object. It contains a reference to another Value instance that
represents the current Value state. The reference is initially set to
an <CODE>InitialValue</CODE> instance that is used to intercept
the first value getter method. When the first method call is made, the
InitialValue instance performs the correct state transition by changing
the GenericValue state reference to a committed Value instance.
</p>
<p>
The committed Value states are implemented by the type-specific classes
<CODE>StringValue</CODE>, <CODE>LongValue</CODE>,
<CODE>DoubleValue</CODE>, <CODE>BooleanValue</CODE>,
<CODE>DateValue</CODE>, and <CODE>BinaryValue</CODE>.
These classes handle no state transitions, but implement the value
conversion rules defined in the JCR specification.
</p>
<p>
The sequence diagram below illustrates the sequence of actions of
creating a string value, committing it to the stream state, and finally
using it in that state.
</p>
<p align="center">
<img src="doc-files/sequence.jpg" alt="Value sequence diagram">
</p>
<p>
These implementation classes are all package-local and final, and their
behaviour can therefore not be modified externally. The Decorator design
pattern should be used if changes to Value behaviour are needed.
</p>
<h2>About Value equality</h2>
<p>
The current JCR specification (0.16.4) does not define a safe mechanism for
implementing the <CODE>equals</CODE> method in general.
A proper implementation of this method would currently require potential
state changes in the compared Value instances. Thus this package only defines
equality comparisons between Value instances generated by this package and
throws <CODE>UnsupportedOperationExceptions</CODE>
for more general Value comparisons.
</p>
<P>

<P>
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Package</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-use.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../org/apache/jackrabbit/rmi/server/iterator/package-summary.html"><B>PREV PACKAGE</B></A>&nbsp;
&nbsp;<A HREF="../../../../../org/apache/jackrabbit/rmi/xml/package-summary.html"><B>NEXT PACKAGE</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &copy; 2004-2006 . All Rights Reserved.
</BODY>
</HTML>
